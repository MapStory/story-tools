!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),(e.storytools||(e.storytools={})).core=t()}}(function(){var t;return function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var h="function"==typeof require&&require;if(!a&&h)return h(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){var i=t[s][1][e];return o(i?i:e)},u,u.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){i.time=t("./time/controls"),i.maps=t("./time/maps"),i.maps.pins=t("./time/pins"),i.maps.boxes=t("./time/boxes"),i.utils=t("./time/utils")},{"./time/boxes":2,"./time/controls":3,"./time/maps":5,"./time/pins":7,"./time/utils":9}],2:[function(t,e,i){function n(t){this.range=t.range||null,this.data=t.data||null,this.layerIds=t.layerIds||null,this.center=t.center||null,this.resolution=t.resolution||null,this.allowPan=t.allowPan,this.allowZoom=t.allowZoom,this.speed=t.speed,this.title=t.title||"",this.id=t.id||(new Date).getUTCMilliseconds(),this.zoom=t.zoom||null,this._offset=0,null===this.range&&(this.range=this.data?s.createRange(this.data[0],this.data[this.data.length-1]):s.createRange(t.start_time,t.end_time)),this._steps=null===this.data?Math.floor(this.range.width()/this.speed.interval)+1:this.data.length}function o(t,e){var i=t[e];return"undefined"!=typeof i?i*=1e3:null}function r(t,e){var i,n,o;for(i=0,n=t.length;n>i;i++)if(o=t[i],e>=o._offset){if(!(n>i+1))break;if(e<t[i+1]._offset)break}return o}var s=t("./utils");n.prototype.getSteps=function(){return this._steps},n.prototype.getRange=function(){return this.range},n.prototype.getIndex=function(t){return this.data?s.find(this.data,t):Math.floor(Math.min(this.range.width(),Math.max(0,t-this.range.start))/this.speed.interval)},n.prototype.getDate=function(t){return t-=this._offset,this.data?this.data[t]:this.range.start+t*this.speed.interval},i.loadFromGeoJSON=function(t,e){return e&&(e=ol.proj.get(e)),t.features.map(function(t){var i=t.properties;return i.id=t.id,i.start_time=o(i,"start_time"),i.end_time=o(i,"end_time"),new n(i,e)})},i.BoxModel=function(t){function e(t){var e=0;i=t.map(function(t){var i=new n(t);return i._offset=e,e+=i.getSteps(),i}),o=s.computeRange(i,"range"),a=e}var i,o,a;e(t),this.getRange=function(){return o},this.getSteps=function(){return a},this.getRangeAt=function(t,e){var n=r(i,t),o=r(i,e);return s.createRange(n.getDate(t),o.getDate(e))},this.getIndex=function(t){var e,n=0;if(t<i[0].getRange().start)return 0;for(e=0;e<i.length;e++){var o=i[e],r=o.getRange();if(t>=r.start&&t<=r.end){n+=o.getIndex(t);break}n+=o.getSteps()}return n},this.setRange=function(t){if(1==i.length){if(s.isRangeLike(t))throw new Error("not supported yet");i[0].data=t,i[0].range=s.computeRange(t)}else console.log("more than one story box to update range with!");e(i)},this.update=function(){}},i.findBox=r,i.Box=n},{"./utils":9}],3:[function(t,e,i){function n(t,e,i,n){function o(){return a.createRange(i.getWindow())}function r(t,e,i){if(!b){b=!0;try{t(e,i)}finally{b=!1}}}function s(e){var n="cumulative"===t.mode?e.end:e.center();i.moveTo(n),m(e)}function h(n){if(!i.isWindowMax()){var o=n.center(),r=t.getIndex(o);"cumulative"===t.mode?e.growTo(r):e.center(r),i.setTime(o),m(e.getRange())}}function d(t){a.rangesEqual(t,y)||(t=a.createRange(t),t.width()!==y.width()?i.moveToCurrentTime():h(t),y=t)}function u(){null!==w&&window.clearTimeout(w),w=null}function l(i){w=null;var o;if(o="cumulative"===t.mode?e.grow(i):e.move(i))if("chapter"===v.loop)e.jump(0);else if("story"===v.loop){var r=window.location.hash.split("/")[2],a=void 0===r||null===r?2:parseInt(r)+1;a<=n.chapterCount?(console.log("Going to Chapter ",a),window.location.href="#/chapter/"+a,e.jump(0)):(console.log("Going to Chapter 1"),window.location.href="#/chapter/1",e.jump(0))}else v.stop();s(e.getRange()),_&&c()}function c(){if(_){var e=t.interval;$.when.apply($,k).then(function(){_&&(w=window.setTimeout(l,e,1))},function(){0===arguments.length&&_&&null===w?w=window.setTimeout(l,e,1):v.stop()}),k=[]}}function p(){f("running"),l(1)}function m(t){"undefined"==typeof t&&(t=e.getRange()),g("rangeChange",t)}function f(t){g("stateChange",t)}function g(t,e){D.event(t).publish(e)}this.model=t,this.slider=e,this.timeline=i,this.loop="none";var v=this,y=o(),b=!1,_=!1,w=null,D=new a.Events,k=[];e.on("rangeChanged",function(t){u(),r(s,t),c()}),i.on("rangechanged",function(t){r(d,t)}),i.on("select",function(t){console.log("Selected items: ",t.items)}),this.defer=function(t){k.push(t)},this.getCurrentRange=function(){return e.getRange()},this.update=function(n){t.update(n),e.update(t),i.update(t),window.setTimeout(m,0)},this.start=function(){_||(k=[],_=!0,window.setTimeout(p,0))},this.stop=function(){k=[],_=!1,u(),window.setTimeout(f,0,"stopped")},this.next=function(){u(),window.setTimeout(l,0,1)},this.prev=function(){u(),window.setTimeout(l,0,-1)},this.isStarted=function(){return _},this.isReady=function(){var e=t.getRange();return null!==e.start&&null!==e.end},this.on=function(t,e){D.event(t).subscribe(e)}}function o(t){function e(){return i.filter(function(t){return t.in_timeline})}var i=t||[];this.getTimeLineAnnotatons=function(){return e(!0)},this.update=function(t){this.ann=t}}function r(t){function e(){return i.filter(function(){return!0})}var i=t||[];this.getTimeLineBoxes=function(){return e(!0)},this.update=function(t){this.box=t}}function s(t){var e,i,s,c,p,m=new o(t.annotations),f=t.boxes,g={chapterCount:t.chapterCount};if(t.boxy=new r(t.boxes),"undefined"==typeof f||0===f.length){var v=0,y=null;Array.isArray(t.data)?(y=t.data,i=a.computeRange(t.data)):(v=t.data.interval||a.pickInterval(t.data),i=t.data),f=[{data:y,range:i,speed:{interval:v,seconds:3}}]}e=new h.TimeModel(t,f,m),s=new d.TimeSlider(t.timeSliderId||"slider",e),c=new u.TimeLine(t.timeLineId||"timeline",e);var b=new n(e,s,c,g);return p=new l.MapController(t,b),b}var a=t("./utils"),h=t("./models"),d=t("./slider"),u=t("./line"),l=t("./maps");i.create=s,i.maps=l,i.utils=a},{"./line":4,"./maps":5,"./models":6,"./slider":8,"./utils":9}],4:[function(t,e,i){var n=t("vis/lib/timeline/Timeline"),o=t("./utils");i.TimeLine=function(t,e){function i(t){var e,i=[],a=[],h=[],d="Annotation",u=t.getRange();if(u.isEmpty()&&(u=o.createRange(Date.now())),i=t.annotations.getTimeLineAnnotatons().map(function(t,e){var i=null!=t.start_time?t.start_time:u.start,n=null!=t.end_time?t.end_time:u.end,r=i===n?"box":"range";return{id:o.sha1("annotation"+t.id+e),start:i,end:n,content:t.content||t.title,title:t.title,type:r,group:d}}),i.length>0&&h.push({id:d,title:d,time:[]}),t.boxy.box){var l=t.boxy.box.map(function(t){var e=null!=t.range?t.range.start:u.start,i=null!=t.range?t.range.end:u.end,n="background";return{id:o.sha1("box"+t.id),start:e,end:i,content:t.content||t.title,type:n}});i=i.concat(l)}a=$.map(t.storyLayers,function(t){var e=t.get("id"),n=t.get("title"),r=t.get("times")||[],s=null;if(r.length>0){if(r.length>1500)i.push({id:o.sha1(e),group:e,content:"",start:r[0],end:r[r.length-1],type:"range"});else for(var a=0;a<r.length;a++){var h=r[a];i.push({id:o.sha1(e+h+Date()),group:e,content:"",start:h,type:"box"})}s={id:e,content:n}}return s}),h=h.concat(a),i.length>5e3&&(console.debug("%s elements is too large for the timeline to render performant, no worries we will take care of it.",i.length),i=[]),console.debug("Building the timeline from %s to %s with %s elements and %s groups.",new Date(u.start).toISOString(),new Date(u.end).toISOString(),i.length,h.length);var c=.35*$(document).height();e={min:u.start,max:u.end,start:u.start,end:u.end,height:300>c?138:c,maxHeight:400,showCurrentTime:!1},null===s?(s=new n(r.get(0),i,e),s.setGroups(h),s.setCurrentTime(u.start),s.addCustomTime()):(s.setOptions(e),s.setItems(i),s.setGroups(h))}var r=$("#"+t),s=null,a=60*(new Date).getTimezoneOffset()*1e3;i(e),s.on("timechanged",function(){s.moveTo(s.getCustomTime(),{animate:!1})}),this.moveTo=function(t){s.moveTo(t,{animate:!1}),this.setTime(t)},this.setTime=function(t){s.setCustomTime(t+a)},this.isWindowMax=function(){return o.rangesEqual(s.getWindow(),e.getRange())},this.moveToCurrentTime=function(){var t=s.getCustomTime().getTime(),i=o.createRange(s.getWindow()).width(),n=e.getRange();t===n.start?s.setWindow(n.start,n.start+i,{animate:!1}):t===n.end?s.setWindow(n.end-i,n.end,{animate:!1}):s.moveTo(t,{animate:!1})},this.getWindow=function(){return s.getWindow()},this.on=function(t,e){s.on(t,e)},this.update=i}},{"./utils":9,"vis/lib/timeline/Timeline":31}],5:[function(t,e,i){function n(t){function e(){var t=0;for(var e in i)t+=i[e];return t}var i={},n=$.Deferred(),o=!1,r={deferred:n,cancel:function(){o=!0;for(var e in i)i[e]=0;n&&n.reject(),t&&t(0)},tileQueued:function(n){if(!o){var r;n instanceof ol.source.TileWMS?r=n.getUrls()[0]:n instanceof ol.source.ImageWMS&&(r=n.getUrl()),i[r]=(i[r]||0)+1,t&&t(e())}},tileLoaded:function(r,s){if(!o){var a;s instanceof ol.source.TileWMS?a=s.getUrls()[0]:s instanceof ol.source.ImageWMS&&(a=s.getUrl()),i[a]-=1;var h=e();t&&t(h),0===h&&n&&n.resolve()}}};return window.setTimeout(function(){0===Object.keys(i).length&&r.cancel()},100),r}function o(t,e){var i=t.get("timeAttribute"),n=t.get("features")||t.getLayer().get("features");if(void 0!==i&&void 0!==n){e=a.createRange(e);var o=[],r=t.getLayer();return s(t,function(t,i){e.intersects(i)&&o.push(t)},n),r.getSource().clear(!0),r.getSource().addFeatures(o),o}}function r(t,e){var i=t.get("timeAttribute"),n=t.get("features");if(void 0!==i&&void 0!==n){e=a.createRange(e);var o=[];return s(t,function(t,i){e.intersects(i)&&o.push(t)}),o}}function s(t,e,i){var n,o=t.get("timeAttribute"),r=t.get("endTimeAttribute"),s=t.getLayer();i=i||t.get("features")||s.getSource().getFeatures(),n=r?function(t){if(t.range)return t.range;var e=t.get(o),i=t.get(r);return a.createRange(e,i)}:function(t){if(t.range)return t.range;var e=t.get(o);return a.createRange(e,e)},a.visitRanges(i,n,e)}{var a=t("./utils");t("moment")}i.readCapabilitiesTimeDimensions=function(t,e){function i(t){if(t.length<2)throw new Error("expected 2 parts for range : "+t);var e=a.createRange(t[0],t[1]);return 3==t.length&&(e.duration=t[2],e=new a.Interval(e)),e}function n(t){var e=t.split("/");return 1==e.length?a.getTime(e[0]):i(e)}function o(t){var i=e?t:t.split(",");if(1==i.length){var o=n(i[0]);return"number"==typeof o?[o]:o}return i.map(n)}var r={};return e===!0?r=t.dimensions&&t.dimensions.time?o(t.dimensions.time.values):void 0:t.value.capability.layer.layer.forEach(function(t){for(var e=0;e<t.dimension.length;e++)t.dimension[e]&&t.dimension[e].name&&"time"===t.dimension[e].name&&(r[t.name]=o(t.dimension[e].value))}),r},i.computeVectorRange=function(t,e){var i=t.get("timeAttribute"),n=t.get("endTimeAttribute"),o=t.getLayer();return e=e||t.get("features")||o.getSource().getFeatures(),a.computeRange(e,function(t){return a.createRange(t.get(i),t.get(n))})},i.filterVectorLayer=o,i.filterVectorBoxLayer=r,i.MapController=function(t,e){function i(t){var e,i=function(t){var i=d;i&&i.tileLoaded(t,e)},n=function(){var t=d;t&&t.tileQueued(e)};t instanceof ol.layer.Tile&&t.getSource()instanceof ol.source.TileWMS?(e=t.getSource(),e.on("tileloadstart",n),e.on("tileloadend",i),e.on("tileloaderror",i)):t instanceof ol.layer.Image&&t.getSource()instanceof ol.source.ImageWMS&&(e=t.getSource(),e.on("imageloadstart",n),e.on("imageloadend",i),e.on("imageloaderror",i))}function s(){return null!==d&&d.cancel(),d=new n(u)}function a(t){var e=r(l.storyBoxesLayer,t),i=o(l.storyPinsLayer,t);if(!(i&&i.length>0))if(e&&e.length>0){var n=e[0];n.center&&l.animateCenterAndZoom(n.center,n.zoom)}else l.returnToExtent&&l.animateCenterAndZoom(l.getCenter(),l.getZoom())}function h(t){var i=l.getStoryLayers(),n=new Date(t.start).toISOString();t.start!=t.end&&(n+="/"+new Date(t.end).toISOString());for(var r=0;r<i.getLength();r++){var a=i.item(r),h=a.getLayer();h instanceof ol.layer.Tile&&h.getSource()instanceof ol.source.TileWMS||h instanceof ol.layer.Image&&h.getSource()instanceof ol.source.ImageWMS?a.get("times")&&h.getSource().updateParams({TIME:n}):h instanceof ol.layer.Vector&&o(a,t)}o(l.storyPinsLayer,t),i.getLength()>=1&&e.defer(s().deferred)}var d=null,u=t.tileStatusCallback,l=t.storyMap,c=this;c.layers={},l.getStoryLayers().on("add",function(t){var e=t.element,n=e.get("id");c.layers[n]!==!0&&(i(e.getLayer()),c.layers[n]=!0)}),l.getStoryLayers().forEach(function(t){var e=t.get("id");void 0!==e&&c.layers[e]!==!0&&(i(t.getLayer()),c.layers[e]=!0)}),e.on("rangeChange",a),e.on("rangeChange",h)}},{"./utils":9,moment:13}],6:[function(t,e,i){var n=t("./utils"),o=t("./boxes").BoxModel;i.TimeModel=function(t,e,i){function r(t){t.hasOwnProperty("fixed")&&(this.fixed=t.fixed),t.hasOwnProperty("speed")&&void 0!==t.speed&&(this.interval=t.speed),t.hasOwnProperty("mode")&&void 0!==t.mode&&(this.mode=t.mode),t.hasOwnProperty("annotations")&&this.annotations.update(t.annotations),t.hasOwnProperty("boxes")&&this.boxy.update(t.boxes),t.hasOwnProperty("storyLayers")&&(this.storyLayers=t.storyLayers),t.hasOwnProperty("data")&&s.setRange(t.data)}var s=(new n.Events,new o(e));this.annotations=i,this.boxes=e,this.boxy=t.boxy,this.storyLayers=[],this.fixed=!1,this.mode="instant",this.interval=1e3,r.call(this,t),this.getRange=function(){return s.getRange()},this.getTotalRange=function(){throw Error("not implemented")},this.update=r,this.getSteps=function(){return s.getSteps()},this.getIndex=function(t){return s.getIndex(t)},this.getRangeAt=function(t,e){return s.getRangeAt(t,e)}}},{"./boxes":2,"./utils":9}],7:[function(t,e,i){function n(t,e){var i=t[e];return"undefined"!=typeof i?i*=1e3:null}var o=new ol.format.GeoJSON,r=function(t,e){if(ol.Feature.call(this,t),t){if(t.the_geom){var i=t.the_geom;("string"==typeof i||"type"in i)&&(i=o.readGeometry(i,{featureProjection:e})),this.setGeometry(i),delete t.the_geom}this.setId(t.id)}};r.prototype=Object.create(ol.Feature.prototype),r.prototype.constructor=r,["id","start_time","end_time","content","title","in_timeline","in_map","auto_show","pause_playback"].forEach(function(t){Object.defineProperty(r.prototype,t,{get:function(){var e=this.get(t);return"undefined"==typeof e?null:e},set:function(e){this.set(t,e)}})}),i.loadFromGeoJSON=function(t,e){return e&&(e=ol.proj.get(e)),t.features.map(function(t){var i=t.properties;return i.the_geom=t.geometry,i.id=t.id,i.start_time=n(i,"start_time"),i.end_time=n(i,"end_time"),new r(i,e)})},i.StoryPin=r},{}],8:[function(t,e,i){var n=t("./utils");i.TimeSlider=function(t,e){function i(t){var e={step:1,start:[0,0],animate:!1,connect:!0,range:{min:0,max:t.getSteps()-1},behaviour:"drag-snap"};if(d=!1,"cumulative"===t.mode)d=!0,e.connect="lower";else if("instant"===t.mode)d=!0,e.connect=!1;else{if("range"!==t.mode)throw"invalid model mode : "+t.mode;t.fixed&&(e.behaviour="drag-fixed")}if(c){var i=o();d?e.start=i[0]:(i[0]===i[1]&&(i[1]+=1),e.start=i)}else d&&(e.start=0);c?(e.range={min:0,max:t.getSteps()-1},u.noUiSlider.updateOptions(e,!0)):u&&(noUiSlider.create(u,e),u.noUiSlider.on("slide",function(){var t=r();l.event("rangeChanged").publish(t)}),c=!0)}function o(){var t=u.noUiSlider.get();return Array.isArray(t)?t=t.map(function(t){return parseInt(t,10)}):(t=parseInt(t,10),t=["cumulative"===e.mode?0:t,t]),t}function r(){var t=o();return e.getRangeAt(t[0],t[1])}function s(){var t=o();return t[1]-t[0]}function a(t){var i=o();return t?0===i[0]:i[1]===e.getSteps()-1}function h(t){u.noUiSlider.set(d?t[1]:t)}var d,u=$("#"+t)[0],l=new n.Events,c=!1;i(e),this.slider=u,this.on=function(t,e){c&&l.event(t).subscribe(e)},this.getSliderRangeInternal=o,this.center=function(t){var e=Math.floor(s()/2);h([t-e,t+e])},this.move=function(t){var e=o();return e[0]+=t,e[1]+=t,h(e),a(0>t)},this.grow=function(t){var e=o();return e[1]+=t,h(e),a(!1)},this.growTo=function(t){var e=o();return e[1]=t,h(e),a(!1)},this.jump=function(t){h([t,t+s()])},this.getRange=r,this.update=i}},{"./utils":9}],9:[function(t,e,i){function n(t,e){if(null==e)throw new Error("invalid time argument");return(null!=t.start?e>=t.start:!0)&&(null!=t.end?e<t.end:!0)||t.start===t.end&&e===t.start}function o(t,e){if(isNaN(t)||isNaN(e))throw new Error("invalid start and/or end");this.start=t,this.end=e}var r=t("moment"),s=function(t){var e=typeof t;if("number"===e)return t;if(t instanceof Date)return t.getTime();if("string"===e)return parseDate(t).getTime();if(null==t)return null;if(a(t))return s(null!=t.start?t.start:t.end);throw new Error("cannot call getTime with "+e+", : "+t)},a=function(t){return null!=t&&(t.hasOwnProperty("start")||t.hasOwnProperty("end"))};i.isRangeLike=a,i.createRange=function(t,e){if(1===arguments.length){var i=t;a(i)?(t=i.start,e=i.end):e=t}if(null!=t&&null!=e&&t>e)throw new Error("start > end");return new o(s(t),s(e))},i.rangesEqual=function(t,e){return s(t.start)===s(e.start)&&s(t.end)===s(e.end)},i.parseISODuration=function(t){var e=i.isoDurationToMoment(t);return r.duration(e).asMilliseconds()},i.Interval=function(t,e,n){if("object"==typeof t){var r=t;t=r.start,e=r.end,n=r.duration}if(t===e)throw new Error("interval should have width");o.call(this,t,e),this.duration=n,this.interval=i.parseISODuration(this.duration),this.offset=i.createOffsetter(this)},o.prototype.extend=function(t){a(t)||(t=i.createRange(t));var e=s(t.start),n=s(t.end);null==e&&(e=n),null==n&&(n=e),null!=e&&(this.start=null==this.start?e:Math.min(this.start,e)),null!=n&&(this.end=null==this.end?n:Math.max(this.end,n))},o.prototype.intersects=function(t){if(a(t)){var e=null==t.start?Number.MIN_VALUE:t.start,i=null==t.end?Number.MAX_VALUE:t.end;return n(this,e)||n(this,i)||e<=this.start&&i>=this.end}return n(this,s(t))},o.prototype.toString=function(){return new Date(this.start).toUTCString()+" : "+new Date(this.end).toUTCString()},o.prototype.center=function(){return Math.floor(this.start+(this.end-this.start)/2)},o.prototype.width=function(){return this.end-this.start},o.prototype.isEmpty=function(){return null==this.end&&null==this.start},i.Range=o,i.computeRange=function(t,e){var n=new o(null,null);return i.visitRanges(t,e,function(t,e){n.extend(e)}),null==n.start&&(n.start=n.end),null==n.end&&(n.end=n.start),n},i.visitRanges=function(t,e,n){var o;o="string"==typeof e?function(t){return t[e]}:"function"==typeof e?e:function(t){return a(t)?t:i.createRange(t)};for(var r=0,s=t.length;s>r;r++){var h=t[r];n(h,o(h))}},i.binarySearch=function(t,e){var i,n=0,o=t.length-1,r=o+n/2|0;if(e<t[0])return 0;if(e>t[o])return t.length-1;for(;(i=t[r])!==e&&o>n;){if(e>i){if(e<t[r+1])return r}else if(i>e){if(e>t[r-1])return r-1;o=r-1}r=o+n/2|0}return r},i.find=function(t,e){if(e<t[0])return 0;for(var i=0,n=t.length-1;n>i;i++)if(e>=t[i]&&e<t[i+1])return i;return t.length-1},i.Events=function(){function t(t){var i,n=t&&e[t];return n||(i=jQuery.Callbacks(),n={publish:i.fire,subscribe:i.add,unsubscribe:i.remove},t&&(e[t]=n)),n}var e={};return{event:t}},i.pickInterval=function(t){var e=[r.duration(1,"seconds").asMilliseconds(),r.duration(1,"minutes").asMilliseconds(),r.duration(1,"hours").asMilliseconds(),r.duration(1,"days").asMilliseconds(),r.duration(1,"weeks").asMilliseconds(),r.duration(1,"months").asMilliseconds(),r.duration(1,"years").asMilliseconds()];return e[Math.max(i.find(e,t.width())-1,0)]},i.stringToMoment=function(t,e){return r(t,e)},i.getTime=s,i.isoDurationToMoment=function(t){function e(t,e){function n(t,i){e&&"M"==i&&(i="m");var n=a[i];if("undefined"==typeof n)throw Error("unknown duration specifier : "+i);r[n]=parseFloat(t)}for(var o;null!==(o=i.exec(t));)n(o[1],o[2])}if("P"!=t.charAt(0))throw new Error("expected P as starting duration : "+t);var i=/(\d+)(\w)/g,n=null,o=null,r={};if(t=t.substring(1),t.indexOf("T")>=0){var s=t.split("T");n=s[0],o=s[1]}else n=t;var a={Y:"years",M:"months",W:"weeks",D:"days",H:"hours",m:"minutes",S:"seconds"};return null!==n&&e(n,!1),null!==o&&e(o,!0),r},i.createOffsetter=function(t){var e="string"==typeof t?t:t.duration,n=i.isoDurationToMoment(e);if("years"in n||"months"in n){var o=n.years,s=n.months;n.years=0,n.months=0;var a=r.duration(n).asMilliseconds();return function(t,e){e=e||1;var i=new Date(t),n=i.getUTCFullYear();null!=o&&(n+=e*o);var r=i.getUTCMonth();return null!=s&&(r+=e*s),i.setUTCFullYear(n,r),i.getTime()+e*a}}var h=r.duration(n).asMilliseconds();return function(t,e){return e=e||1,t+e*h}};var h=/^(-?)(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/;parseDate=function(t){var e,i=t.match(h);if(i&&(i[2]||i[8])){var n=parseInt(i[2],10)||0;i[1]&&(n=-1*n);var o=parseInt(i[3],10)-1||0,r=parseInt(i[4],10)||1;e=new Date(Date.UTC(n,o,r));var s=i[8];if(s){var a=parseInt(i[5],10),d=parseInt(i[6],10),u=parseFloat(i[7]),l=0|u,c=Math.round(1e3*(u-l));if(e.setUTCHours(a,d,l,c),"Z"!==s){var p=parseInt(s,10),m=parseInt(i[9],10)||0,f=-1e3*(3600*p+60*m);e=new Date(e.getTime()+f)}}}else e=new Date("invalid");return e},i.sha1=function(t){var e,i,n,o,r,s,a,h,d,u=function(t,e){return t<<e|t>>>32-e},l=function(t){var e,i,n="";for(e=7;e>=0;e--)i=t>>>4*e&15,n+=i.toString(16);return n},c=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var n=t.charCodeAt(i);128>n?e+=String.fromCharCode(n):n>127&&2048>n?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},p=new Array(80),m=1732584193,f=4023233417,g=2562383102,v=271733878,y=3285377520;t=c(t);var b=t.length,_=[];for(i=0;b-3>i;i+=4)n=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),_.push(n);switch(b%4){case 0:i=2147483648;break;case 1:i=t.charCodeAt(b-1)<<24|8388608;break;case 2:i=t.charCodeAt(b-2)<<24|t.charCodeAt(b-1)<<16|32768;break;case 3:i=t.charCodeAt(b-3)<<24|t.charCodeAt(b-2)<<16|t.charCodeAt(b-1)<<8|128}for(_.push(i);_.length%16!=14;)_.push(0);for(_.push(b>>>29),_.push(b<<3&4294967295),e=0;e<_.length;e+=16){for(i=0;16>i;i++)p[i]=_[e+i];for(i=16;79>=i;i++)p[i]=u(p[i-3]^p[i-8]^p[i-14]^p[i-16],1);for(o=m,r=f,s=g,a=v,h=y,i=0;19>=i;i++)d=u(o,5)+(r&s|~r&a)+h+p[i]+1518500249&4294967295,h=a,a=s,s=u(r,30),r=o,o=d;for(i=20;39>=i;i++)d=u(o,5)+(r^s^a)+h+p[i]+1859775393&4294967295,h=a,a=s,s=u(r,30),r=o,o=d;for(i=40;59>=i;i++)d=u(o,5)+(r&s|r&a|s&a)+h+p[i]+2400959708&4294967295,h=a,a=s,s=u(r,30),r=o,o=d;for(i=60;79>=i;i++)d=u(o,5)+(r^s^a)+h+p[i]+3395469782&4294967295,h=a,a=s,s=u(r,30),r=o,o=d;m=m+o&4294967295,f=f+r&4294967295,g=g+s&4294967295,v=v+a&4294967295,y=y+h&4294967295}var w=l(m)+l(f)+l(g)+l(v)+l(y);return w.toLowerCase()}},{moment:13}],10:[function(t,e){function i(t){return t?n(t):void 0}function n(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},i.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<i.length;o++)if(n=i[o],n===e||n.fn===e){i.splice(o,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var n=0,o=i.length;o>n;++n)i[n].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],11:[function(e,i){!function(e,n,o,r){"use strict";function s(t,e,i){return setTimeout(l(t,i),e)}function a(t,e,i){return Array.isArray(t)?(h(t,i[e],i),!0):!1}function h(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==r)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function d(t,i,n){var o="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=e.console&&(e.console.warn||e.console.log);return r&&r.call(e.console,o,n),t.apply(this,arguments)}}function u(t,e,i){var n,o=e.prototype;n=t.prototype=Object.create(o),n.constructor=t,n._super=o,i&&pe(n,i)}function l(t,e){return function(){return t.apply(e,arguments)}}function c(t,e){return typeof t==ge?t.apply(e?e[0]||r:r,e):t}function p(t,e){return t===r?e:t}function m(t,e,i){h(y(e),function(e){t.addEventListener(e,i,!1)})}function f(t,e,i){h(y(e),function(e){t.removeEventListener(e,i,!1)})}function g(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function v(t,e){return t.indexOf(e)>-1}function y(t){return t.trim().split(/\s+/g)}function b(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function _(t){return Array.prototype.slice.call(t,0)}function w(t,e,i){for(var n=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];b(o,s)<0&&n.push(t[r]),o[r]=s,r++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function D(t,e){for(var i,n,o=e[0].toUpperCase()+e.slice(1),s=0;s<me.length;){if(i=me[s],n=i?i+o:e,n in t)return n;s++}return r}function k(){return De++}function x(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}function T(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){c(t.options.enable,[t])&&i.handler(e)},this.init()}function C(t){var e,i=t.options.inputClass;return new(e=i?i:Te?j:Ce?G:xe?V:H)(t,S)}function S(t,e,i){var n=i.pointers.length,o=i.changedPointers.length,r=e&Ie&&n-o===0,s=e&(Ae|Fe)&&n-o===0;i.isFirst=!!r,i.isFinal=!!s,r&&(t.session={}),i.eventType=e,M(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function M(t,e){var i=t.session,n=e.pointers,o=n.length;i.firstInput||(i.firstInput=P(e)),o>1&&!i.firstMultiple?i.firstMultiple=P(e):1===o&&(i.firstMultiple=!1);var r=i.firstInput,s=i.firstMultiple,a=s?s.center:r.center,h=e.center=I(n);e.timeStamp=be(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=N(a,h),e.distance=F(a,h),O(i,e),e.offsetDirection=A(e.deltaX,e.deltaY);var d=R(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=ye(d.x)>ye(d.y)?d.x:d.y,e.scale=s?L(s.pointers,n):1,e.rotation=s?Y(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,E(i,e);var u=t.element;g(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function O(t,e){var i=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};(e.eventType===Ie||r.eventType===Ae)&&(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=o.x+(i.x-n.x),e.deltaY=o.y+(i.y-n.y)}function E(t,e){var i,n,o,s,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=Fe&&(h>Pe||a.velocity===r)){var d=e.deltaX-a.deltaX,u=e.deltaY-a.deltaY,l=R(h,d,u);n=l.x,o=l.y,i=ye(l.x)>ye(l.y)?l.x:l.y,s=A(d,u),t.lastInterval=e}else i=a.velocity,n=a.velocityX,o=a.velocityY,s=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=o,e.direction=s}function P(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:ve(t.pointers[i].clientX),clientY:ve(t.pointers[i].clientY)},i++;return{timeStamp:be(),pointers:e,center:I(e),deltaX:t.deltaX,deltaY:t.deltaY}}function I(t){var e=t.length;if(1===e)return{x:ve(t[0].clientX),y:ve(t[0].clientY)};for(var i=0,n=0,o=0;e>o;)i+=t[o].clientX,n+=t[o].clientY,o++;return{x:ve(i/e),y:ve(n/e)}}function R(t,e,i){return{x:e/t||0,y:i/t||0}}function A(t,e){return t===e?Ne:ye(t)>=ye(e)?0>t?Ye:Le:0>e?He:je}function F(t,e,i){i||(i=Ue);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return Math.sqrt(n*n+o*o)}function N(t,e,i){i||(i=Ue);var n=e[i[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return 180*Math.atan2(o,n)/Math.PI}function Y(t,e){return N(e[1],e[0],Ve)+N(t[1],t[0],Ve)}function L(t,e){return F(e[0],e[1],Ve)/F(t[0],t[1],Ve)}function H(){this.evEl=qe,this.evWin=Xe,this.pressed=!1,T.apply(this,arguments)}function j(){this.evEl=Je,this.evWin=Ke,T.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function W(){this.evTarget=ti,this.evWin=ei,this.started=!1,T.apply(this,arguments)}function B(t,e){var i=_(t.touches),n=_(t.changedTouches);return e&(Ae|Fe)&&(i=w(i.concat(n),"identifier",!0)),[i,n]}function G(){this.evTarget=ni,this.targetIds={},T.apply(this,arguments)}function U(t,e){var i=_(t.touches),n=this.targetIds;if(e&(Ie|Re)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,r,s=_(t.changedTouches),a=[],h=this.target;if(r=i.filter(function(t){return g(t.target,h)}),e===Ie)for(o=0;o<r.length;)n[r[o].identifier]=!0,o++;for(o=0;o<s.length;)n[s[o].identifier]&&a.push(s[o]),e&(Ae|Fe)&&delete n[s[o].identifier],o++;return a.length?[w(r.concat(a),"identifier",!0),a]:void 0}function V(){T.apply(this,arguments);var t=l(this.handler,this);this.touch=new G(this.manager,t),this.mouse=new H(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function z(t,e){t&Ie?(this.primaryTouch=e.changedPointers[0].identifier,q.call(this,e)):t&(Ae|Fe)&&q.call(this,e)}function q(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches,o=function(){var t=n.indexOf(i);t>-1&&n.splice(t,1)};setTimeout(o,oi)}}function X(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],r=Math.abs(e-o.x),s=Math.abs(i-o.y);if(ri>=r&&ri>=s)return!0}return!1}function Z(t,e){this.manager=t,this.set(e)}function $(t){if(v(t,li))return li;var e=v(t,ci),i=v(t,pi);return e&&i?li:e||i?e?ci:pi:v(t,ui)?ui:di}function J(){if(!ai)return!1;var t={},i=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=i?e.CSS.supports("touch-action",n):!0}),t}function K(t){this.options=pe({},this.defaults,t||{}),this.id=k(),this.manager=null,this.options.enable=p(this.options.enable,!0),this.state=fi,this.simultaneous={},this.requireFail=[]}function Q(t){return t&_i?"cancel":t&yi?"end":t&vi?"move":t&gi?"start":""}function te(t){return t==je?"down":t==He?"up":t==Ye?"left":t==Le?"right":""}function ee(t,e){var i=e.manager;return i?i.get(t):t}function ie(){K.apply(this,arguments)}function ne(){ie.apply(this,arguments),this.pX=null,this.pY=null}function oe(){ie.apply(this,arguments)}function re(){K.apply(this,arguments),this._timer=null,this._input=null}function se(){ie.apply(this,arguments)}function ae(){ie.apply(this,arguments)}function he(){K.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function de(t,e){return e=e||{},e.recognizers=p(e.recognizers,de.defaults.preset),new ue(t,e)}function ue(t,e){this.options=pe({},de.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=C(this),this.touchAction=new Z(this,this.options.touchAction),le(this,!0),h(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function le(t,e){var i=t.element;if(i.style){var n;h(t.options.cssProps,function(o,r){n=D(i.style,r),e?(t.oldCssProps[n]=i.style[n],i.style[n]=o):i.style[n]=t.oldCssProps[n]||""
}),e||(t.oldCssProps={})}}function ce(t,e){var i=n.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var pe,me=["","webkit","Moz","MS","ms","o"],fe=n.createElement("div"),ge="function",ve=Math.round,ye=Math.abs,be=Date.now;pe="function"!=typeof Object.assign?function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==r&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}:Object.assign;var _e=d(function(t,e,i){for(var n=Object.keys(e),o=0;o<n.length;)(!i||i&&t[n[o]]===r)&&(t[n[o]]=e[n[o]]),o++;return t},"extend","Use `assign`."),we=d(function(t,e){return _e(t,e,!0)},"merge","Use `assign`."),De=1,ke=/mobile|tablet|ip(ad|hone|od)|android/i,xe="ontouchstart"in e,Te=D(e,"PointerEvent")!==r,Ce=xe&&ke.test(navigator.userAgent),Se="touch",Me="pen",Oe="mouse",Ee="kinect",Pe=25,Ie=1,Re=2,Ae=4,Fe=8,Ne=1,Ye=2,Le=4,He=8,je=16,We=Ye|Le,Be=He|je,Ge=We|Be,Ue=["x","y"],Ve=["clientX","clientY"];T.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(x(this.element),this.evWin,this.domHandler)}};var ze={mousedown:Ie,mousemove:Re,mouseup:Ae},qe="mousedown",Xe="mousemove mouseup";u(H,T,{handler:function(t){var e=ze[t.type];e&Ie&&0===t.button&&(this.pressed=!0),e&Re&&1!==t.which&&(e=Ae),this.pressed&&(e&Ae&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Oe,srcEvent:t}))}});var Ze={pointerdown:Ie,pointermove:Re,pointerup:Ae,pointercancel:Fe,pointerout:Fe},$e={2:Se,3:Me,4:Oe,5:Ee},Je="pointerdown",Ke="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Je="MSPointerDown",Ke="MSPointerMove MSPointerUp MSPointerCancel"),u(j,T,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),o=Ze[n],r=$e[t.pointerType]||t.pointerType,s=r==Se,a=b(e,t.pointerId,"pointerId");o&Ie&&(0===t.button||s)?0>a&&(e.push(t),a=e.length-1):o&(Ae|Fe)&&(i=!0),0>a||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(a,1))}});var Qe={touchstart:Ie,touchmove:Re,touchend:Ae,touchcancel:Fe},ti="touchstart",ei="touchstart touchmove touchend touchcancel";u(W,T,{handler:function(t){var e=Qe[t.type];if(e===Ie&&(this.started=!0),this.started){var i=B.call(this,t,e);e&(Ae|Fe)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Se,srcEvent:t})}}});var ii={touchstart:Ie,touchmove:Re,touchend:Ae,touchcancel:Fe},ni="touchstart touchmove touchend touchcancel";u(G,T,{handler:function(t){var e=ii[t.type],i=U.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Se,srcEvent:t})}});var oi=2500,ri=25;u(V,T,{handler:function(t,e,i){var n=i.pointerType==Se,o=i.pointerType==Oe;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)z.call(this,e,i);else if(o&&X.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var si=D(fe.style,"touchAction"),ai=si!==r,hi="compute",di="auto",ui="manipulation",li="none",ci="pan-x",pi="pan-y",mi=J();Z.prototype={set:function(t){t==hi&&(t=this.compute()),ai&&this.manager.element.style&&mi[t]&&(this.manager.element.style[si]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return h(this.manager.recognizers,function(e){c(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),$(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,o=v(n,li)&&!mi[li],r=v(n,pi)&&!mi[pi],s=v(n,ci)&&!mi[ci];if(o){var a=1===t.pointers.length,h=t.distance<2,d=t.deltaTime<250;if(a&&h&&d)return}return s&&r?void 0:o||r&&i&We||s&&i&Be?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var fi=1,gi=2,vi=4,yi=8,bi=yi,_i=16,wi=32;K.prototype={defaults:{},set:function(t){return pe(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=ee(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)?this:(t=ee(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var e=this.requireFail;return t=ee(t,this),-1===b(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=ee(t,this);var e=b(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;yi>n&&e(i.options.event+Q(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),n>=yi&&e(i.options.event+Q(n))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=wi)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(wi|fi)))return!1;t++}return!0},recognize:function(t){var e=pe({},t);return c(this.options.enable,[this,e])?(this.state&(bi|_i|wi)&&(this.state=fi),this.state=this.process(e),void(this.state&(gi|vi|yi|_i)&&this.tryEmit(e))):(this.reset(),void(this.state=wi))},process:function(){},getTouchAction:function(){},reset:function(){}},u(ie,K,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(gi|vi),o=this.attrTest(t);return n&&(i&Fe||!o)?e|_i:n||o?i&Ae?e|yi:e&gi?e|vi:gi:wi}}),u(ne,ie,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ge},getTouchAction:function(){var t=this.options.direction,e=[];return t&We&&e.push(pi),t&Be&&e.push(ci),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&We?(o=0===r?Ne:0>r?Ye:Le,i=r!=this.pX,n=Math.abs(t.deltaX)):(o=0===s?Ne:0>s?He:je,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=o,i&&n>e.threshold&&o&e.direction},attrTest:function(t){return ie.prototype.attrTest.call(this,t)&&(this.state&gi||!(this.state&gi)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=te(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),u(oe,ie,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[li]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&gi)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),u(re,K,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[di]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(Ae|Fe)&&!o)this.reset();else if(t.eventType&Ie)this.reset(),this._timer=s(function(){this.state=bi,this.tryEmit()},e.time,this);else if(t.eventType&Ae)return bi;return wi},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===bi&&(t&&t.eventType&Ae?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=be(),this.manager.emit(this.options.event,this._input)))}}),u(se,ie,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[li]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&gi)}}),u(ae,ie,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:We|Be,pointers:1},getTouchAction:function(){return ne.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(We|Be)?e=t.overallVelocity:i&We?e=t.overallVelocityX:i&Be&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&ye(e)>this.options.velocity&&t.eventType&Ae},emit:function(t){var e=te(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),u(he,K,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ui]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&Ie&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=Ae)return this.failTimeout();var r=this.pTime?t.timeStamp-this.pTime<e.interval:!0,a=!this.pCenter||F(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&r?this.count+=1:this.count=1,this._input=t;var h=this.count%e.taps;if(0===h)return this.hasRequireFailures()?(this._timer=s(function(){this.state=bi,this.tryEmit()},e.interval,this),gi):bi}return wi},failTimeout:function(){return this._timer=s(function(){this.state=wi},this.options.interval,this),wi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==bi&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),de.VERSION="2.0.7",de.defaults={domEvents:!1,touchAction:hi,enable:!0,inputTarget:null,inputClass:null,preset:[[se,{enable:!1}],[oe,{enable:!1},["rotate"]],[ae,{direction:We}],[ne,{direction:We},["swipe"]],[he],[he,{event:"doubletap",taps:2},["tap"]],[re]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Di=1,ki=2;ue.prototype={set:function(t){return pe(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?ki:Di},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&bi)&&(o=e.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],e.stopped===ki||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&i.state&(gi|vi|yi)&&(o=e.curRecognizer=i),r++}},get:function(t){if(t instanceof K)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(a(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=b(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==r&&e!==r){var i=this.handlers;return h(y(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==r){var i=this.handlers;return h(y(t),function(t){e?i[t]&&i[t].splice(b(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&ce(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&le(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},pe(de,{INPUT_START:Ie,INPUT_MOVE:Re,INPUT_END:Ae,INPUT_CANCEL:Fe,STATE_POSSIBLE:fi,STATE_BEGAN:gi,STATE_CHANGED:vi,STATE_ENDED:yi,STATE_RECOGNIZED:bi,STATE_CANCELLED:_i,STATE_FAILED:wi,DIRECTION_NONE:Ne,DIRECTION_LEFT:Ye,DIRECTION_RIGHT:Le,DIRECTION_UP:He,DIRECTION_DOWN:je,DIRECTION_HORIZONTAL:We,DIRECTION_VERTICAL:Be,DIRECTION_ALL:Ge,Manager:ue,Input:T,TouchAction:Z,TouchInput:G,MouseInput:H,PointerEventInput:j,TouchMouseInput:V,SingleTouchInput:W,Recognizer:K,AttrRecognizer:ie,Tap:he,Pan:ne,Swipe:ae,Pinch:oe,Rotate:se,Press:re,on:m,off:f,each:h,merge:we,extend:_e,assign:pe,inherit:u,bindFn:l,prefixed:D});var xi="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};xi.Hammer=de,"function"==typeof t&&t.amd?t(function(){return de}):"undefined"!=typeof i&&i.exports?i.exports=de:e[o]=de}(window,document,"Hammer")},{}],12:[function(e,i,n){"use strict";!function(e,o){"function"==typeof t&&t.amd?t([],o):"object"==typeof n?i.exports=o():e.keycharm=o()}(this,function(){function t(t){var e,i=t&&t.preventDefault||!1,n=t&&t.container||window,o={},r={keydown:{},keyup:{}},s={};for(e=97;122>=e;e++)s[String.fromCharCode(e)]={code:65+(e-97),shift:!1};for(e=65;90>=e;e++)s[String.fromCharCode(e)]={code:e,shift:!0};for(e=0;9>=e;e++)s[""+e]={code:48+e,shift:!1};for(e=1;12>=e;e++)s["F"+e]={code:111+e,shift:!1};for(e=0;9>=e;e++)s["num"+e]={code:96+e,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s["delete"]={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(t){d(t,"keydown")},h=function(t){d(t,"keyup")},d=function(t,e){if(void 0!==r[e][t.keyCode]){for(var n=r[e][t.keyCode],o=0;o<n.length;o++)void 0===n[o].shift?n[o].fn(t):1==n[o].shift&&1==t.shiftKey?n[o].fn(t):0==n[o].shift&&0==t.shiftKey&&n[o].fn(t);1==i&&t.preventDefault()}};return o.bind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);void 0===r[i][s[t].code]&&(r[i][s[t].code]=[]),r[i][s[t].code].push({fn:e,shift:s[t].shift})},o.bindAll=function(t,e){void 0===e&&(e="keydown");for(var i in s)s.hasOwnProperty(i)&&o.bind(i,t,e)},o.getKey=function(t){for(var e in s)if(s.hasOwnProperty(e)){if(1==t.shiftKey&&1==s[e].shift&&t.keyCode==s[e].code)return e;if(0==t.shiftKey&&0==s[e].shift&&t.keyCode==s[e].code)return e;if(t.keyCode==s[e].code&&"shift"==e)return e}return"unknown key, currently not supported"},o.unbind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);if(void 0!==e){var n=[],o=r[i][s[t].code];if(void 0!==o)for(var a=0;a<o.length;a++)(o[a].fn!=e||o[a].shift!=s[t].shift)&&n.push(r[i][s[t].code][a]);r[i][s[t].code]=n}else r[i][s[t].code]=[]},o.reset=function(){r={keydown:{},keyup:{}}},o.destroy=function(){r={keydown:{},keyup:{}},n.removeEventListener("keydown",a,!0),n.removeEventListener("keyup",h,!0)},n.addEventListener("keydown",a,!0),n.addEventListener("keyup",h,!0),o}return t})},{}],13:[function(e,i,n){!function(e,o){"object"==typeof n&&"undefined"!=typeof i?i.exports=o():"function"==typeof t&&t.amd?t(o):e.moment=o()}(this,function(){"use strict";function t(){return Eo.apply(null,arguments)}function n(t){Eo=t}function o(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function r(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function a(t){return void 0===t}function h(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function d(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function u(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t,e){for(var i in e)l(e,i)&&(t[i]=e[i]);return l(e,"toString")&&(t.toString=e.toString),l(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,i,n){return Ci(t,e,i,n,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(t){return null==t._pf&&(t._pf=m()),t._pf}function g(t){if(null==t._isValid){var e=f(t),i=Po.call(e.parsedDateParts,function(t){return null!=t}),n=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.weekdayMismatch||e.nullInput||e.invalidFormat||e.userInvalidated||!(!e.meridiem||e.meridiem&&i));if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function v(t){var e=p(0/0);return null!=t?c(f(e),t):f(e).userInvalidated=!0,e}function y(t,e){var i,n,o;if(a(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),a(e._i)||(t._i=e._i),a(e._f)||(t._f=e._f),a(e._l)||(t._l=e._l),a(e._strict)||(t._strict=e._strict),a(e._tzm)||(t._tzm=e._tzm),a(e._isUTC)||(t._isUTC=e._isUTC),a(e._offset)||(t._offset=e._offset),a(e._pf)||(t._pf=f(e)),a(e._locale)||(t._locale=e._locale),Io.length>0)for(i=0;i<Io.length;i++)n=Io[i],o=e[n],a(o)||(t[n]=o);return t}function b(e){y(this,e),this._d=new Date(null!=e._d?e._d.getTime():0/0),this.isValid()||(this._d=new Date(0/0)),Ro===!1&&(Ro=!0,t.updateOffset(this),Ro=!1)}function _(t){return t instanceof b||null!=t&&null!=t._isAMomentObject}function w(t){return 0>t?Math.ceil(t)||0:Math.floor(t)}function D(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=w(e)),i}function k(t,e,i){var n,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0;for(n=0;o>n;n++)(i&&t[n]!==e[n]||!i&&D(t[n])!==D(e[n]))&&s++;return s+r}function x(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function T(e,i){var n=!0;return c(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),n){for(var o,r=[],s=0;s<arguments.length;s++){if(o="","object"==typeof arguments[s]){o+="\n["+s+"] ";for(var a in arguments[0])o+=a+": "+arguments[0][a]+", ";o=o.slice(0,-2)}else o=arguments[s];r.push(o)}x(e+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack),n=!1}return i.apply(this,arguments)},i)}function C(e,i){null!=t.deprecationHandler&&t.deprecationHandler(e,i),Ao[e]||(x(i),Ao[e]=!0)}function S(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function M(t){var e,i;for(i in t)e=t[i],S(e)?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function O(t,e){var i,n=c({},t);for(i in e)l(e,i)&&(r(t[i])&&r(e[i])?(n[i]={},c(n[i],t[i]),c(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i]);for(i in t)l(t,i)&&!l(e,i)&&r(t[i])&&(n[i]=c({},n[i]));return n}function E(t){null!=t&&this.set(t)}function P(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return S(n)?n.call(e,i):n}function I(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function R(){return this._invalidDate}function A(t){return this._ordinal.replace("%d",t)}function F(t,e,i,n){var o=this._relativeTime[i];return S(o)?o(t,e,i,n):o.replace(/%d/i,t)}function N(t,e){var i=this._relativeTime[t>0?"future":"past"];return S(i)?i(e):i.replace(/%s/i,e)}function Y(t,e){var i=t.toLowerCase();Bo[i]=Bo[i+"s"]=Bo[e]=t}function L(t){return"string"==typeof t?Bo[t]||Bo[t.toLowerCase()]:void 0}function H(t){var e,i,n={};for(i in t)l(t,i)&&(e=L(i),e&&(n[e]=t[i]));return n}function j(t,e){Go[t]=e}function W(t){var e=[];for(var i in t)e.push({unit:i,priority:Go[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function B(t,e,i){var n=""+Math.abs(t),o=e-n.length,r=t>=0;return(r?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}function G(t,e,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),t&&(qo[t]=o),e&&(qo[e[0]]=function(){return B(o.apply(this,arguments),e[1],e[2])}),i&&(qo[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function U(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function V(t){var e,i,n=t.match(Uo);for(e=0,i=n.length;i>e;e++)n[e]=qo[n[e]]?qo[n[e]]:U(n[e]);return function(e){var o,r="";for(o=0;i>o;o++)r+=S(n[o])?n[o].call(e,t):n[o];return r}}function z(t,e){return t.isValid()?(e=q(e,t.localeData()),zo[e]=zo[e]||V(e),zo[e](t)):t.localeData().invalidDate()}function q(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Vo.lastIndex=0;n>=0&&Vo.test(t);)t=t.replace(Vo,i),Vo.lastIndex=0,n-=1;return t}function X(t,e,i){lr[t]=S(e)?e:function(t){return t&&i?i:e}}function Z(t,e){return l(lr,t)?lr[t](e._strict,e._locale):new RegExp($(t))}function $(t){return J(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o}))}function J(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function K(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),h(e)&&(n=function(t,i){i[e]=D(t)}),i=0;i<t.length;i++)cr[t[i]]=n}function Q(t,e){K(t,function(t,i,n,o){n._w=n._w||{},e(t,n._w,n,o)})}function te(t,e,i){null!=e&&l(cr,t)&&cr[t](e,i._a,i,t)}function ee(t){return ie(t)?366:365}function ie(t){return t%4===0&&t%100!==0||t%400===0}function ne(){return ie(this.year())}function oe(e,i){return function(n){return null!=n?(se(this,e,n),t.updateOffset(this,i),this):re(this,e)}}function re(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():0/0}function se(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&ie(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),ue(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function ae(t){return t=L(t),S(this[t])?this[t]():this}function he(t,e){if("object"==typeof t){t=H(t);for(var i=W(t),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit])}else if(t=L(t),S(this[t]))return this[t](e);return this}function de(t,e){return(t%e+e)%e}function ue(t,e){if(isNaN(t)||isNaN(e))return 0/0;var i=de(e,12);return t+=(e-i)/12,1===i?ie(t)?29:28:31-i%7%2}function le(t,e){return t?o(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||xr).test(e)?"format":"standalone"][t.month()]:o(this._months)?this._months:this._months.standalone}function ce(t,e){return t?o(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[xr.test(e)?"format":"standalone"][t.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function pe(t,e,i){var n,o,r,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;12>n;++n)r=p([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return i?"MMM"===e?(o=Dr.call(this._shortMonthsParse,s),-1!==o?o:null):(o=Dr.call(this._longMonthsParse,s),-1!==o?o:null):"MMM"===e?(o=Dr.call(this._shortMonthsParse,s),-1!==o?o:(o=Dr.call(this._longMonthsParse,s),-1!==o?o:null)):(o=Dr.call(this._longMonthsParse,s),-1!==o?o:(o=Dr.call(this._shortMonthsParse,s),-1!==o?o:null))}function me(t,e,i){var n,o,r;if(this._monthsParseExact)return pe.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(o=p([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function fe(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=D(e);else if(e=t.localeData().monthsParse(e),!h(e))return t;return i=Math.min(t.date(),ue(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function ge(e){return null!=e?(fe(this,e),t.updateOffset(this,!0),this):re(this,"Month")}function ve(){return ue(this.year(),this.month())}function ye(t){return this._monthsParseExact?(l(this,"_monthsRegex")||_e.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Sr),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function be(t){return this._monthsParseExact?(l(this,"_monthsRegex")||_e.call(this),t?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Mr),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function _e(){function t(t,e){return e.length-t.length}var e,i,n=[],o=[],r=[];for(e=0;12>e;e++)i=p([2e3,e]),n.push(this.monthsShort(i,"")),o.push(this.months(i,"")),r.push(this.months(i,"")),r.push(this.monthsShort(i,""));for(n.sort(t),o.sort(t),r.sort(t),e=0;12>e;e++)n[e]=J(n[e]),o[e]=J(o[e]);for(e=0;24>e;e++)r[e]=J(r[e]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function we(t,e,i,n,o,r,s){var a=new Date(t,e,i,n,o,r,s);return 100>t&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function De(t){var e=new Date(Date.UTC.apply(null,arguments));return 100>t&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function ke(t,e,i){var n=7+e-i,o=(7+De(t,0,n).getUTCDay()-e)%7;return-o+n-1}function xe(t,e,i,n,o){var r,s,a=(7+i-n)%7,h=ke(t,n,o),d=1+7*(e-1)+a+h;return 0>=d?(r=t-1,s=ee(r)+d):d>ee(t)?(r=t+1,s=d-ee(t)):(r=t,s=d),{year:r,dayOfYear:s}}function Te(t,e,i){var n,o,r=ke(t.year(),e,i),s=Math.floor((t.dayOfYear()-r-1)/7)+1;return 1>s?(o=t.year()-1,n=s+Ce(o,e,i)):s>Ce(t.year(),e,i)?(n=s-Ce(t.year(),e,i),o=t.year()+1):(o=t.year(),n=s),{week:n,year:o}}function Ce(t,e,i){var n=ke(t,e,i),o=ke(t+1,e,i);return(ee(t)-n+o)/7}function Se(t){return Te(t,this._week.dow,this._week.doy).week}function Me(){return this._week.dow}function Oe(){return this._week.doy}function Ee(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Pe(t){var e=Te(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Ie(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Re(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Ae(t,e){return t?o(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:o(this._weekdays)?this._weekdays:this._weekdays.standalone}function Fe(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Ne(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ye(t,e,i){var n,o,r,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;7>n;++n)r=p([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return i?"dddd"===e?(o=Dr.call(this._weekdaysParse,s),-1!==o?o:null):"ddd"===e?(o=Dr.call(this._shortWeekdaysParse,s),-1!==o?o:null):(o=Dr.call(this._minWeekdaysParse,s),-1!==o?o:null):"dddd"===e?(o=Dr.call(this._weekdaysParse,s),-1!==o?o:(o=Dr.call(this._shortWeekdaysParse,s),-1!==o?o:(o=Dr.call(this._minWeekdaysParse,s),-1!==o?o:null))):"ddd"===e?(o=Dr.call(this._shortWeekdaysParse,s),-1!==o?o:(o=Dr.call(this._weekdaysParse,s),-1!==o?o:(o=Dr.call(this._minWeekdaysParse,s),-1!==o?o:null))):(o=Dr.call(this._minWeekdaysParse,s),-1!==o?o:(o=Dr.call(this._weekdaysParse,s),-1!==o?o:(o=Dr.call(this._shortWeekdaysParse,s),-1!==o?o:null)))}function Le(t,e,i){var n,o,r;if(this._weekdaysParseExact)return Ye.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;7>n;n++){if(o=p([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function He(t){if(!this.isValid())return null!=t?this:0/0;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Ie(t,this.localeData()),this.add(t-e,"d")):e}function je(t){if(!this.isValid())return null!=t?this:0/0;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function We(t){if(!this.isValid())return null!=t?this:0/0;if(null!=t){var e=Re(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Be(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ve.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Rr),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ge(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ve.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ar),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ue(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ve.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Fr),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ve(){function t(t,e){return e.length-t.length}var e,i,n,o,r,s=[],a=[],h=[],d=[];for(e=0;7>e;e++)i=p([2e3,1]).day(e),n=this.weekdaysMin(i,""),o=this.weekdaysShort(i,""),r=this.weekdays(i,""),s.push(n),a.push(o),h.push(r),d.push(n),d.push(o),d.push(r);for(s.sort(t),a.sort(t),h.sort(t),d.sort(t),e=0;7>e;e++)a[e]=J(a[e]),h[e]=J(h[e]),d[e]=J(d[e]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function ze(){return this.hours()%12||12}function qe(){return this.hours()||24}function Xe(t,e){G(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ze(t,e){return e._meridiemParse}function $e(t){return"p"===(t+"").toLowerCase().charAt(0)}function Je(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function Ke(t){return t?t.toLowerCase().replace("_","-"):t}function Qe(t){for(var e,i,n,o,r=0;r<t.length;){for(o=Ke(t[r]).split("-"),e=o.length,i=Ke(t[r+1]),i=i?i.split("-"):null;e>0;){if(n=ti(o.slice(0,e).join("-")))return n;
if(i&&i.length>=e&&k(o,i,!0)>=e-1)break;e--}r++}return Nr}function ti(t){var n=null;if(!jr[t]&&"undefined"!=typeof i&&i&&i.exports)try{n=Nr._abbr;var o=e;o("./locale/"+t),ei(n)}catch(r){}return jr[t]}function ei(t,e){var i;return t&&(i=a(e)?oi(t):ii(t,e),i?Nr=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Nr._abbr}function ii(t,e){if(null!==e){var i,n=Hr;if(e.abbr=t,null!=jr[t])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=jr[t]._config;else if(null!=e.parentLocale)if(null!=jr[e.parentLocale])n=jr[e.parentLocale]._config;else{if(i=ti(e.parentLocale),null==i)return Wr[e.parentLocale]||(Wr[e.parentLocale]=[]),Wr[e.parentLocale].push({name:t,config:e}),null;n=i._config}return jr[t]=new E(O(n,e)),Wr[t]&&Wr[t].forEach(function(t){ii(t.name,t.config)}),ei(t),jr[t]}return delete jr[t],null}function ni(t,e){if(null!=e){var i,n,o=Hr;n=ti(t),null!=n&&(o=n._config),e=O(o,e),i=new E(e),i.parentLocale=jr[t],jr[t]=i,ei(t)}else null!=jr[t]&&(null!=jr[t].parentLocale?jr[t]=jr[t].parentLocale:null!=jr[t]&&delete jr[t]);return jr[t]}function oi(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Nr;if(!o(t)){if(e=ti(t))return e;t=[t]}return Qe(t)}function ri(){return Fo(jr)}function si(t){var e,i=t._a;return i&&-2===f(t).overflow&&(e=i[mr]<0||i[mr]>11?mr:i[fr]<1||i[fr]>ue(i[pr],i[mr])?fr:i[gr]<0||i[gr]>24||24===i[gr]&&(0!==i[vr]||0!==i[yr]||0!==i[br])?gr:i[vr]<0||i[vr]>59?vr:i[yr]<0||i[yr]>59?yr:i[br]<0||i[br]>999?br:-1,f(t)._overflowDayOfYear&&(pr>e||e>fr)&&(e=fr),f(t)._overflowWeeks&&-1===e&&(e=_r),f(t)._overflowWeekday&&-1===e&&(e=wr),f(t).overflow=e),t}function ai(t,e,i){return null!=t?t:null!=e?e:i}function hi(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function di(t){var e,i,n,o,r,s=[];if(!t._d){for(n=hi(t),t._w&&null==t._a[fr]&&null==t._a[mr]&&ui(t),null!=t._dayOfYear&&(r=ai(t._a[pr],n[pr]),(t._dayOfYear>ee(r)||0===t._dayOfYear)&&(f(t)._overflowDayOfYear=!0),i=De(r,0,t._dayOfYear),t._a[mr]=i.getUTCMonth(),t._a[fr]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=s[e]=n[e];for(;7>e;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[gr]&&0===t._a[vr]&&0===t._a[yr]&&0===t._a[br]&&(t._nextDay=!0,t._a[gr]=0),t._d=(t._useUTC?De:we).apply(null,s),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[gr]=24),t._w&&"undefined"!=typeof t._w.d&&t._w.d!==o&&(f(t).weekdayMismatch=!0)}}function ui(t){var e,i,n,o,r,s,a,h;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)r=1,s=4,i=ai(e.GG,t._a[pr],Te(Si(),1,4).year),n=ai(e.W,1),o=ai(e.E,1),(1>o||o>7)&&(h=!0);else{r=t._locale._week.dow,s=t._locale._week.doy;var d=Te(Si(),r,s);i=ai(e.gg,t._a[pr],d.year),n=ai(e.w,d.week),null!=e.d?(o=e.d,(0>o||o>6)&&(h=!0)):null!=e.e?(o=e.e+r,(e.e<0||e.e>6)&&(h=!0)):o=r}1>n||n>Ce(i,r,s)?f(t)._overflowWeeks=!0:null!=h?f(t)._overflowWeekday=!0:(a=xe(i,n,o,r,s),t._a[pr]=a.year,t._dayOfYear=a.dayOfYear)}function li(t){var e,i,n,o,r,s,a=t._i,h=Br.exec(a)||Gr.exec(a);if(h){for(f(t).iso=!0,e=0,i=Vr.length;i>e;e++)if(Vr[e][1].exec(h[1])){o=Vr[e][0],n=Vr[e][2]!==!1;break}if(null==o)return void(t._isValid=!1);if(h[3]){for(e=0,i=zr.length;i>e;e++)if(zr[e][1].exec(h[3])){r=(h[2]||" ")+zr[e][0];break}if(null==r)return void(t._isValid=!1)}if(!n&&null!=r)return void(t._isValid=!1);if(h[4]){if(!Ur.exec(h[4]))return void(t._isValid=!1);s="Z"}t._f=o+(r||"")+(s||""),bi(t)}else t._isValid=!1}function ci(t,e,i,n,o,r){var s=[pi(t),Cr.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(o,10)];return r&&s.push(parseInt(r,10)),s}function pi(t){var e=parseInt(t,10);return 49>=e?2e3+e:999>=e?1900+e:e}function mi(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function fi(t,e,i){if(t){var n=Pr.indexOf(t),o=new Date(e[0],e[1],e[2]).getDay();if(n!==o)return f(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function gi(t,e,i){if(t)return Zr[t];if(e)return 0;var n=parseInt(i,10),o=n%100,r=(n-o)/100;return 60*r+o}function vi(t){var e=Xr.exec(mi(t._i));if(e){var i=ci(e[4],e[3],e[2],e[5],e[6],e[7]);if(!fi(e[1],i,t))return;t._a=i,t._tzm=gi(e[8],e[9],e[10]),t._d=De.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),f(t).rfc2822=!0}else t._isValid=!1}function yi(e){var i=qr.exec(e._i);return null!==i?void(e._d=new Date(+i[1])):(li(e),void(e._isValid===!1&&(delete e._isValid,vi(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e)))))}function bi(e){if(e._f===t.ISO_8601)return void li(e);if(e._f===t.RFC_2822)return void vi(e);e._a=[],f(e).empty=!0;var i,n,o,r,s,a=""+e._i,h=a.length,d=0;for(o=q(e._f,e._locale).match(Uo)||[],i=0;i<o.length;i++)r=o[i],n=(a.match(Z(r,e))||[])[0],n&&(s=a.substr(0,a.indexOf(n)),s.length>0&&f(e).unusedInput.push(s),a=a.slice(a.indexOf(n)+n.length),d+=n.length),qo[r]?(n?f(e).empty=!1:f(e).unusedTokens.push(r),te(r,n,e)):e._strict&&!n&&f(e).unusedTokens.push(r);f(e).charsLeftOver=h-d,a.length>0&&f(e).unusedInput.push(a),e._a[gr]<=12&&f(e).bigHour===!0&&e._a[gr]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[gr]=_i(e._locale,e._a[gr],e._meridiem),di(e),si(e)}function _i(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):e}function wi(t){var e,i,n,o,r;if(0===t._f.length)return f(t).invalidFormat=!0,void(t._d=new Date(0/0));for(o=0;o<t._f.length;o++)r=0,e=y({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],bi(e),g(e)&&(r+=f(e).charsLeftOver,r+=10*f(e).unusedTokens.length,f(e).score=r,(null==n||n>r)&&(n=r,i=e));c(t,i||e)}function Di(t){if(!t._d){var e=H(t._i);t._a=u([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),di(t)}}function ki(t){var e=new b(si(xi(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function xi(t){var e=t._i,i=t._f;return t._locale=t._locale||oi(t._l),null===e||void 0===i&&""===e?v({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),_(e)?new b(si(e)):(d(e)?t._d=e:o(i)?wi(t):i?bi(t):Ti(t),g(t)||(t._d=null),t))}function Ti(e){var i=e._i;a(i)?e._d=new Date(t.now()):d(i)?e._d=new Date(i.valueOf()):"string"==typeof i?yi(e):o(i)?(e._a=u(i.slice(0),function(t){return parseInt(t,10)}),di(e)):r(i)?Di(e):h(i)?e._d=new Date(i):t.createFromInputFallback(e)}function Ci(t,e,i,n,a){var h={};return(i===!0||i===!1)&&(n=i,i=void 0),(r(t)&&s(t)||o(t)&&0===t.length)&&(t=void 0),h._isAMomentObject=!0,h._useUTC=h._isUTC=a,h._l=i,h._i=t,h._f=e,h._strict=n,ki(h)}function Si(t,e,i,n){return Ci(t,e,i,n,!1)}function Mi(t,e){var i,n;if(1===e.length&&o(e[0])&&(e=e[0]),!e.length)return Si();for(i=e[0],n=1;n<e.length;++n)(!e[n].isValid()||e[n][t](i))&&(i=e[n]);return i}function Oi(){var t=[].slice.call(arguments,0);return Mi("isBefore",t)}function Ei(){var t=[].slice.call(arguments,0);return Mi("isAfter",t)}function Pi(t){for(var e in t)if(-1===Dr.call(Qr,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<Qr.length;++n)if(t[Qr[n]]){if(i)return!1;parseFloat(t[Qr[n]])!==D(t[Qr[n]])&&(i=!0)}return!0}function Ii(){return this._isValid}function Ri(){return Ki(0/0)}function Ai(t){var e=H(t),i=e.year||0,n=e.quarter||0,o=e.month||0,r=e.week||0,s=e.day||0,a=e.hour||0,h=e.minute||0,d=e.second||0,u=e.millisecond||0;this._isValid=Pi(e),this._milliseconds=+u+1e3*d+6e4*h+1e3*a*60*60,this._days=+s+7*r,this._months=+o+3*n+12*i,this._data={},this._locale=oi(),this._bubble()}function Fi(t){return t instanceof Ai}function Ni(t){return 0>t?-1*Math.round(-1*t):Math.round(t)}function Yi(t,e){G(t,0,0,function(){var t=this.utcOffset(),i="+";return 0>t&&(t=-t,i="-"),i+B(~~(t/60),2)+e+B(~~t%60,2)})}function Li(t,e){var i=(e||"").match(t);if(null===i)return null;var n=i[i.length-1]||[],o=(n+"").match(ts)||["-",0,0],r=+(60*o[1])+D(o[2]);return 0===r?0:"+"===o[0]?r:-r}function Hi(e,i){var n,o;return i._isUTC?(n=i.clone(),o=(_(e)||d(e)?e.valueOf():Si(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+o),t.updateOffset(n,!1),n):Si(e).local()}function ji(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Wi(e,i,n){var o,r=this._offset||0;if(!this.isValid())return null!=e?this:0/0;if(null!=e){if("string"==typeof e){if(e=Li(hr,e),null===e)return this}else Math.abs(e)<16&&!n&&(e=60*e);return!this._isUTC&&i&&(o=ji(this)),this._offset=e,this._isUTC=!0,null!=o&&this.add(o,"m"),r!==e&&(!i||this._changeInProgress?on(this,Ki(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?r:ji(this)}function Bi(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Gi(t){return this.utcOffset(0,t)}function Ui(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(ji(this),"m")),this}function Vi(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Li(ar,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function zi(t){return this.isValid()?(t=t?Si(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function qi(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Xi(){if(!a(this._isDSTShifted))return this._isDSTShifted;var t={};if(y(t,this),t=xi(t),t._a){var e=t._isUTC?p(t._a):Si(t._a);this._isDSTShifted=this.isValid()&&k(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Zi(){return this.isValid()?!this._isUTC:!1}function $i(){return this.isValid()?this._isUTC:!1}function Ji(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Ki(t,e){var i,n,o,r=t,s=null;return Fi(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:h(t)?(r={},e?r[e]=t:r.milliseconds=t):(s=es.exec(t))?(i="-"===s[1]?-1:1,r={y:0,d:D(s[fr])*i,h:D(s[gr])*i,m:D(s[vr])*i,s:D(s[yr])*i,ms:D(Ni(1e3*s[br]))*i}):(s=is.exec(t))?(i="-"===s[1]?-1:"+"===s[1]?1:1,r={y:Qi(s[2],i),M:Qi(s[3],i),w:Qi(s[4],i),d:Qi(s[5],i),h:Qi(s[6],i),m:Qi(s[7],i),s:Qi(s[8],i)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(o=en(Si(r.from),Si(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),n=new Ai(r),Fi(t)&&l(t,"_locale")&&(n._locale=t._locale),n}function Qi(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function tn(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function en(t,e){var i;return t.isValid()&&e.isValid()?(e=Hi(e,t),t.isBefore(e)?i=tn(t,e):(i=tn(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function nn(t,e){return function(i,n){var o,r;return null===n||isNaN(+n)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=i,i=n,n=r),i="string"==typeof i?+i:i,o=Ki(i,n),on(this,o,t),this}}function on(e,i,n,o){var r=i._milliseconds,s=Ni(i._days),a=Ni(i._months);e.isValid()&&(o=null==o?!0:o,a&&fe(e,re(e,"Month")+a*n),s&&se(e,"Date",re(e,"Date")+s*n),r&&e._d.setTime(e._d.valueOf()+r*n),o&&t.updateOffset(e,s||a))}function rn(t,e){var i=t.diff(e,"days",!0);return-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse"}function sn(e,i){var n=e||Si(),o=Hi(n,this).startOf("day"),r=t.calendarFormat(this,o)||"sameElse",s=i&&(S(i[r])?i[r].call(this,n):i[r]);return this.format(s||this.localeData().calendar(r,this,Si(n)))}function an(){return new b(this)}function hn(t,e){var i=_(t)?t:Si(t);return this.isValid()&&i.isValid()?(e=L(a(e)?"millisecond":e),"millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf()):!1}function dn(t,e){var i=_(t)?t:Si(t);return this.isValid()&&i.isValid()?(e=L(a(e)?"millisecond":e),"millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf()):!1}function un(t,e,i,n){return n=n||"()",("("===n[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))}function ln(t,e){var i,n=_(t)?t:Si(t);return this.isValid()&&n.isValid()?(e=L(e||"millisecond"),"millisecond"===e?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function cn(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function pn(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function mn(t,e,i){var n,o,r;if(!this.isValid())return 0/0;if(n=Hi(t,this),!n.isValid())return 0/0;switch(o=6e4*(n.utcOffset()-this.utcOffset()),e=L(e)){case"year":r=fn(this,n)/12;break;case"month":r=fn(this,n);break;case"quarter":r=fn(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-o)/864e5;break;case"week":r=(this-n-o)/6048e5;break;default:r=this-n}return i?r:w(r)}function fn(t,e){var i,n,o=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(o,"months");return 0>e-r?(i=t.clone().add(o-1,"months"),n=(e-r)/(r-i)):(i=t.clone().add(o+1,"months"),n=(e-r)/(i-r)),-(o+n)||0}function gn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function vn(t){if(!this.isValid())return null;var e=t!==!0,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?z(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):S(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",z(i,"Z")):z(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function yn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o="-MM-DD[T]HH:mm:ss.SSS",r=e+'[")]';return this.format(i+n+o+r)}function bn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=z(this,e);return this.localeData().postformat(i)}function _n(t,e){return this.isValid()&&(_(t)&&t.isValid()||Si(t).isValid())?Ki({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function wn(t){return this.from(Si(),t)}function Dn(t,e){return this.isValid()&&(_(t)&&t.isValid()||Si(t).isValid())?Ki({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function kn(t){return this.to(Si(),t)}function xn(t){var e;return void 0===t?this._locale._abbr:(e=oi(t),null!=e&&(this._locale=e),this)}function Tn(){return this._locale}function Cn(t){switch(t=L(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function Sn(t){return t=L(t),void 0===t||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function Mn(){return this._d.valueOf()-6e4*(this._offset||0)}function On(){return Math.floor(this.valueOf()/1e3)}function En(){return new Date(this.valueOf())}function Pn(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function In(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Rn(){return this.isValid()?this.toISOString():null}function An(){return g(this)}function Fn(){return c({},f(this))}function Nn(){return f(this).overflow}function Yn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ln(t,e){G(0,[t,t.length],0,e)}function Hn(t){return Gn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function jn(t){return Gn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Wn(){return Ce(this.year(),1,4)}function Bn(){var t=this.localeData()._week;return Ce(this.year(),t.dow,t.doy)}function Gn(t,e,i,n,o){var r;return null==t?Te(this,n,o).year:(r=Ce(t,n,o),e>r&&(e=r),Un.call(this,t,e,i,n,o))}function Un(t,e,i,n,o){var r=xe(t,e,i,n,o),s=De(r.year,0,r.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Vn(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function zn(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function qn(t,e){e[br]=D(1e3*("0."+t))}function Xn(){return this._isUTC?"UTC":""}function Zn(){return this._isUTC?"Coordinated Universal Time":""}function $n(t){return Si(1e3*t)}function Jn(){return Si.apply(null,arguments).parseZone()}function Kn(t){return t}function Qn(t,e,i,n){var o=oi(),r=p().set(n,e);return o[i](r,t)}function to(t,e,i){if(h(t)&&(e=t,t=void 0),t=t||"",null!=e)return Qn(t,e,i,"month");var n,o=[];for(n=0;12>n;n++)o[n]=Qn(t,n,i,"month");return o}function eo(t,e,i,n){"boolean"==typeof t?(h(e)&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,h(e)&&(i=e,e=void 0),e=e||"");var o=oi(),r=t?o._week.dow:0;if(null!=i)return Qn(e,(i+r)%7,n,"day");var s,a=[];for(s=0;7>s;s++)a[s]=Qn(e,(s+r)%7,n,"day");return a}function io(t,e){return to(t,e,"months")}function no(t,e){return to(t,e,"monthsShort")}function oo(t,e,i){return eo(t,e,i,"weekdays")}function ro(t,e,i){return eo(t,e,i,"weekdaysShort")}function so(t,e,i){return eo(t,e,i,"weekdaysMin")}function ao(){var t=this._data;return this._milliseconds=ps(this._milliseconds),this._days=ps(this._days),this._months=ps(this._months),t.milliseconds=ps(t.milliseconds),t.seconds=ps(t.seconds),t.minutes=ps(t.minutes),t.hours=ps(t.hours),t.months=ps(t.months),t.years=ps(t.years),this}function ho(t,e,i,n){var o=Ki(e,i);return t._milliseconds+=n*o._milliseconds,t._days+=n*o._days,t._months+=n*o._months,t._bubble()}function uo(t,e){return ho(this,t,e,1)}function lo(t,e){return ho(this,t,e,-1)}function co(t){return 0>t?Math.floor(t):Math.ceil(t)}function po(){var t,e,i,n,o,r=this._milliseconds,s=this._days,a=this._months,h=this._data;return r>=0&&s>=0&&a>=0||0>=r&&0>=s&&0>=a||(r+=864e5*co(fo(a)+s),s=0,a=0),h.milliseconds=r%1e3,t=w(r/1e3),h.seconds=t%60,e=w(t/60),h.minutes=e%60,i=w(e/60),h.hours=i%24,s+=w(i/24),o=w(mo(s)),a+=o,s-=co(fo(o)),n=w(a/12),a%=12,h.days=s,h.months=a,h.years=n,this}function mo(t){return 4800*t/146097}function fo(t){return 146097*t/4800}function go(t){if(!this.isValid())return 0/0;var e,i,n=this._milliseconds;if(t=L(t),"month"===t||"year"===t)return e=this._days+n/864e5,i=this._months+mo(e),"month"===t?i:i/12;switch(e=this._days+Math.round(fo(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function vo(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*D(this._months/12):0/0}function yo(t){return function(){return this.as(t)}}function bo(){return Ki(this)}function _o(t){return t=L(t),this.isValid()?this[t+"s"]():0/0}function wo(t){return function(){return this.isValid()?this._data[t]:0/0}}function Do(){return w(this.days()/7)}function ko(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}function xo(t,e,i){var n=Ki(t).abs(),o=Os(n.as("s")),r=Os(n.as("m")),s=Os(n.as("h")),a=Os(n.as("d")),h=Os(n.as("M")),d=Os(n.as("y")),u=o<=Es.ss&&["s",o]||o<Es.s&&["ss",o]||1>=r&&["m"]||r<Es.m&&["mm",r]||1>=s&&["h"]||s<Es.h&&["hh",s]||1>=a&&["d"]||a<Es.d&&["dd",a]||1>=h&&["M"]||h<Es.M&&["MM",h]||1>=d&&["y"]||["yy",d];return u[2]=e,u[3]=+t>0,u[4]=i,ko.apply(null,u)}function To(t){return void 0===t?Os:"function"==typeof t?(Os=t,!0):!1}function Co(t,e){return void 0===Es[t]?!1:void 0===e?Es[t]:(Es[t]=e,"s"===t&&(Es.ss=e-1),!0)}function So(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=xo(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function Mo(t){return(t>0)-(0>t)||+t}function Oo(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,n=Ps(this._milliseconds)/1e3,o=Ps(this._days),r=Ps(this._months);t=w(n/60),e=w(t/60),n%=60,t%=60,i=w(r/12),r%=12;var s=i,a=r,h=o,d=e,u=t,l=n?n.toFixed(3).replace(/\.?0+$/,""):"",c=this.asSeconds();if(!c)return"P0D";var p=0>c?"-":"",m=Mo(this._months)!==Mo(c)?"-":"",f=Mo(this._days)!==Mo(c)?"-":"",g=Mo(this._milliseconds)!==Mo(c)?"-":"";return p+"P"+(s?m+s+"Y":"")+(a?m+a+"M":"")+(h?f+h+"D":"")+(d||u||l?"T":"")+(d?g+d+"H":"")+(u?g+u+"M":"")+(l?g+l+"S":"")}var Eo,Po;Po=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;i>n;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var Io=t.momentProperties=[],Ro=!1,Ao={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Fo;Fo=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)l(t,e)&&i.push(e);return i};var No={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Yo={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Lo="Invalid date",Ho="%d",jo=/\d{1,2}/,Wo={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Bo={},Go={},Uo=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Vo=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,zo={},qo={},Xo=/\d/,Zo=/\d\d/,$o=/\d{3}/,Jo=/\d{4}/,Ko=/[+-]?\d{6}/,Qo=/\d\d?/,tr=/\d\d\d\d?/,er=/\d\d\d\d\d\d?/,ir=/\d{1,3}/,nr=/\d{1,4}/,or=/[+-]?\d{1,6}/,rr=/\d+/,sr=/[+-]?\d+/,ar=/Z|[+-]\d\d:?\d\d/gi,hr=/Z|[+-]\d\d(?::?\d\d)?/gi,dr=/[+-]?\d+(\.\d{1,3})?/,ur=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,lr={},cr={},pr=0,mr=1,fr=2,gr=3,vr=4,yr=5,br=6,_r=7,wr=8;G("Y",0,0,function(){var t=this.year();return 9999>=t?""+t:"+"+t}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),Y("year","y"),j("year",1),X("Y",sr),X("YY",Qo,Zo),X("YYYY",nr,Jo),X("YYYYY",or,Ko),X("YYYYYY",or,Ko),K(["YYYYY","YYYYYY"],pr),K("YYYY",function(e,i){i[pr]=2===e.length?t.parseTwoDigitYear(e):D(e)}),K("YY",function(e,i){i[pr]=t.parseTwoDigitYear(e)}),K("Y",function(t,e){e[pr]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return D(t)+(D(t)>68?1900:2e3)};var Dr,kr=oe("FullYear",!0);Dr=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),G("MMMM",0,0,function(t){return this.localeData().months(this,t)}),Y("month","M"),j("month",8),X("M",Qo),X("MM",Qo,Zo),X("MMM",function(t,e){return e.monthsShortRegex(t)}),X("MMMM",function(t,e){return e.monthsRegex(t)}),K(["M","MM"],function(t,e){e[mr]=D(t)-1}),K(["MMM","MMMM"],function(t,e,i,n){var o=i._locale.monthsParse(t,n,i._strict);null!=o?e[mr]=o:f(i).invalidMonth=t});var xr=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Tr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Cr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Sr=ur,Mr=ur;G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),Y("week","w"),Y("isoWeek","W"),j("week",5),j("isoWeek",5),X("w",Qo),X("ww",Qo,Zo),X("W",Qo),X("WW",Qo,Zo),Q(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=D(t)});var Or={dow:0,doy:6};G("d",0,"do","day"),G("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),G("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),G("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),Y("day","d"),Y("weekday","e"),Y("isoWeekday","E"),j("day",11),j("weekday",11),j("isoWeekday",11),X("d",Qo),X("e",Qo),X("E",Qo),X("dd",function(t,e){return e.weekdaysMinRegex(t)}),X("ddd",function(t,e){return e.weekdaysShortRegex(t)}),X("dddd",function(t,e){return e.weekdaysRegex(t)}),Q(["dd","ddd","dddd"],function(t,e,i,n){var o=i._locale.weekdaysParse(t,n,i._strict);null!=o?e.d=o:f(i).invalidWeekday=t}),Q(["d","e","E"],function(t,e,i,n){e[n]=D(t)});var Er="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Pr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ir="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Rr=ur,Ar=ur,Fr=ur;G("H",["HH",2],0,"hour"),G("h",["hh",2],0,ze),G("k",["kk",2],0,qe),G("hmm",0,0,function(){return""+ze.apply(this)+B(this.minutes(),2)}),G("hmmss",0,0,function(){return""+ze.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)}),G("Hmm",0,0,function(){return""+this.hours()+B(this.minutes(),2)}),G("Hmmss",0,0,function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)}),Xe("a",!0),Xe("A",!1),Y("hour","h"),j("hour",13),X("a",Ze),X("A",Ze),X("H",Qo),X("h",Qo),X("k",Qo),X("HH",Qo,Zo),X("hh",Qo,Zo),X("kk",Qo,Zo),X("hmm",tr),X("hmmss",er),X("Hmm",tr),X("Hmmss",er),K(["H","HH"],gr),K(["k","kk"],function(t,e){var i=D(t);e[gr]=24===i?0:i}),K(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),K(["h","hh"],function(t,e,i){e[gr]=D(t),f(i).bigHour=!0}),K("hmm",function(t,e,i){var n=t.length-2;e[gr]=D(t.substr(0,n)),e[vr]=D(t.substr(n)),f(i).bigHour=!0}),K("hmmss",function(t,e,i){var n=t.length-4,o=t.length-2;e[gr]=D(t.substr(0,n)),e[vr]=D(t.substr(n,2)),e[yr]=D(t.substr(o)),f(i).bigHour=!0}),K("Hmm",function(t,e){var i=t.length-2;e[gr]=D(t.substr(0,i)),e[vr]=D(t.substr(i))}),K("Hmmss",function(t,e){var i=t.length-4,n=t.length-2;e[gr]=D(t.substr(0,i)),e[vr]=D(t.substr(i,2)),e[yr]=D(t.substr(n))});var Nr,Yr=/[ap]\.?m?\.?/i,Lr=oe("Hours",!0),Hr={calendar:No,longDateFormat:Yo,invalidDate:Lo,ordinal:Ho,dayOfMonthOrdinalParse:jo,relativeTime:Wo,months:Tr,monthsShort:Cr,week:Or,weekdays:Er,weekdaysMin:Ir,weekdaysShort:Pr,meridiemParse:Yr},jr={},Wr={},Br=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Gr=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ur=/Z|[+-]\d\d(?::?\d\d)?/,Vr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],zr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],qr=/^\/?Date\((\-?\d+)/i,Xr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Zr={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=T("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var $r=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Si.apply(null,arguments);return this.isValid()&&t.isValid()?this>t?this:t:v()}),Jr=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Si.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:v()}),Kr=function(){return Date.now?Date.now():+new Date},Qr=["year","quarter","month","week","day","hour","minute","second","millisecond"];Yi("Z",":"),Yi("ZZ",""),X("Z",hr),X("ZZ",hr),K(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Li(hr,t)});var ts=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var es=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,is=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Ki.fn=Ai.prototype,Ki.invalid=Ri;var ns=nn(1,"add"),os=nn(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var rs=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ln("gggg","weekYear"),Ln("ggggg","weekYear"),Ln("GGGG","isoWeekYear"),Ln("GGGGG","isoWeekYear"),Y("weekYear","gg"),Y("isoWeekYear","GG"),j("weekYear",1),j("isoWeekYear",1),X("G",sr),X("g",sr),X("GG",Qo,Zo),X("gg",Qo,Zo),X("GGGG",nr,Jo),X("gggg",nr,Jo),X("GGGGG",or,Ko),X("ggggg",or,Ko),Q(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=D(t)}),Q(["gg","GG"],function(e,i,n,o){i[o]=t.parseTwoDigitYear(e)}),G("Q",0,"Qo","quarter"),Y("quarter","Q"),j("quarter",7),X("Q",Xo),K("Q",function(t,e){e[mr]=3*(D(t)-1)}),G("D",["DD",2],"Do","date"),Y("date","D"),j("date",9),X("D",Qo),X("DD",Qo,Zo),X("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),K(["D","DD"],fr),K("Do",function(t,e){e[fr]=D(t.match(Qo)[0])});var ss=oe("Date",!0);G("DDD",["DDDD",3],"DDDo","dayOfYear"),Y("dayOfYear","DDD"),j("dayOfYear",4),X("DDD",ir),X("DDDD",$o),K(["DDD","DDDD"],function(t,e,i){i._dayOfYear=D(t)}),G("m",["mm",2],0,"minute"),Y("minute","m"),j("minute",14),X("m",Qo),X("mm",Qo,Zo),K(["m","mm"],vr);var as=oe("Minutes",!1);G("s",["ss",2],0,"second"),Y("second","s"),j("second",15),X("s",Qo),X("ss",Qo,Zo),K(["s","ss"],yr);var hs=oe("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),G(0,["SSS",3],0,"millisecond"),G(0,["SSSS",4],0,function(){return 10*this.millisecond()}),G(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),G(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),G(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),G(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),G(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),Y("millisecond","ms"),j("millisecond",16),X("S",ir,Xo),X("SS",ir,Zo),X("SSS",ir,$o);var ds;for(ds="SSSS";ds.length<=9;ds+="S")X(ds,rr);for(ds="S";ds.length<=9;ds+="S")K(ds,qn);var us=oe("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var ls=b.prototype;ls.add=ns,ls.calendar=sn,ls.clone=an,ls.diff=mn,ls.endOf=Sn,ls.format=bn,ls.from=_n,ls.fromNow=wn,ls.to=Dn,ls.toNow=kn,ls.get=ae,ls.invalidAt=Nn,ls.isAfter=hn,ls.isBefore=dn,ls.isBetween=un,ls.isSame=ln,ls.isSameOrAfter=cn,ls.isSameOrBefore=pn,ls.isValid=An,ls.lang=rs,ls.locale=xn,ls.localeData=Tn,ls.max=Jr,ls.min=$r,ls.parsingFlags=Fn,ls.set=he,ls.startOf=Cn,ls.subtract=os,ls.toArray=Pn,ls.toObject=In,ls.toDate=En,ls.toISOString=vn,ls.inspect=yn,ls.toJSON=Rn,ls.toString=gn,ls.unix=On,ls.valueOf=Mn,ls.creationData=Yn,ls.year=kr,ls.isLeapYear=ne,ls.weekYear=Hn,ls.isoWeekYear=jn,ls.quarter=ls.quarters=Vn,ls.month=ge,ls.daysInMonth=ve,ls.week=ls.weeks=Ee,ls.isoWeek=ls.isoWeeks=Pe,ls.weeksInYear=Bn,ls.isoWeeksInYear=Wn,ls.date=ss,ls.day=ls.days=He,ls.weekday=je,ls.isoWeekday=We,ls.dayOfYear=zn,ls.hour=ls.hours=Lr,ls.minute=ls.minutes=as,ls.second=ls.seconds=hs,ls.millisecond=ls.milliseconds=us,ls.utcOffset=Wi,ls.utc=Gi,ls.local=Ui,ls.parseZone=Vi,ls.hasAlignedHourOffset=zi,ls.isDST=qi,ls.isLocal=Zi,ls.isUtcOffset=$i,ls.isUtc=Ji,ls.isUTC=Ji,ls.zoneAbbr=Xn,ls.zoneName=Zn,ls.dates=T("dates accessor is deprecated. Use date instead.",ss),ls.months=T("months accessor is deprecated. Use month instead",ge),ls.years=T("years accessor is deprecated. Use year instead",kr),ls.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Bi),ls.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Xi);
var cs=E.prototype;cs.calendar=P,cs.longDateFormat=I,cs.invalidDate=R,cs.ordinal=A,cs.preparse=Kn,cs.postformat=Kn,cs.relativeTime=F,cs.pastFuture=N,cs.set=M,cs.months=le,cs.monthsShort=ce,cs.monthsParse=me,cs.monthsRegex=be,cs.monthsShortRegex=ye,cs.week=Se,cs.firstDayOfYear=Oe,cs.firstDayOfWeek=Me,cs.weekdays=Ae,cs.weekdaysMin=Ne,cs.weekdaysShort=Fe,cs.weekdaysParse=Le,cs.weekdaysRegex=Be,cs.weekdaysShortRegex=Ge,cs.weekdaysMinRegex=Ue,cs.isPM=$e,cs.meridiem=Je,ei("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===D(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),t.lang=T("moment.lang is deprecated. Use moment.locale instead.",ei),t.langData=T("moment.langData is deprecated. Use moment.localeData instead.",oi);var ps=Math.abs,ms=yo("ms"),fs=yo("s"),gs=yo("m"),vs=yo("h"),ys=yo("d"),bs=yo("w"),_s=yo("M"),ws=yo("y"),Ds=wo("milliseconds"),ks=wo("seconds"),xs=wo("minutes"),Ts=wo("hours"),Cs=wo("days"),Ss=wo("months"),Ms=wo("years"),Os=Math.round,Es={ss:44,s:45,m:45,h:22,d:26,M:11},Ps=Math.abs,Is=Ai.prototype;return Is.isValid=Ii,Is.abs=ao,Is.add=uo,Is.subtract=lo,Is.as=go,Is.asMilliseconds=ms,Is.asSeconds=fs,Is.asMinutes=gs,Is.asHours=vs,Is.asDays=ys,Is.asWeeks=bs,Is.asMonths=_s,Is.asYears=ws,Is.valueOf=vo,Is._bubble=po,Is.clone=bo,Is.get=_o,Is.milliseconds=Ds,Is.seconds=ks,Is.minutes=xs,Is.hours=Ts,Is.days=Cs,Is.weeks=Do,Is.months=Ss,Is.years=Ms,Is.humanize=So,Is.toISOString=Oo,Is.toString=Oo,Is.toJSON=Oo,Is.locale=xn,Is.localeData=Tn,Is.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Oo),Is.lang=rs,G("X",0,0,"unix"),G("x",0,0,"valueOf"),X("x",sr),X("X",dr),K("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),K("x",function(t,e,i){i._d=new Date(D(t))}),t.version="2.22.0",n(Si),t.fn=ls,t.min=Oi,t.max=Ei,t.now=Kr,t.utc=p,t.unix=$n,t.months=io,t.isDate=d,t.locale=ei,t.invalid=v,t.duration=Ki,t.isMoment=_,t.weekdays=oo,t.parseZone=Jn,t.localeData=oi,t.isDuration=Fi,t.monthsShort=no,t.weekdaysMin=so,t.defineLocale=ii,t.updateLocale=ni,t.locales=ri,t.weekdaysShort=ro,t.normalizeUnits=L,t.relativeTimeRounding=To,t.relativeTimeThreshold=Co,t.calendarFormat=rn,t.prototype=ls,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},t})},{}],14:[function(e,i,n){"use strict";!function(e){"function"==typeof t&&t.amd?t([],e):"object"==typeof n?i.exports=e():window.propagating=e()}(function(){var t=null;return function e(i,n){function o(t){return t.match(/[^ ]+/g)}function r(e){if("hammer.input"!==e.type){if(e.srcEvent._handled||(e.srcEvent._handled={}),e.srcEvent._handled[e.type])return;e.srcEvent._handled[e.type]=!0}var i=!1;e.stopPropagation=function(){i=!0};var n=e.srcEvent.stopPropagation.bind(e.srcEvent);"function"==typeof n&&(e.srcEvent.stopPropagation=function(){n(),e.stopPropagation()}),e.firstTarget=t;for(var o=t;o&&!i;){var r=o.hammer;if(r)for(var s,a=0;a<r.length;a++)if(s=r[a]._handlers[e.type])for(var h=0;h<s.length&&!i;h++)s[h](e);o=o.parentNode}}var s=n||{preventDefault:!1};if(i.Manager){var a=i,h=function(t,i){var n=Object.create(s);return i&&a.assign(n,i),e(new a(t,n),n)};return a.assign(h,a),h.Manager=function(t,i){var n=Object.create(s);return i&&a.assign(n,i),e(new a.Manager(t,n),n)},h}var d=Object.create(i),u=i.element;return u.hammer||(u.hammer=[]),u.hammer.push(d),i.on("hammer.input",function(e){(s.preventDefault===!0||s.preventDefault===e.pointerType)&&e.preventDefault(),e.isFirst&&(t=e.target)}),d._handlers={},d.on=function(t,e){return o(t).forEach(function(t){var n=d._handlers[t];n||(d._handlers[t]=n=[],i.on(t,r)),n.push(e)}),d},d.off=function(t,e){return o(t).forEach(function(t){var n=d._handlers[t];n&&(n=e?n.filter(function(t){return t!==e}):[],n.length>0?d._handlers[t]=n:(i.off(t,r),delete d._handlers[t]))}),d},d.emit=function(e,n){t=n.target,i.emit(e,n)},d.destroy=function(){var t=i.element.hammer,e=t.indexOf(d);-1!==e&&t.splice(e,1),t.length||delete i.element.hammer,d._handlers={},i.destroy()},d}})},{}],15:[function(t,e){"use strict";function i(t,e){if(t&&!Array.isArray(t)&&(e=t,t=null),this._options=e||{},this._data={},this.length=0,this._fieldId=this._options.fieldId||"id",this._type={},this._options.type)for(var i in this._options.type)if(this._options.type.hasOwnProperty(i)){var n=this._options.type[i];this._type[i]="Date"==n||"ISODate"==n||"ASPDate"==n?"Date":n}if(this._options.convert)throw new Error('Option "convert" is deprecated. Use "type" instead.');this._subscribers={},t&&this.add(t),this.setOptions(e)}var n=t("./util"),o=t("./Queue");i.prototype.setOptions=function(t){t&&void 0!==t.queue&&(t.queue===!1?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=o.extend(this,{replace:["add","update","remove"]})),"object"==typeof t.queue&&this._queue.setOptions(t.queue)))},i.prototype.on=function(t,e){var i=this._subscribers[t];i||(i=[],this._subscribers[t]=i),i.push({callback:e})},i.prototype.subscribe=function(){throw new Error("DataSet.subscribe is deprecated. Use DataSet.on instead.")},i.prototype.off=function(t,e){var i=this._subscribers[t];i&&(this._subscribers[t]=i.filter(function(t){return t.callback!=e}))},i.prototype.unsubscribe=function(){throw new Error("DataSet.unsubscribe is deprecated. Use DataSet.off instead.")},i.prototype._trigger=function(t,e,i){if("*"==t)throw new Error("Cannot trigger event *");var n=[];t in this._subscribers&&(n=n.concat(this._subscribers[t])),"*"in this._subscribers&&(n=n.concat(this._subscribers["*"]));for(var o=0;o<n.length;o++){var r=n[o];r.callback&&r.callback(t,e,i||null)}},i.prototype.add=function(t,e){var i,n=[],o=this;if(Array.isArray(t))for(var r=0,s=t.length;s>r;r++)i=o._addItem(t[r]),n.push(i);else{if(!(t instanceof Object))throw new Error("Unknown dataType");i=o._addItem(t),n.push(i)}return n.length&&this._trigger("add",{items:n},e),n},i.prototype.update=function(t,e){var i=[],n=[],o=[],r=this,s=r._fieldId,a=function(t){var e=t[s];r._data[e]?(e=r._updateItem(t),n.push(e),o.push(t)):(e=r._addItem(t),i.push(e))};if(Array.isArray(t))for(var h=0,d=t.length;d>h;h++)a(t[h]);else{if(!(t instanceof Object))throw new Error("Unknown dataType");a(t)}return i.length&&this._trigger("add",{items:i},e),n.length&&this._trigger("update",{items:n,data:o},e),i.concat(n)},i.prototype.get=function(){var t,e,i,o=this,r=n.getType(arguments[0]);"String"==r||"Number"==r?(t=arguments[0],i=arguments[1]):"Array"==r?(e=arguments[0],i=arguments[1]):i=arguments[0];var s;if(i&&i.returnType){var a=["Array","Object"];s=-1==a.indexOf(i.returnType)?"Array":i.returnType}else s="Array";var h,d,u,l,c=i&&i.type||this._options.type,p=i&&i.filter,m=[];if(void 0!=t)h=o._getItem(t,c),p&&!p(h)&&(h=null);else if(void 0!=e)for(u=0,l=e.length;l>u;u++)h=o._getItem(e[u],c),(!p||p(h))&&m.push(h);else for(d in this._data)this._data.hasOwnProperty(d)&&(h=o._getItem(d,c),(!p||p(h))&&m.push(h));if(i&&i.order&&void 0==t&&this._sort(m,i.order),i&&i.fields){var f=i.fields;if(void 0!=t)h=this._filterFields(h,f);else for(u=0,l=m.length;l>u;u++)m[u]=this._filterFields(m[u],f)}if("Object"==s){var g={};for(u=0;u<m.length;u++)g[m[u].id]=m[u];return g}return void 0!=t?h:m},i.prototype.getIds=function(t){var e,i,n,o,r,s=this._data,a=t&&t.filter,h=t&&t.order,d=t&&t.type||this._options.type,u=[];if(a)if(h){r=[];for(n in s)s.hasOwnProperty(n)&&(o=this._getItem(n,d),a(o)&&r.push(o));for(this._sort(r,h),e=0,i=r.length;i>e;e++)u[e]=r[e][this._fieldId]}else for(n in s)s.hasOwnProperty(n)&&(o=this._getItem(n,d),a(o)&&u.push(o[this._fieldId]));else if(h){r=[];for(n in s)s.hasOwnProperty(n)&&r.push(s[n]);for(this._sort(r,h),e=0,i=r.length;i>e;e++)u[e]=r[e][this._fieldId]}else for(n in s)s.hasOwnProperty(n)&&(o=s[n],u.push(o[this._fieldId]));return u},i.prototype.getDataSet=function(){return this},i.prototype.forEach=function(t,e){var i,n,o=e&&e.filter,r=e&&e.type||this._options.type,s=this._data;if(e&&e.order)for(var a=this.get(e),h=0,d=a.length;d>h;h++)i=a[h],n=i[this._fieldId],t(i,n);else for(n in s)s.hasOwnProperty(n)&&(i=this._getItem(n,r),(!o||o(i))&&t(i,n))},i.prototype.map=function(t,e){var i,n=e&&e.filter,o=e&&e.type||this._options.type,r=[],s=this._data;for(var a in s)s.hasOwnProperty(a)&&(i=this._getItem(a,o),(!n||n(i))&&r.push(t(i,a)));return e&&e.order&&this._sort(r,e.order),r},i.prototype._filterFields=function(t,e){if(!t)return t;var i={};if(Array.isArray(e))for(var n in t)t.hasOwnProperty(n)&&-1!=e.indexOf(n)&&(i[n]=t[n]);else for(var n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(i[e[n]]=t[n]);return i},i.prototype._sort=function(t,e){if(n.isString(e)){var i=e;t.sort(function(t,e){var n=t[i],o=e[i];return n>o?1:o>n?-1:0})}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");t.sort(e)}},i.prototype.remove=function(t,e){var i,n,o,r=[];if(Array.isArray(t))for(i=0,n=t.length;n>i;i++)o=this._remove(t[i]),null!=o&&r.push(o);else o=this._remove(t),null!=o&&r.push(o);return r.length&&this._trigger("remove",{items:r},e),r},i.prototype._remove=function(t){if(n.isNumber(t)||n.isString(t)){if(this._data[t])return delete this._data[t],this.length--,t}else if(t instanceof Object){var e=t[this._fieldId];if(e&&this._data[e])return delete this._data[e],this.length--,e}return null},i.prototype.clear=function(t){var e=Object.keys(this._data);return this._data={},this.length=0,this._trigger("remove",{items:e},t),e},i.prototype.max=function(t){var e=this._data,i=null,n=null;for(var o in e)if(e.hasOwnProperty(o)){var r=e[o],s=r[t];null!=s&&(!i||s>n)&&(i=r,n=s)}return i},i.prototype.min=function(t){var e=this._data,i=null,n=null;for(var o in e)if(e.hasOwnProperty(o)){var r=e[o],s=r[t];null!=s&&(!i||n>s)&&(i=r,n=s)}return i},i.prototype.distinct=function(t){var e,i=this._data,o=[],r=this._options.type&&this._options.type[t]||null,s=0;for(var a in i)if(i.hasOwnProperty(a)){var h=i[a],d=h[t],u=!1;for(e=0;s>e;e++)if(o[e]==d){u=!0;break}u||void 0===d||(o[s]=d,s++)}if(r)for(e=0;e<o.length;e++)o[e]=n.convert(o[e],r);return o},i.prototype._addItem=function(t){var e=t[this._fieldId];if(void 0!=e){if(this._data[e])throw new Error("Cannot add item: item with id "+e+" already exists")}else e=n.randomUUID(),t[this._fieldId]=e;var i={};for(var o in t)if(t.hasOwnProperty(o)){var r=this._type[o];i[o]=n.convert(t[o],r)}return this._data[e]=i,this.length++,e},i.prototype._getItem=function(t,e){var i,o,r=this._data[t];if(!r)return null;var s={};if(e)for(i in r)r.hasOwnProperty(i)&&(o=r[i],s[i]=n.convert(o,e[i]));else for(i in r)r.hasOwnProperty(i)&&(o=r[i],s[i]=o);return s},i.prototype._updateItem=function(t){var e=t[this._fieldId];if(void 0==e)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(t)+")");var i=this._data[e];if(!i)throw new Error("Cannot update item: no item with id "+e+" found");for(var o in t)if(t.hasOwnProperty(o)){var r=this._type[o];i[o]=n.convert(t[o],r)}return e},e.exports=i},{"./Queue":17,"./util":46}],16:[function(t,e){"use strict";function i(t,e){this._data=null,this._ids={},this.length=0,this._options=e||{},this._fieldId="id",this._subscribers={};var i=this;this.listener=function(){i._onEvent.apply(i,arguments)},this.setData(t)}var n=t("./util"),o=t("./DataSet");i.prototype.setData=function(t){var e,i,n;if(this._data){this._data.off&&this._data.off("*",this.listener),e=[];for(var o in this._ids)this._ids.hasOwnProperty(o)&&e.push(o);this._ids={},this.length=0,this._trigger("remove",{items:e})}if(this._data=t,this._data){for(this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",e=this._data.getIds({filter:this._options&&this._options.filter}),i=0,n=e.length;n>i;i++)o=e[i],this._ids[o]=!0;this.length=e.length,this._trigger("add",{items:e}),this._data.on&&this._data.on("*",this.listener)}},i.prototype.refresh=function(){for(var t,e=this._data.getIds({filter:this._options&&this._options.filter}),i={},n=[],o=[],r=0;r<e.length;r++)t=e[r],i[t]=!0,this._ids[t]||(n.push(t),this._ids[t]=!0,this.length++);for(t in this._ids)this._ids.hasOwnProperty(t)&&(i[t]||(o.push(t),delete this._ids[t],this.length--));n.length&&this._trigger("add",{items:n}),o.length&&this._trigger("remove",{items:o})},i.prototype.get=function(){var t,e,i,o=this,r=n.getType(arguments[0]);"String"==r||"Number"==r||"Array"==r?(t=arguments[0],e=arguments[1],i=arguments[2]):(e=arguments[0],i=arguments[1]);var s=n.extend({},this._options,e);this._options.filter&&e&&e.filter&&(s.filter=function(t){return o._options.filter(t)&&e.filter(t)});var a=[];return void 0!=t&&a.push(t),a.push(s),a.push(i),this._data&&this._data.get.apply(this._data,a)},i.prototype.getIds=function(t){var e;if(this._data){var i,n=this._options.filter;i=t&&t.filter?n?function(e){return n(e)&&t.filter(e)}:t.filter:n,e=this._data.getIds({filter:i,order:t&&t.order})}else e=[];return e},i.prototype.getDataSet=function(){for(var t=this;t instanceof i;)t=t._data;return t||null},i.prototype._onEvent=function(t,e,i){var n,o,r,s,a=e&&e.items,h=this._data,d=[],u=[],l=[],c=[];if(a&&h){switch(t){case"add":for(n=0,o=a.length;o>n;n++)r=a[n],s=this.get(r),s&&(this._ids[r]=!0,u.push(r));break;case"update":for(n=0,o=a.length;o>n;n++)r=a[n],s=this.get(r),s?this._ids[r]?(l.push(r),d.push(e.data[n])):(this._ids[r]=!0,u.push(r)):this._ids[r]&&(delete this._ids[r],c.push(r));break;case"remove":for(n=0,o=a.length;o>n;n++)r=a[n],this._ids[r]&&(delete this._ids[r],c.push(r))}this.length+=u.length-c.length,u.length&&this._trigger("add",{items:u},i),l.length&&this._trigger("update",{items:l,data:d},i),c.length&&this._trigger("remove",{items:c},i)}},i.prototype.on=o.prototype.on,i.prototype.off=o.prototype.off,i.prototype._trigger=o.prototype._trigger,i.prototype.subscribe=i.prototype.on,i.prototype.unsubscribe=i.prototype.off,e.exports=i},{"./DataSet":15,"./util":46}],17:[function(t,e){"use strict";function i(t){this.delay=null,this.max=1/0,this._queue=[],this._timeout=null,this._extended=null,this.setOptions(t)}i.prototype.setOptions=function(t){t&&"undefined"!=typeof t.delay&&(this.delay=t.delay),t&&"undefined"!=typeof t.max&&(this.max=t.max),this._flushIfNeeded()},i.extend=function(t,e){var n=new i(e);if(void 0!==t.flush)throw new Error("Target object already has a property flush");t.flush=function(){n.flush()};var o=[{name:"flush",original:void 0}];if(e&&e.replace)for(var r=0;r<e.replace.length;r++){var s=e.replace[r];o.push({name:s,original:t[s]}),n.replace(t,s)}return n._extended={object:t,methods:o},n},i.prototype.destroy=function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,i=0;i<e.length;i++){var n=e[i];n.original?t[n.name]=n.original:delete t[n.name]}this._extended=null}},i.prototype.replace=function(t,e){var i=this,n=t[e];if(!n)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.queue({args:t,fn:n,context:this})}},i.prototype.queue=function(t){this._queue.push("function"==typeof t?{fn:t}:t),this._flushIfNeeded()},i.prototype._flushIfNeeded=function(){if(this._queue.length>this.max&&this.flush(),clearTimeout(this._timeout),this.queue.length>0&&"number"==typeof this.delay){var t=this;this._timeout=setTimeout(function(){t.flush()},this.delay)}},i.prototype.flush=function(){for(;this._queue.length>0;){var t=this._queue.shift();t.fn.apply(t.context||t.fn,t.args||[])}},e.exports=i},{}],18:[function(t,e,i){"use strict";t("./module/hammer");i.onTouch=function(t,e){e.inputHandler=function(t){t.isFirst&&!n&&(e(t),n=!0,setTimeout(function(){n=!1},0))},t.on("hammer.input",e.inputHandler)};var n=!1;i.onRelease=function(t,e){return e.inputHandler=function(t){t.isFinal&&!o&&(e(t),o=!0,setTimeout(function(){o=!1},0))},t.on("hammer.input",e.inputHandler)};var o=!1;i.offTouch=function(t,e){t.off("hammer.input",e.inputHandler)},i.offRelease=i.offTouch},{"./module/hammer":19}],19:[function(t,e){"use strict";if("undefined"!=typeof window){var i=t("propagating-hammerjs"),n=window.Hammer||t("hammerjs");e.exports=i(n,{preventDefault:"mouse"})}else e.exports=function(){throw Error("hammer.js is only available in a browser, not in node.js.")}},{hammerjs:11,"propagating-hammerjs":14}],20:[function(t,e){"use strict";e.exports="undefined"!=typeof window&&window.moment||t("moment")},{moment:13}],21:[function(t,e){(function(t){"use strict";function i(t,e,i){var n=e&&i||0,o=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>o&&(e[n+o++]=l[t])});16>o;)e[n+o++]=0;return e}function n(t,e){var i=e||0,n=u;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}function o(t,e,i){var o=e&&i||0,r=e||[];t=t||{};var s=void 0!==t.clockseq?t.clockseq:f,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:v+1,d=a-g+(h-v)/1e4;if(0>d&&void 0===t.clockseq&&(s=s+1&16383),(0>d||a>g)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=a,v=h,f=s,a+=122192928e5;var u=(1e4*(268435455&a)+h)%4294967296;r[o++]=u>>>24&255,r[o++]=u>>>16&255,r[o++]=u>>>8&255,r[o++]=255&u;var l=a/4294967296*1e4&268435455;r[o++]=l>>>8&255,r[o++]=255&l,r[o++]=l>>>24&15|16,r[o++]=l>>>16&255,r[o++]=s>>>8|128,r[o++]=255&s;for(var c=t.node||m,p=0;6>p;p++)r[o+p]=c[p];return e?e:n(r)}function r(t,e,i){var o=e&&i||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var r=t.random||(t.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var a=0;16>a;a++)e[o+a]=r[a];return e||n(r)}var s,a="undefined"!=typeof window?window:"undefined"!=typeof t?t:null;if(a&&a.crypto&&crypto.getRandomValues){var h=new Uint8Array(16);s=function(){return crypto.getRandomValues(h),h}}if(!s){var d=new Array(16);s=function(){for(var t,e=0;16>e;e++)0===(3&e)&&(t=4294967296*Math.random()),d[e]=t>>>((3&e)<<3)&255;return d}}for(var u=[],l={},c=0;256>c;c++)u[c]=(c+256).toString(16).substr(1),l[u[c]]=c;var p=s(),m=[1|p[0],p[1],p[2],p[3],p[4],p[5]],f=16383&(p[6]<<8|p[7]),g=0,v=0,y=r;y.v1=o,y.v4=r,y.parse=i,y.unparse=n,e.exports=y}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(t,e){"use strict";function i(t){this.active=!1,this.dom={container:t},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=s(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var e=this,i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];i.forEach(function(t){e.hammer.on(t,function(t){t.stopPropagation()})}),document&&document.body&&(this.onClick=function(i){n(i.target,t)||e.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=o(),this.escListener=this.deactivate.bind(this)}function n(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}var o=t("keycharm"),r=t("emitter-component"),s=t("../module/hammer"),a=t("../util");r(i.prototype),i.current=null,i.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.hammer.destroy(),this.hammer=null},i.prototype.activate=function(){i.current&&i.current.deactivate(),i.current=this,this.active=!0,this.dom.overlay.style.display="none",a.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},i.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",a.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},i.prototype._onTapOverlay=function(t){this.activate(),t.stopPropagation()},e.exports=i},{"../module/hammer":19,"../util":46,"emitter-component":10,keycharm:12}],23:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../module/hammer"),s=t("../hammerUtil"),a=t("../util"),h=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0];n(this,t),this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this._create()}return o(t,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker callback is not a function.");this.updateCallback=t}},{key:"_isColorString",value:function(t){var e={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};return"string"==typeof t?e[t]:void 0}},{key:"setColor",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];if("none"!==t){var i=void 0,n=this._isColorString(t);if(void 0!==n&&(t=n),a.isString(t)===!0){if(a.isValidRGB(t)===!0){var o=t.substr(4).substr(0,t.length-5).split(",");i={r:o[0],g:o[1],b:o[2],a:1}}else if(a.isValidRGBA(t)===!0){var o=t.substr(5).substr(0,t.length-6).split(",");i={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(a.isValidHex(t)===!0){var r=a.hexToRGB(t);i={r:r.r,g:r.g,b:r.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var s=void 0!==t.a?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a:s}}if(void 0===i)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(t));this._setColor(i,e)}}},{key:"show",value:function(t,e){this.applied=!1,this.frame.style.display="block",this.frame.style.top=e+"px",this.frame.style.left=t+"px",this._generateHueCircle()}},{key:"_hide",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];t===!0&&(this.previousColor=a.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none"}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];e===!0&&(this.initialColor=a.extend({},t)),this.color=t;var i=a.RGBToHSV(t.r,t.g,t.b),n=2*Math.PI,o=this.r*i.s,r=this.centerCoordinates.x+o*Math.sin(n*i.h),s=this.centerCoordinates.y+o*Math.cos(n*i.h);this.colorPickerSelector.style.left=r-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=s-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var e=a.RGBToHSV(this.color.r,this.color.g,this.color.b);e.v=t/100;var i=a.HSVToRGB(e.h,e.s,e.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length<=0||void 0===arguments[0]?this.color:arguments[0],e=a.RGBToHSV(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,n,o),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-e.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),i.fill(),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(e)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(i){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(i){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var n=this;this.opacityRange.onchange=function(){n._setOpacity(this.value)},this.opacityRange.oninput=function(){n._setOpacity(this.value)},this.brightnessRange.onchange=function(){n._setBrightness(this.value)},this.brightnessRange.oninput=function(){n._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new r(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),s.onTouch(this.hammer,function(e){t._moveSelector(e)}),this.hammer.on("tap",function(e){t._moveSelector(e)
}),this.hammer.on("panstart",function(e){t._moveSelector(e)}),this.hammer.on("panmove",function(e){t._moveSelector(e)}),this.hammer.on("panend",function(e){t._moveSelector(e)})}},{key:"_generateHueCircle",value:function(){if(this.generated===!1){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,e,i);var n=void 0,o=void 0,r=void 0,s=void 0;this.centerCoordinates={x:.5*e,y:.5*i},this.r=.49*e;var h=2*Math.PI/360,d=1/360,u=1/this.r,l=void 0;for(r=0;360>r;r++)for(s=0;s<this.r;s++)n=this.centerCoordinates.x+s*Math.sin(h*r),o=this.centerCoordinates.y+s*Math.cos(h*r),l=a.HSVToRGB(r*d,s*u,1),t.fillStyle="rgb("+l.r+","+l.g+","+l.b+")",t.fillRect(n-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,e,i)}this.generated=!0}},{key:"_moveSelector",value:function(t){var e=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-e.left,n=t.center.y-e.top,o=.5*this.colorPickerDiv.clientHeight,r=.5*this.colorPickerDiv.clientWidth,s=i-r,h=n-o,d=Math.atan2(s,h),u=.98*Math.min(Math.sqrt(s*s+h*h),r),l=Math.cos(d)*u+o,c=Math.sin(d)*u+r;this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=c-.5*this.colorPickerSelector.clientWidth+"px";var p=d/(2*Math.PI);p=0>p?p+1:p;var m=u/this.r,f=a.RGBToHSV(this.color.r,this.color.g,this.color.b);f.h=p,f.s=m;var g=a.HSVToRGB(f.h,f.s,f.v);g.a=this.color.a,this.color=g,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}();i["default"]=h,e.exports=i["default"]},{"../hammerUtil":18,"../module/hammer":19,"../util":46}],24:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("./ColorPicker"),a=n(s),h=t("../util"),d=function(){function t(e,i,n){var r=arguments.length<=3||void 0===arguments[3]?1:arguments[3];o(this,t),this.parent=e,this.changedOptions=[],this.container=i,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},h.extend(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new a["default"](r),this.wrapper=void 0}return r(t,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var e=!0;"string"==typeof t?this.options.filter=t:t instanceof Array?this.options.filter=t.join():"object"==typeof t?(void 0!==t.container&&(this.options.container=t.container),void 0!==t.filter&&(this.options.filter=t.filter),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)):"boolean"==typeof t?(this.options.filter=!0,e=t):"function"==typeof t&&(this.options.filter=t,e=!0),this.options.filter===!1&&(e=!1),this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,this.options.enabled===!0&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){var t=this;this._clean(),this.changedOptions=[];var e=this.options.filter,i=0,n=!1;for(var o in this.configureOptions)this.configureOptions.hasOwnProperty(o)&&(this.allowCreation=!1,n=!1,"function"==typeof e?(n=e(o,[]),n=n||this._handleObject(this.configureOptions[o],[o],!0)):(e===!0||-1!==e.indexOf(o))&&(n=!0),n!==!1&&(this.allowCreation=!0,i>0&&this._makeItem([]),this._makeHeader(o),this._handleObject(this.configureOptions[o],[o])),i++);this.options.showButton===!0&&!function(){var e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=function(){t._printOptions()},e.onmouseover=function(){e.className="vis-configuration vis-config-button hover"},e.onmouseout=function(){e.className="vis-configuration vis-config-button"},t.optionsContainer=document.createElement("div"),t.optionsContainer.className="vis-configuration vis-config-option-container",t.domElements.push(t.optionsContainer),t.domElements.push(e)}(),this._push(),this.colorPicker.insertTo(this.container)}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var e=this.moduleOptions,i=0;i<t.length;i++){if(void 0===e[t[i]]){e=void 0;break}e=e[t[i]]}return e}},{key:"_makeItem",value:function(t){var e=arguments,i=this;if(this.allowCreation===!0){var n,o,r,s=function(){var s=document.createElement("div");for(s.className="vis-configuration vis-config-item vis-config-s"+t.length,n=e.length,o=Array(n>1?n-1:0),r=1;n>r;r++)o[r-1]=e[r];return o.forEach(function(t){s.appendChild(t)}),i.domElements.push(s),{v:i.domElements.length}}();if("object"==typeof s)return s.v}return 0}},{key:"_makeHeader",value:function(t){var e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerHTML=t,this._makeItem([],e)}},{key:"_makeLabel",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=document.createElement("div");return n.className="vis-configuration vis-config-label vis-config-s"+e.length,n.innerHTML=i===!0?"<i><b>"+t+":</b></i>":t+":",n}},{key:"_makeDropdown",value:function(t,e,i){var n=document.createElement("select");n.className="vis-configuration vis-config-select";var o=0;void 0!==e&&-1!==t.indexOf(e)&&(o=t.indexOf(e));for(var r=0;r<t.length;r++){var s=document.createElement("option");s.value=t[r],r===o&&(s.selected="selected"),s.innerHTML=t[r],n.appendChild(s)}var a=this;n.onchange=function(){a._update(this.value,i)};var h=this._makeLabel(i[i.length-1],i);this._makeItem(i,h,n)}},{key:"_makeRange",value:function(t,e,i){var n=t[0],o=t[1],r=t[2],s=t[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=o,a.max=r}catch(h){}a.step=s;var d="",u=0;if(void 0!==e){var l=1.2;0>e&&o>e*l?(a.min=Math.ceil(e*l),u=a.min,d="range increased"):o>e/l&&(a.min=Math.ceil(e/l),u=a.min,d="range increased"),e*l>r&&1!==r&&(a.max=Math.ceil(e*l),u=a.max,d="range increased"),a.value=e}else a.value=n;var c=document.createElement("input");c.className="vis-configuration vis-config-rangeinput",c.value=a.value;var p=this;a.onchange=function(){c.value=this.value,p._update(Number(this.value),i)},a.oninput=function(){c.value=this.value};var m=this._makeLabel(i[i.length-1],i),f=this._makeItem(i,m,a,c);""!==d&&this.popupHistory[f]!==u&&(this.popupHistory[f]=u,this._setupPopup(d,f))}},{key:"_setupPopup",value:function(t,e){var i=this;if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){var n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=t,n.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index],i=e.getBoundingClientRect();this.popupDiv.html.style.left=i.left+"px",this.popupDiv.html.style.top=i.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,e,i){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=t,void 0!==e&&(n.checked=e,e!==t&&("object"==typeof t?e!==t.enabled&&this.changedOptions.push({path:i,value:e}):this.changedOptions.push({path:i,value:e})));var o=this;n.onchange=function(){o._update(this.checked,i)};var r=this._makeLabel(i[i.length-1],i);this._makeItem(i,r,n)}},{key:"_makeTextInput",value:function(t,e,i){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=e,e!==t&&this.changedOptions.push({path:i,value:e});var o=this;n.onchange=function(){o._update(this.value,i)};var r=this._makeLabel(i[i.length-1],i);this._makeItem(i,r,n)}},{key:"_makeColorField",value:function(t,e,i){var n=this,o=t[1],r=document.createElement("div");e=void 0===e?o:e,"none"!==e?(r.className="vis-configuration vis-config-colorBlock",r.style.backgroundColor=e):r.className="vis-configuration vis-config-colorBlock none",e=void 0===e?o:e,r.onclick=function(){n._showColorPicker(e,r,i)};var s=this._makeLabel(i[i.length-1],i);this._makeItem(i,s,r)}},{key:"_showColorPicker",value:function(t,e,i){var n=this,o=e.getBoundingClientRect(),r=document.body.getBoundingClientRect(),s=o.left+o.width+5,a=o.top-r.top+o.height+2;this.colorPicker.show(s,a),this.colorPicker.setColor(t),this.colorPicker.setCallback(function(t){var o="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";e.style.backgroundColor=o,n._update(o,i)})}},{key:"_handleObject",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],n=!1,o=this.options.filter,r=!1;for(var s in t)if(t.hasOwnProperty(s)){n=!0;var a=t[s],d=h.copyAndExtendArray(e,s);if("function"==typeof o&&(n=o(s,e),n===!1&&!(a instanceof Array)&&"string"!=typeof a&&"boolean"!=typeof a&&a instanceof Object&&(this.allowCreation=!1,n=this._handleObject(a,d,!0),this.allowCreation=i===!1)),n!==!1){r=!0;var u=this._getValue(d);if(a instanceof Array)this._handleArray(a,u,d);else if("string"==typeof a)this._makeTextInput(a,u,d);else if("boolean"==typeof a)this._makeCheckbox(a,u,d);else if(a instanceof Object){var l=!0;if(-1!==e.indexOf("physics")&&this.moduleOptions.physics.solver!==s&&(l=!1),l===!0)if(void 0!==a.enabled){var c=h.copyAndExtendArray(d,"enabled"),p=this._getValue(c);if(p===!0){var m=this._makeLabel(s,d,!0);this._makeItem(d,m),r=this._handleObject(a,d)||r}else this._makeCheckbox(a,p,d)}else{var m=this._makeLabel(s,d,!0);this._makeItem(d,m),r=this._handleObject(a,d)||r}}else console.error("dont know how to handle",a,s,d)}}return r}},{key:"_handleArray",value:function(t,e,i){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,i),t[1]!==e&&this.changedOptions.push({path:i,value:e})):"string"==typeof t[0]?(this._makeDropdown(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:e})):"number"==typeof t[0]&&(this._makeRange(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:Number(e)}))}},{key:"_update",value:function(t,e){var i=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=i;t="true"===t?!0:t,t="false"===t?!1:t;for(var o=0;o<e.length;o++)"global"!==e[o]&&(void 0===n[e[o]]&&(n[e[o]]={}),o!==e.length-1?n=n[e[o]]:n[e[o]]=t);return i}},{key:"_printOptions",value:function(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(t,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var t={},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}]),t}();i["default"]=d,e.exports=i["default"]},{"../util":46,"./ColorPicker":23}],25:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../util"),s=!1,a=void 0,h="background: #FFeeee; color: #dd0000",d=function(){function t(){n(this,t)}return o(t,null,[{key:"validate",value:function(e,i,n){s=!1,a=i;var o=i;return void 0!==n&&(o=i[n]),t.parse(e,o,[]),s}},{key:"parse",value:function(e,i,n){for(var o in e)e.hasOwnProperty(o)&&t.check(o,e,i,n)}},{key:"check",value:function(e,i,n,o){void 0===n[e]&&void 0===n.__any__?t.getSuggestion(e,n,o):void 0===n[e]&&void 0!==n.__any__?"object"===t.getType(i[e])&&void 0!==n.__any__.__type__?t.checkFields(e,i,n,"__any__",n.__any__.__type__,o):t.checkFields(e,i,n,"__any__",n.__any__,o):void 0!==n[e].__type__?t.checkFields(e,i,n,e,n[e].__type__,o):t.checkFields(e,i,n,e,n[e],o)}},{key:"checkFields",value:function(e,i,n,o,a,d){var u=t.getType(i[e]),l=a[u];void 0!==l?"array"===t.getType(l)&&-1===l.indexOf(i[e])?(console.log('%cInvalid option detected in "'+e+'". Allowed values are:'+t.print(l)+' not "'+i[e]+'". '+t.printLocation(d,e),h),s=!0):"object"===u&&"__any__"!==o&&(d=r.copyAndExtendArray(d,e),t.parse(i[e],n[o],d)):void 0===a.any&&(console.log('%cInvalid type received for "'+e+'". Expected: '+t.print(Object.keys(a))+". Received ["+u+'] "'+i[e]+'"'+t.printLocation(d,e),h),s=!0)}},{key:"getType",value:function(t){var e=typeof t;return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Array.isArray(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":t._isAMomentObject===!0?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(e,i,n){var o=t.findInOptions(e,i,n,!1),r=t.findInOptions(e,a,[],!0),d=8,u=4;void 0!==o.indexMatch?console.log('%cUnknown option detected: "'+e+'" in '+t.printLocation(o.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+o.indexMatch+'"?\n\n',h):r.distance<=u&&o.distance>r.distance?console.log('%cUnknown option detected: "'+e+'" in '+t.printLocation(o.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(r.path,r.closestMatch,""),h):o.distance<=d?console.log('%cUnknown option detected: "'+e+'". Did you mean "'+o.closestMatch+'"?'+t.printLocation(o.path,e),h):console.log('%cUnknown option detected: "'+e+'". Did you mean one of these: '+t.print(Object.keys(i))+t.printLocation(n,e),h),s=!0}},{key:"findInOptions",value:function(e,i,n){var o=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],s=1e9,a="",h=[],d=e.toLowerCase(),u=void 0;for(var l in i){var c=void 0;if(void 0!==i[l].__type__&&o===!0){var p=t.findInOptions(e,i[l],r.copyAndExtendArray(n,l));s>p.distance&&(a=p.closestMatch,h=p.path,s=p.distance,u=p.indexMatch)}else-1!==l.toLowerCase().indexOf(d)&&(u=l),c=t.levenshteinDistance(e,l),s>c&&(a=l,h=r.copyArray(n),s=c)}return{closestMatch:a,path:h,distance:s,indexMatch:u}}},{key:"printLocation",value:function(t,e){for(var i=arguments.length<=2||void 0===arguments[2]?"Problem value found at: \n":arguments[2],n="\n\n"+i+"options = {\n",o=0;o<t.length;o++){for(var r=0;o+1>r;r++)n+="  ";n+=t[o]+": {\n"}for(var r=0;r<t.length+1;r++)n+="  ";n+=e+"\n";for(var o=0;o<t.length+1;o++){for(var r=0;r<t.length-o;r++)n+="  ";n+="}\n"}return n+"\n\n"}},{key:"print",value:function(t){return JSON.stringify(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var i,n=[];for(i=0;i<=e.length;i++)n[i]=[i];var o;for(o=0;o<=t.length;o++)n[0][o]=o;for(i=1;i<=e.length;i++)for(o=1;o<=t.length;o++)n[i][o]=e.charAt(i-1)==t.charAt(o-1)?n[i-1][o-1]:Math.min(n[i-1][o-1]+1,Math.min(n[i][o-1]+1,n[i-1][o]+1));return n[e.length][t.length]}}]),t}();i["default"]=d,i.printStyle=h},{"../util":46}],26:[function(t,e){"use strict";function i(){}var n=t("emitter-component"),o=t("../module/hammer"),r=t("../hammerUtil"),s=t("../util"),a=(t("../DataSet"),t("../DataView"),t("./Range"),t("./component/ItemSet"),t("./component/TimeAxis")),h=t("../shared/Activator"),d=t("./DateUtil"),u=t("./component/CustomTime");n(i.prototype),i.prototype._create=function(t){function e(t){i.isActive()&&i.emit("mousewheel",t)}this.dom={},this.dom.container=t,this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.on("rangechange",function(){this._redraw()}.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("pan",this._onDrag.bind(this));var i=this;this.on("change",function(t){t&&1==t.queue?i._redrawTimer||(i._redrawTimer=setTimeout(function(){i._redrawTimer=null,i._redraw()},0)):i._redraw()}),this.hammer=new o(this.dom.root),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:30}),this.listeners={};var n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];if(n.forEach(function(t){var e=function(e){i.isActive()&&i.emit(t,e)};i.hammer.on(t,e),i.listeners[t]=e}),r.onTouch(this.hammer,function(t){i.emit("touch",t)}.bind(this)),r.onRelease(this.hammer,function(t){i.emit("release",t)}.bind(this)),this.dom.root.addEventListener("mousewheel",e),this.dom.root.addEventListener("DOMMouseScroll",e),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.customTimes=[],this.touch={},this.redrawCount=0,!t)throw new Error("No container provided");t.appendChild(this.dom.root)},i.prototype.setOptions=function(t){if(t){var e=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","throttleRedraw"];if(s.selectiveExtend(e,this.options,t),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation={item:t.orientation,axis:t.orientation}:"object"==typeof t.orientation&&("item"in t.orientation&&(this.options.orientation.item=t.orientation.item),"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis))),"both"===this.options.orientation.axis){if(!this.timeAxis2){var i=this.timeAxis2=new a(this.body);i.setOptions=function(t){var e=t?s.extend({},t):{};e.orientation="top",a.prototype.setOptions.call(i,e)},this.components.push(i)}}else if(this.timeAxis2){var n=this.components.indexOf(this.timeAxis2);-1!==n&&this.components.splice(n,1),this.timeAxis2.destroy(),this.timeAxis2=null}if("function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),"hiddenDates"in this.options&&d.convertHiddenOptions(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in t&&(t.clickToUse?this.activator||(this.activator=new h(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),"showCustomTime"in t)throw new Error("Option `showCustomTime` is deprecated. Create a custom time bar via timeline.addCustomTime(time [, id])");this._initAutoResize()}if(this.components.forEach(function(e){return e.setOptions(t)}),"configure"in t){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(t.configure);var o=s.deepExtend({},this.options);this.components.forEach(function(t){s.deepExtend(o,t.options)}),this.configurator.setModuleOptions({global:o})}this._origRedraw||(this._origRedraw=this._redraw.bind(this)),this._redraw=s.throttle(this._origRedraw,this.options.throttleRedraw),this._redraw()},i.prototype.isActive=function(){return!this.activator||this.activator.active},i.prototype.destroy=function(){this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(var t in this.listeners)this.listeners.hasOwnProperty(t)&&delete this.listeners[t];this.listeners=null,this.hammer=null,this.components.forEach(function(t){return t.destroy()}),this.body=null},i.prototype.setCustomTime=function(t,e){var i=this.customTimes.filter(function(t){return e===t.options.id});if(0===i.length)throw new Error("No custom time bar found with id "+JSON.stringify(e));i.length>0&&i[0].setCustomTime(t)},i.prototype.getCustomTime=function(t){var e=this.customTimes.filter(function(e){return e.options.id===t});if(0===e.length)throw new Error("No custom time bar found with id "+JSON.stringify(t));return e[0].getCustomTime()},i.prototype.setCustomTimeTitle=function(t,e){var i=this.customTimes.filter(function(t){return t.options.id===e});if(0===i.length)throw new Error("No custom time bar found with id "+JSON.stringify(e));return i.length>0?i[0].setCustomTitle(t):void 0},i.prototype.getEventProperties=function(t){return{event:t}},i.prototype.addCustomTime=function(t,e){var i=void 0!==t?s.convert(t,"Date").valueOf():new Date,n=this.customTimes.some(function(t){return t.options.id===e});if(n)throw new Error("A custom time with id "+JSON.stringify(e)+" already exists");var o=new u(this.body,s.extend({},this.options,{time:i,id:e}));return this.customTimes.push(o),this.components.push(o),this._redraw(),e},i.prototype.removeCustomTime=function(t){var e=this.customTimes.filter(function(e){return e.options.id===t});if(0===e.length)throw new Error("No custom time bar found with id "+JSON.stringify(t));e.forEach(function(t){this.customTimes.splice(this.customTimes.indexOf(t),1),this.components.splice(this.components.indexOf(t),1),t.destroy()}.bind(this))},i.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]},i.prototype.fit=function(t){var e=this.getDataRange();if(null!==e.min||null!==e.max){var i=e.max-e.min,n=new Date(e.min.valueOf()-.01*i),o=new Date(e.max.valueOf()+.01*i),r=t&&void 0!==t.animation?t.animation:!0;this.range.setRange(n,o,r)}},i.prototype.getDataRange=function(){throw new Error("Cannot invoke abstract method getDataRange")},i.prototype.setWindow=function(t,e,i){var n;if(1==arguments.length){var o=arguments[0];n=void 0!==o.animation?o.animation:!0,this.range.setRange(o.start,o.end,n)}else n=i&&void 0!==i.animation?i.animation:!0,this.range.setRange(t,e,n)},i.prototype.moveTo=function(t,e){var i=this.range.end-this.range.start,n=s.convert(t,"Date").valueOf(),o=n-i/2,r=n+i/2,a=e&&void 0!==e.animation?e.animation:!0;this.range.setRange(o,r,a)},i.prototype.getWindow=function(){var t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}},i.prototype.redraw=function(){this._redraw()},i.prototype._redraw=function(){var t=!1,e=this.options,i=this.props,n=this.dom;if(n){d.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),"top"==e.orientation?(s.addClassName(n.root,"vis-top"),s.removeClassName(n.root,"vis-bottom")):(s.removeClassName(n.root,"vis-top"),s.addClassName(n.root,"vis-bottom")),n.root.style.maxHeight=s.option.asSize(e.maxHeight,""),n.root.style.minHeight=s.option.asSize(e.minHeight,""),n.root.style.width=s.option.asSize(e.width,""),i.border.left=(n.centerContainer.offsetWidth-n.centerContainer.clientWidth)/2,i.border.right=i.border.left,i.border.top=(n.centerContainer.offsetHeight-n.centerContainer.clientHeight)/2,i.border.bottom=i.border.top;var o=n.root.offsetHeight-n.root.clientHeight,r=n.root.offsetWidth-n.root.clientWidth;0===n.centerContainer.clientHeight&&(i.border.left=i.border.top,i.border.right=i.border.left),0===n.root.clientHeight&&(r=o),i.center.height=n.center.offsetHeight,i.left.height=n.left.offsetHeight,i.right.height=n.right.offsetHeight,i.top.height=n.top.clientHeight||-i.border.top,i.bottom.height=n.bottom.clientHeight||-i.border.bottom;var a=Math.max(i.left.height,i.center.height,i.right.height),h=i.top.height+a+i.bottom.height+o+i.border.top+i.border.bottom;n.root.style.height=s.option.asSize(e.height,h+"px"),i.root.height=n.root.offsetHeight,i.background.height=i.root.height-o;var u=i.root.height-i.top.height-i.bottom.height-o;i.centerContainer.height=u,i.leftContainer.height=u,i.rightContainer.height=i.leftContainer.height,i.root.width=n.root.offsetWidth,i.background.width=i.root.width-r,i.left.width=n.leftContainer.clientWidth||-i.border.left,i.leftContainer.width=i.left.width,i.right.width=n.rightContainer.clientWidth||-i.border.right,i.rightContainer.width=i.right.width;var l=i.root.width-i.left.width-i.right.width-r;i.center.width=l,i.centerContainer.width=l,i.top.width=l,i.bottom.width=l,n.background.style.height=i.background.height+"px",n.backgroundVertical.style.height=i.background.height+"px",n.backgroundHorizontal.style.height=i.centerContainer.height+"px",n.centerContainer.style.height=i.centerContainer.height+"px",n.leftContainer.style.height=i.leftContainer.height+"px",n.rightContainer.style.height=i.rightContainer.height+"px",n.background.style.width=i.background.width+"px",n.backgroundVertical.style.width=i.centerContainer.width+"px",n.backgroundHorizontal.style.width=i.background.width+"px",n.centerContainer.style.width=i.center.width+"px",n.top.style.width=i.top.width+"px",n.bottom.style.width=i.bottom.width+"px",n.background.style.left="0",n.background.style.top="0",n.backgroundVertical.style.left=i.left.width+i.border.left+"px",n.backgroundVertical.style.top="0",n.backgroundHorizontal.style.left="0",n.backgroundHorizontal.style.top=i.top.height+"px",n.centerContainer.style.left=i.left.width+"px",n.centerContainer.style.top=i.top.height+"px",n.leftContainer.style.left="0",n.leftContainer.style.top=i.top.height+"px",n.rightContainer.style.left=i.left.width+i.center.width+"px",n.rightContainer.style.top=i.top.height+"px",n.top.style.left=i.left.width+"px",n.top.style.top="0",n.bottom.style.left=i.left.width+"px",n.bottom.style.top=i.top.height+i.centerContainer.height+"px",this._updateScrollTop();var c=this.props.scrollTop;"top"!=e.orientation.item&&(c+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0)),n.center.style.left="0",n.center.style.top=c+"px",n.left.style.left="0",n.left.style.top=c+"px",n.right.style.left="0",n.right.style.top=c+"px";var p=0==this.props.scrollTop?"hidden":"",m=this.props.scrollTop==this.props.scrollTopMin?"hidden":"";if(n.shadowTop.style.visibility=p,n.shadowBottom.style.visibility=m,n.shadowTopLeft.style.visibility=p,n.shadowBottomLeft.style.visibility=m,n.shadowTopRight.style.visibility=p,n.shadowBottomRight.style.visibility=m,this.components.forEach(function(e){t=e.redraw()||t}),t){var f=3;this.redrawCount<f?(this.redrawCount++,this._redraw()):console.log("WARNING: infinite loop in redraw?"),this.redrawCount=0}}},i.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")},i.prototype.setCurrentTime=function(t){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(t)},i.prototype.getCurrentTime=function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()},i.prototype._toTime=function(t){return d.toTime(this,t,this.props.center.width)},i.prototype._toGlobalTime=function(t){return d.toTime(this,t,this.props.root.width)},i.prototype._toScreen=function(t){return d.toScreen(this,t,this.props.center.width)},i.prototype._toGlobalScreen=function(t){return d.toScreen(this,t,this.props.root.width)},i.prototype._initAutoResize=function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()},i.prototype._startAutoResize=function(){var t=this;this._stopAutoResize(),this._onResize=function(){return 1!=t.options.autoResize?void t._stopAutoResize():void(t.dom.root&&(t.dom.root.offsetWidth!=t.props.lastWidth||t.dom.root.offsetHeight!=t.props.lastHeight)&&(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight,t.emit("change")))},s.addEventListener(window,"resize",this._onResize),this.watchTimer=setInterval(this._onResize,1e3)},i.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(s.removeEventListener(window,"resize",this._onResize),this._onResize=null)
},i.prototype._onTouch=function(){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop},i.prototype._onPinch=function(){this.touch.allowDragging=!1},i.prototype._onDrag=function(t){if(this.touch.allowDragging){var e=t.deltaY,i=this._getScrollTop(),n=this._setScrollTop(this.touch.initialScrollTop+e);n!=i&&(this._redraw(),this.emit("verticalDrag"))}},i.prototype._setScrollTop=function(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop},i.prototype._updateScrollTop=function(){var t=Math.min(this.props.centerContainer.height-this.props.center.height,0);return t!=this.props.scrollTopMin&&("top"!=this.options.orientation.item&&(this.props.scrollTop+=t-this.props.scrollTopMin),this.props.scrollTopMin=t),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.props.scrollTop},i.prototype._getScrollTop=function(){return this.props.scrollTop},i.prototype._createConfigurator=function(){throw new Error("Cannot invoke abstract method _createConfigurator")},e.exports=i},{"../DataSet":15,"../DataView":16,"../hammerUtil":18,"../module/hammer":19,"../shared/Activator":22,"../util":46,"./DateUtil":27,"./Range":28,"./component/CustomTime":35,"./component/ItemSet":37,"./component/TimeAxis":38,"emitter-component":10}],27:[function(t,e,i){"use strict";i.convertHiddenOptions=function(t,e,n){if(n&&!Array.isArray(n))return i.convertHiddenOptions(t,e,[n]);if(e.hiddenDates=[],n&&1==Array.isArray(n)){for(var o=0;o<n.length;o++)if(void 0===n[o].repeat){var r={};r.start=t(n[o].start).toDate().valueOf(),r.end=t(n[o].end).toDate().valueOf(),e.hiddenDates.push(r)}e.hiddenDates.sort(function(t,e){return t.start-e.start})}},i.updateHiddenDates=function(t,e,n){if(n&&!Array.isArray(n))return i.updateHiddenDates(t,e,[n]);if(n&&void 0!==e.domProps.centerContainer.width){i.convertHiddenOptions(t,e,n);for(var o=t(e.range.start),r=t(e.range.end),s=e.range.end-e.range.start,a=s/e.domProps.centerContainer.width,h=0;h<n.length;h++)if(void 0!==n[h].repeat){var d=t(n[h].start),u=t(n[h].end);if("Invalid Date"==d._d)throw new Error("Supplied start date is not valid: "+n[h].start);if("Invalid Date"==u._d)throw new Error("Supplied end date is not valid: "+n[h].end);var l=u-d;if(l>=4*a){var c=0,p=r.clone();switch(n[h].repeat){case"daily":d.day()!=u.day()&&(c=1),d.dayOfYear(o.dayOfYear()),d.year(o.year()),d.subtract(7,"days"),u.dayOfYear(o.dayOfYear()),u.year(o.year()),u.subtract(7-c,"days"),p.add(1,"weeks");break;case"weekly":var m=u.diff(d,"days"),f=d.day();d.date(o.date()),d.month(o.month()),d.year(o.year()),u=d.clone(),d.day(f),u.day(f),u.add(m,"days"),d.subtract(1,"weeks"),u.subtract(1,"weeks"),p.add(1,"weeks");break;case"monthly":d.month()!=u.month()&&(c=1),d.month(o.month()),d.year(o.year()),d.subtract(1,"months"),u.month(o.month()),u.year(o.year()),u.subtract(1,"months"),u.add(c,"months"),p.add(1,"months");break;case"yearly":d.year()!=u.year()&&(c=1),d.year(o.year()),d.subtract(1,"years"),u.year(o.year()),u.subtract(1,"years"),u.add(c,"years"),p.add(1,"years");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[h].repeat)}for(;p>d;)switch(e.hiddenDates.push({start:d.valueOf(),end:u.valueOf()}),n[h].repeat){case"daily":d.add(1,"days"),u.add(1,"days");break;case"weekly":d.add(1,"weeks"),u.add(1,"weeks");break;case"monthly":d.add(1,"months"),u.add(1,"months");break;case"yearly":d.add(1,"y"),u.add(1,"y");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[h].repeat)}e.hiddenDates.push({start:d.valueOf(),end:u.valueOf()})}}i.removeDuplicates(e);var g=i.isHidden(e.range.start,e.hiddenDates),v=i.isHidden(e.range.end,e.hiddenDates),y=e.range.start,b=e.range.end;1==g.hidden&&(y=1==e.range.startToFront?g.startDate-1:g.endDate+1),1==v.hidden&&(b=1==e.range.endToFront?v.startDate-1:v.endDate+1),(1==g.hidden||1==v.hidden)&&e.range._applyRange(y,b)}},i.removeDuplicates=function(t){for(var e=t.hiddenDates,i=[],n=0;n<e.length;n++)for(var o=0;o<e.length;o++)n!=o&&1!=e[o].remove&&1!=e[n].remove&&(e[o].start>=e[n].start&&e[o].end<=e[n].end?e[o].remove=!0:e[o].start>=e[n].start&&e[o].start<=e[n].end?(e[n].end=e[o].end,e[o].remove=!0):e[o].end>=e[n].start&&e[o].end<=e[n].end&&(e[n].start=e[o].start,e[o].remove=!0));for(var n=0;n<e.length;n++)e[n].remove!==!0&&i.push(e[n]);t.hiddenDates=i,t.hiddenDates.sort(function(t,e){return t.start-e.start})},i.printDates=function(t){for(var e=0;e<t.length;e++)console.log(e,new Date(t[e].start),new Date(t[e].end),t[e].start,t[e].end,t[e].remove)},i.stepOverHiddenDates=function(t,e,i){for(var n=!1,o=e.current.valueOf(),r=0;r<e.hiddenDates.length;r++){var s=e.hiddenDates[r].start,a=e.hiddenDates[r].end;if(o>=s&&a>o){n=!0;break}}if(1==n&&o<e._end.valueOf()&&o!=i){var h=t(i),d=t(a);h.year()!=d.year()?e.switchedYear=!0:h.month()!=d.month()?e.switchedMonth=!0:h.dayOfYear()!=d.dayOfYear()&&(e.switchedDay=!0),e.current=d}},i.toScreen=function(t,e,n){if(0==t.body.hiddenDates.length){var o=t.range.conversion(n);return(e.valueOf()-o.offset)*o.scale}var r=i.isHidden(e,t.body.hiddenDates);1==r.hidden&&(e=r.startDate);var s=i.getHiddenDurationBetween(t.body.hiddenDates,t.range.start,t.range.end);e=i.correctTimeForHidden(t.options.moment,t.body.hiddenDates,t.range,e);var o=t.range.conversion(n,s);return(e.valueOf()-o.offset)*o.scale},i.toTime=function(t,e,n){if(0==t.body.hiddenDates.length){var o=t.range.conversion(n);return new Date(e/o.scale+o.offset)}var r=i.getHiddenDurationBetween(t.body.hiddenDates,t.range.start,t.range.end),s=t.range.end-t.range.start-r,a=s*e/n,h=i.getAccumulatedHiddenDuration(t.body.hiddenDates,t.range,a),d=new Date(h+a+t.range.start);return d},i.getHiddenDurationBetween=function(t,e,i){for(var n=0,o=0;o<t.length;o++){var r=t[o].start,s=t[o].end;r>=e&&i>s&&(n+=s-r)}return n},i.correctTimeForHidden=function(t,e,n,o){return o=t(o).toDate().valueOf(),o-=i.getHiddenDurationBefore(t,e,n,o)},i.getHiddenDurationBefore=function(t,e,i,n){var o=0;n=t(n).toDate().valueOf();for(var r=0;r<e.length;r++){var s=e[r].start,a=e[r].end;s>=i.start&&a<i.end&&n>=a&&(o+=a-s)}return o},i.getAccumulatedHiddenDuration=function(t,e,i){for(var n=0,o=0,r=e.start,s=0;s<t.length;s++){var a=t[s].start,h=t[s].end;if(a>=e.start&&h<e.end){if(o+=a-r,r=h,o>=i)break;n+=h-a}}return n},i.snapAwayFromHidden=function(t,e,n,o){var r=i.isHidden(e,t);return 1==r.hidden?0>n?1==o?r.startDate-(r.endDate-e)-1:r.startDate-1:1==o?r.endDate+(e-r.startDate)+1:r.endDate+1:e},i.isHidden=function(t,e){for(var i=0;i<e.length;i++){var n=e[i].start,o=e[i].end;if(t>=n&&o>t)return{hidden:!0,startDate:n,endDate:o}}return{hidden:!1,startDate:n,endDate:o}}},{}],28:[function(t,e){"use strict";function i(t,e){var i=s().hours(0).minutes(0).seconds(0).milliseconds(0);this.start=i.clone().add(-3,"days").valueOf(),this.end=i.clone().add(4,"days").valueOf(),this.body=t,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={start:null,end:null,moment:s,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10},this.options=r.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.setOptions(e)}function n(t){if("horizontal"!=t&&"vertical"!=t)throw new TypeError('Unknown direction "'+t+'". Choose "horizontal" or "vertical".')}function o(t,e){return{x:t.x-r.getAbsoluteLeft(e),y:t.y-r.getAbsoluteTop(e)}}var r=t("../util"),s=(t("../hammerUtil"),t("../module/moment")),a=t("./component/Component"),h=t("./DateUtil");i.prototype=new a,i.prototype.setOptions=function(t){if(t){var e=["direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey"];r.selectiveExtend(e,this.options,t),("start"in t||"end"in t)&&this.setRange(t.start,t.end)}},i.prototype.setRange=function(t,e,i,n){n!==!0&&(n=!1);var o=void 0!=t?r.convert(t,"Date").valueOf():null,s=void 0!=e?r.convert(e,"Date").valueOf():null;if(this._cancelAnimation(),i){var a=this,d=this.start,u=this.end,l="object"==typeof i&&"duration"in i?i.duration:500,c="object"==typeof i&&"easingFunction"in i?i.easingFunction:"easeInOutQuad",p=r.easingFunctions[c];if(!p)throw new Error("Unknown easing function "+JSON.stringify(c)+". Choose from: "+Object.keys(r.easingFunctions).join(", "));var m=(new Date).valueOf(),f=!1,g=function b(){if(!a.props.touch.dragging){var t=(new Date).valueOf(),e=t-m,i=p(e/l),r=e>l,c=r||null===o?o:d+(o-d)*i,g=r||null===s?s:u+(s-u)*i;v=a._applyRange(c,g),h.updateHiddenDates(a.options.moment,a.body,a.options.hiddenDates),f=f||v,v&&a.body.emitter.emit("rangechange",{start:new Date(a.start),end:new Date(a.end),byUser:n}),r?f&&a.body.emitter.emit("rangechanged",{start:new Date(a.start),end:new Date(a.end),byUser:n}):a.animationTimer=setTimeout(b,20)}};return g()}var v=this._applyRange(o,s);if(h.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),v){var y={start:new Date(this.start),end:new Date(this.end),byUser:n};this.body.emitter.emit("rangechange",y),this.body.emitter.emit("rangechanged",y)}},i.prototype._cancelAnimation=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)},i.prototype._applyRange=function(t,e){var i,n=null!=t?r.convert(t,"Date").valueOf():this.start,o=null!=e?r.convert(e,"Date").valueOf():this.end,s=null!=this.options.max?r.convert(this.options.max,"Date").valueOf():null,a=null!=this.options.min?r.convert(this.options.min,"Date").valueOf():null;if(isNaN(n)||null===n)throw new Error('Invalid start "'+t+'"');if(isNaN(o)||null===o)throw new Error('Invalid end "'+e+'"');if(n>o&&(o=n),null!==a&&a>n&&(i=a-n,n+=i,o+=i,null!=s&&o>s&&(o=s)),null!==s&&o>s&&(i=o-s,n-=i,o-=i,null!=a&&a>n&&(n=a)),null!==this.options.zoomMin){var h=parseFloat(this.options.zoomMin);0>h&&(h=0),h>o-n&&(this.end-this.start===h&&n>this.start&&o<this.end?(n=this.start,o=this.end):(i=h-(o-n),n-=i/2,o+=i/2))}if(null!==this.options.zoomMax){var d=parseFloat(this.options.zoomMax);0>d&&(d=0),o-n>d&&(this.end-this.start===d&&n<this.start&&o>this.end?(n=this.start,o=this.end):(i=o-n-d,n+=i/2,o-=i/2))}var u=this.start!=n||this.end!=o;return n>=this.start&&n<=this.end||o>=this.start&&o<=this.end||this.start>=n&&this.start<=o||this.end>=n&&this.end<=o||this.body.emitter.emit("checkRangedItems"),this.start=n,this.end=o,u},i.prototype.getRange=function(){return{start:this.start,end:this.end}},i.prototype.conversion=function(t,e){return i.conversion(this.start,this.end,t,e)},i.conversion=function(t,e,i,n){return void 0===n&&(n=0),0!=i&&e-t!=0?{offset:t,scale:i/(e-t-n)}:{offset:0,scale:1}},i.prototype._onDragStart=function(t){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(t)&&this.props.touch.allowDragging&&(this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))},i.prototype._onDrag=function(t){if(this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging){var e=this.options.direction;n(e);var i="horizontal"==e?t.deltaX:t.deltaY;i-=this.deltaDifference;var o=this.props.touch.end-this.props.touch.start,r=h.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);o-=r;var s="horizontal"==e?this.body.domProps.center.width:this.body.domProps.center.height,a=-i/s*o,d=this.props.touch.start+a,u=this.props.touch.end+a,l=h.snapAwayFromHidden(this.body.hiddenDates,d,this.previousDelta-i,!0),c=h.snapAwayFromHidden(this.body.hiddenDates,u,this.previousDelta-i,!0);if(l!=d||c!=u)return this.deltaDifference+=i,this.props.touch.start=l,this.props.touch.end=c,void this._onDrag(t);this.previousDelta=i,this._applyRange(d,u),this.body.emitter.emit("rangechange",{start:new Date(this.start),end:new Date(this.end),byUser:!0})}},i.prototype._onDragEnd=function(){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0}))},i.prototype._onMouseWheel=function(t){if(this.options.zoomable&&this.options.moveable&&this._isInsideRange(t)&&(!this.options.zoomKey||t[this.options.zoomKey])){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e){var i;i=0>e?1-e/5:1/(1+e/5);var n=o({x:t.clientX,y:t.clientY},this.body.dom.center),r=this._pointerToDate(n);this.zoom(i,r,e)}t.preventDefault()}},i.prototype._onTouch=function(){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.scaleOffset=0,this.deltaDifference=0},i.prototype._onPinch=function(t){if(this.options.zoomable&&this.options.moveable){this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=o(t.center,this.body.dom.center));var e=1/(t.scale+this.scaleOffset),i=this._pointerToDate(this.props.touch.center),n=h.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),r=h.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,i),s=n-r,a=i-r+(this.props.touch.start-(i-r))*e,d=i+s+(this.props.touch.end-(i+s))*e;this.startToFront=0>=1-e,this.endToFront=0>=e-1;var u=h.snapAwayFromHidden(this.body.hiddenDates,a,1-e,!0),l=h.snapAwayFromHidden(this.body.hiddenDates,d,e-1,!0);(u!=a||l!=d)&&(this.props.touch.start=u,this.props.touch.end=l,this.scaleOffset=1-t.scale,a=u,d=l),this.setRange(a,d,!1,!0),this.startToFront=!1,this.endToFront=!0}},i.prototype._isInsideRange=function(t){var e=t.center?t.center.x:t.clientX,i=e-r.getAbsoluteLeft(this.body.dom.centerContainer),n=this.body.util.toTime(i);return n>=this.start&&n<=this.end},i.prototype._pointerToDate=function(t){var e,i=this.options.direction;if(n(i),"horizontal"==i)return this.body.util.toTime(t.x).valueOf();var o=this.body.domProps.center.height;return e=this.conversion(o),t.y/e.scale+e.offset},i.prototype.zoom=function(t,e,i){null==e&&(e=(this.start+this.end)/2);var n=h.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),o=h.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,e),r=n-o,s=e-o+(this.start-(e-o))*t,a=e+r+(this.end-(e+r))*t;this.startToFront=i>0?!1:!0,this.endToFront=-i>0?!1:!0;var d=h.snapAwayFromHidden(this.body.hiddenDates,s,i,!0),u=h.snapAwayFromHidden(this.body.hiddenDates,a,-i,!0);(d!=s||u!=a)&&(s=d,a=u),this.setRange(s,a,!1,!0),this.startToFront=!1,this.endToFront=!0},i.prototype.move=function(t){var e=this.end-this.start,i=this.start+e*t,n=this.end+e*t;this.start=i,this.end=n},i.prototype.moveTo=function(t){var e=(this.start+this.end)/2,i=e-t,n=this.start-i,o=this.end-i;this.setRange(n,o)},e.exports=i},{"../hammerUtil":18,"../module/moment":20,"../util":46,"./DateUtil":27,"./component/Component":33}],29:[function(t,e,i){"use strict";var n=.001;i.orderByStart=function(t){t.sort(function(t,e){return t.data.start-e.data.start})},i.orderByEnd=function(t){t.sort(function(t,e){var i="end"in t.data?t.data.end:t.data.start,n="end"in e.data?e.data.end:e.data.start;return i-n})},i.stack=function(t,e,n){var o,r;if(n)for(o=0,r=t.length;r>o;o++)t[o].top=null;for(o=0,r=t.length;r>o;o++){var s=t[o];if(s.stack&&null===s.top){s.top=e.axis;do{for(var a=null,h=0,d=t.length;d>h;h++){var u=t[h];if(null!==u.top&&u!==s&&u.stack&&i.collision(s,u,e.item)){a=u;break}}null!=a&&(s.top=a.top+a.height+e.item.vertical)}while(a)}}},i.nostack=function(t,e,i){var n,o,r;for(n=0,o=t.length;o>n;n++)if(void 0!==t[n].data.subgroup){r=e.axis;for(var s in i)i.hasOwnProperty(s)&&1==i[s].visible&&i[s].index<i[t[n].data.subgroup].index&&(r+=i[s].height+e.item.vertical);t[n].top=r}else t[n].top=e.axis},i.collision=function(t,e,i){return t.left-i.horizontal+n<e.left+e.width&&t.left+t.width+i.horizontal-n>e.left&&t.top-i.vertical+n<e.top+e.height&&t.top+t.height+i.vertical-n>e.top}},{}],30:[function(t,e){"use strict";function i(t,e,o,r){this.moment=n,this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(t,e,o),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,this.hiddenDates=Array.isArray(r)?r:void 0!=r?[r]:[],this.format=i.FORMAT}var n=t("../module/moment"),o=t("./DateUtil"),r=t("../util");i.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},i.prototype.setMoment=function(t){this.moment=t,this.current=this.moment(this.current),this._start=this.moment(this._start),this._end=this.moment(this._end)},i.prototype.setFormat=function(t){var e=r.deepExtend({},i.FORMAT);this.format=r.deepExtend(e,t)},i.prototype.setRange=function(t,e,i){if(!(t instanceof Date&&e instanceof Date))throw"No legal start or end date in method setRange";this._start=void 0!=t?this.moment(t.valueOf()):new Date,this._end=void 0!=e?this.moment(e.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i)},i.prototype.start=function(){this.current=this._start.clone(),this.roundToMinor()},i.prototype.roundToMinor=function(){switch(this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(1!=this.step)switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year")}},i.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},i.prototype.next=function(){var t=this.current.valueOf();if(this.current.month()<6)switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.subtract(this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}else switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}if(1!=this.step)switch(this.scale){case"millisecond":this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"month":this.current.month()<this.step&&this.current.month(0);break;case"year":}this.current.valueOf()==t&&(this.current=this._end.clone()),o.stepOverHiddenDates(this.moment,this,t)},i.prototype.getCurrent=function(){return this.current},i.prototype.setScale=function(t){t&&"string"==typeof t.scale&&(this.scale=t.scale,this.step=t.step>0?t.step:1,this.autoScale=!1)},i.prototype.setAutoScale=function(t){this.autoScale=t},i.prototype.setMinimumStep=function(t){if(void 0!=t){var e=31104e6,i=2592e6,n=864e5,o=36e5,r=6e4,s=1e3,a=1;1e3*e>t&&(this.scale="year",this.step=1e3),500*e>t&&(this.scale="year",this.step=500),100*e>t&&(this.scale="year",this.step=100),50*e>t&&(this.scale="year",this.step=50),10*e>t&&(this.scale="year",this.step=10),5*e>t&&(this.scale="year",this.step=5),e>t&&(this.scale="year",this.step=1),3*i>t&&(this.scale="month",this.step=3),i>t&&(this.scale="month",this.step=1),5*n>t&&(this.scale="day",this.step=5),2*n>t&&(this.scale="day",this.step=2),n>t&&(this.scale="day",this.step=1),n/2>t&&(this.scale="weekday",this.step=1),4*o>t&&(this.scale="hour",this.step=4),o>t&&(this.scale="hour",this.step=1),15*r>t&&(this.scale="minute",this.step=15),10*r>t&&(this.scale="minute",this.step=10),5*r>t&&(this.scale="minute",this.step=5),r>t&&(this.scale="minute",this.step=1),15*s>t&&(this.scale="second",this.step=15),10*s>t&&(this.scale="second",this.step=10),5*s>t&&(this.scale="second",this.step=5),s>t&&(this.scale="second",this.step=1),200*a>t&&(this.scale="millisecond",this.step=200),100*a>t&&(this.scale="millisecond",this.step=100),50*a>t&&(this.scale="millisecond",this.step=50),10*a>t&&(this.scale="millisecond",this.step=10),5*a>t&&(this.scale="millisecond",this.step=5),a>t&&(this.scale="millisecond",this.step=1)}},i.snap=function(t,e,i){var o=n(t);if("year"==e){var r=o.year()+Math.round(o.month()/12);o.year(Math.round(r/i)*i),o.month(0),o.date(0),o.hours(0),o.minutes(0),o.seconds(0),o.milliseconds(0)}else if("month"==e)o.date()>15?(o.date(1),o.add(1,"month")):o.date(1),o.hours(0),o.minutes(0),o.seconds(0),o.milliseconds(0);else if("day"==e){switch(i){case 5:case 2:o.hours(24*Math.round(o.hours()/24));break;default:o.hours(12*Math.round(o.hours()/12))}o.minutes(0),o.seconds(0),o.milliseconds(0)}else if("weekday"==e){switch(i){case 5:case 2:o.hours(12*Math.round(o.hours()/12));break;default:o.hours(6*Math.round(o.hours()/6))}o.minutes(0),o.seconds(0),o.milliseconds(0)}else if("hour"==e){switch(i){case 4:o.minutes(60*Math.round(o.minutes()/60));break;default:o.minutes(30*Math.round(o.minutes()/30))}o.seconds(0),o.milliseconds(0)}else if("minute"==e){switch(i){case 15:case 10:o.minutes(5*Math.round(o.minutes()/5)),o.seconds(0);break;case 5:o.seconds(60*Math.round(o.seconds()/60));break;default:o.seconds(30*Math.round(o.seconds()/30))}o.milliseconds(0)}else if("second"==e)switch(i){case 15:case 10:o.seconds(5*Math.round(o.seconds()/5)),o.milliseconds(0);break;case 5:o.milliseconds(1e3*Math.round(o.milliseconds()/1e3));break;default:o.milliseconds(500*Math.round(o.milliseconds()/500))}else if("millisecond"==e){var s=i>5?i/2:1;o.milliseconds(Math.round(o.milliseconds()/s)*s)}return o},i.prototype.isMajor=function(){if(1==this.switchedYear)switch(this.switchedYear=!1,this.scale){case"year":case"month":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedMonth)switch(this.switchedMonth=!1,this.scale){case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.switchedDay=!1,this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var t=this.moment(this.current);switch(this.scale){case"millisecond":return 0==t.milliseconds();case"second":return 0==t.seconds();case"minute":return 0==t.hours()&&0==t.minutes();case"hour":return 0==t.hours();case"weekday":case"day":return 1==t.date();case"month":return 0==t.month();case"year":return!1;default:return!1}},i.prototype.getLabelMinor=function(t){void 0==t&&(t=this.current);var e=this.format.minorLabels[this.scale];return e&&e.length>0?this.moment(t).format(e):""},i.prototype.getLabelMajor=function(t){void 0==t&&(t=this.current);var e=this.format.majorLabels[this.scale];return e&&e.length>0?this.moment(t).format(e):""},i.prototype.getClassName=function(){function t(t){return t/h%2==0?" vis-even":" vis-odd"}function e(t){return t.isSame(new Date,"day")?" vis-today":t.isSame(r().add(1,"day"),"day")?" vis-tomorrow":t.isSame(r().add(-1,"day"),"day")?" vis-yesterday":""}function i(t){return t.isSame(new Date,"week")?" vis-current-week":""}function n(t){return t.isSame(new Date,"month")?" vis-current-month":""}function o(t){return t.isSame(new Date,"year")?" vis-current-year":""}var r=this.moment,s=this.moment(this.current),a=s.locale?s.locale("en"):s.lang("en"),h=this.step;switch(this.scale){case"millisecond":return t(a.milliseconds()).trim();case"second":return t(a.seconds()).trim();case"minute":return t(a.minutes()).trim();case"hour":var d=a.hours();return 4==this.step&&(d=d+"-h"+(d+4)),"vis-h"+d+e(a)+t(a.hours());case"weekday":return"vis-"+a.format("dddd").toLowerCase()+e(a)+i(a)+t(a.date());case"day":var u=a.date(),l=a.format("MMMM").toLowerCase();return"vis-day"+u+" vis-"+l+n(a)+t(u-1);case"month":return"vis-"+a.format("MMMM").toLowerCase()+n(a)+t(a.month());case"year":var c=a.year();return"vis-year"+c+o(a)+t(c);default:return""}},e.exports=i},{"../module/moment":20,"../util":46,"./DateUtil":27}],31:[function(t,e){"use strict";function i(t,e,h,l){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(h)||h instanceof r||h instanceof s)&&h instanceof Object){var p=l;l=h,h=p}var m=this;this.defaultOptions={start:null,end:null,autoResize:!0,throttleRedraw:0,orientation:{axis:"bottom",item:"bottom"},moment:n,width:null,height:null,maxHeight:null,minHeight:null},this.options=o.deepExtend({},this.defaultOptions),this._create(t),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:function(){return m.timeAxis.step.scale},getStep:function(){return m.timeAxis.step.step},toScreen:m._toScreen.bind(m),toGlobalScreen:m._toGlobalScreen.bind(m),toTime:m._toTime.bind(m),toGlobalTime:m._toGlobalTime.bind(m)}},this.range=new a(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new d(this.body),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new u(this.body),this.components.push(this.currentTime),this.itemSet=new c(this.body),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,this.on("tap",function(t){m.emit("click",m.getEventProperties(t))}),this.on("doubletap",function(t){m.emit("doubleClick",m.getEventProperties(t))}),this.dom.root.oncontextmenu=function(t){m.emit("contextmenu",m.getEventProperties(t))},l&&this.setOptions(l),h&&this.setGroups(h),e?this.setItems(e):this._redraw()}var n=(t("emitter-component"),t("../module/hammer"),t("../module/moment")),o=t("../util"),r=t("../DataSet"),s=t("../DataView"),a=t("./Range"),h=t("./Core"),d=t("./component/TimeAxis"),u=t("./component/CurrentTime"),l=t("./component/CustomTime"),c=t("./component/ItemSet"),p=t("../shared/Configurator"),m=t("../shared/Validator")["default"],f=t("../shared/Validator").printStyle,g=t("./optionsTimeline").allOptions,v=t("./optionsTimeline").configureOptions;i.prototype=new h,i.prototype._createConfigurator=function(){return new p(this,this.dom.container,v)},i.prototype.redraw=function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()},i.prototype.setOptions=function(t){var e=m.validate(t,g);if(e===!0&&console.log("%cErrors have been found in the supplied options object.",f),h.prototype.setOptions.call(this,t),"type"in t&&t.type!==this.options.type){this.options.type=t.type;var i=this.itemsData;if(i){var n=this.getSelection();this.setItems(null),this.setItems(i),this.setSelection(n)}}},i.prototype.setItems=function(t){var e,i=null==this.itemsData;if(e=t?t instanceof r||t instanceof s?t:new r(t,{type:{start:"Date",end:"Date"}}):null,this.itemsData=e,this.itemSet&&this.itemSet.setItems(e),i)if(void 0!=this.options.start||void 0!=this.options.end){if(void 0==this.options.start||void 0==this.options.end)var n=this.getItemRange();var o=void 0!=this.options.start?this.options.start:n.min,a=void 0!=this.options.end?this.options.end:n.max;this.setWindow(o,a,{animation:!1})}else this.fit({animation:!1})},i.prototype.setGroups=function(t){var e;e=t?t instanceof r||t instanceof s?t:new r(t):null,this.groupsData=e,this.itemSet.setGroups(e)},i.prototype.setData=function(t){t&&t.groups&&this.setGroups(t.groups),t&&t.items&&this.setItems(t.items)},i.prototype.setSelection=function(t,e){this.itemSet&&this.itemSet.setSelection(t),e&&e.focus&&this.focus(t,e)},i.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]},i.prototype.focus=function(t,e){if(this.itemsData&&void 0!=t){var i=Array.isArray(t)?t:[t],n=this.itemsData.getDataSet().get(i,{type:{start:"Date",end:"Date"}}),o=null,r=null;if(n.forEach(function(t){var e=t.start.valueOf(),i="end"in t?t.end.valueOf():t.start.valueOf();(null===o||o>e)&&(o=e),(null===r||i>r)&&(r=i)}),null!==o&&null!==r){var s=(o+r)/2,a=Math.max(this.range.end-this.range.start,1.1*(r-o)),h=e&&void 0!==e.animation?e.animation:!0;this.range.setRange(s-a/2,s+a/2,h)}}},i.prototype.fit=function(t){var e=t&&void 0!==t.animation?t.animation:!0,i=this.getItemRange();this.range.setRange(i.min,i.max,e)},i.prototype.getItemRange=function(){var t=this,e=this.getDataRange(),i=e.min,n=e.max,r=null,s=null;if(null!=i&&null!=n){var a,h,d,u,l;!function(){var e=function(t){return o.convert(t.data.start,"Date").valueOf()},c=function(t){var e=void 0!=t.data.end?t.data.end:t.data.start;return o.convert(e,"Date").valueOf()};a=n-i,0>=a&&(a=10),h=a/t.props.center.width,o.forEach(t.itemSet.items,function(t){t.show();var o=e(t),a=c(t),d=new Date(o-(t.getWidthLeft()+10)*h),u=new Date(a+(t.getWidthRight()+10)*h);i>d&&(i=d,r=t),u>n&&(n=u,s=t)}.bind(t)),r&&s&&(d=r.getWidthLeft()+10,u=s.getWidthRight()+10,l=t.props.center.width-d-u,l>0&&(i=e(r)-d*a/l,n=c(s)+u*a/l))}()}return{min:null!=i?new Date(i):null,max:null!=n?new Date(n):null}},i.prototype.getDataRange=function(){var t=null,e=null,i=this.itemsData&&this.itemsData.getDataSet();return i&&i.forEach(function(i){var n=o.convert(i.start,"Date").valueOf(),r=o.convert(void 0!=i.end?i.end:i.start,"Date").valueOf();(null===t||t>n)&&(t=n),(null===e||r>e)&&(e=n)}),{min:null!=t?new Date(t):null,max:null!=e?new Date(e):null}},i.prototype.getEventProperties=function(t){var e=t.center?t.center.x:t.clientX,i=t.center?t.center.y:t.clientY,n=e-o.getAbsoluteLeft(this.dom.centerContainer),r=i-o.getAbsoluteTop(this.dom.centerContainer),s=this.itemSet.itemFromTarget(t),a=this.itemSet.groupFromTarget(t),h=l.customTimeFromTarget(t),d=this.itemSet.options.snap||null,u=this.body.util.getScale(),c=this.body.util.getStep(),p=this._toTime(n),m=d?d(p,u,c):p,f=o.getTarget(t),g=null;return null!=s?g="item":null!=h?g="custom-time":o.hasParent(f,this.timeAxis.dom.foreground)?g="axis":this.timeAxis2&&o.hasParent(f,this.timeAxis2.dom.foreground)?g="axis":o.hasParent(f,this.itemSet.dom.labelSet)?g="group-label":o.hasParent(f,this.currentTime.bar)?g="current-time":o.hasParent(f,this.dom.center)&&(g="background"),{event:t,item:s?s.id:null,group:a?a.groupId:null,what:g,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:n,y:r,time:p,snappedTime:m}},e.exports=i},{"../DataSet":15,"../DataView":16,"../module/hammer":19,"../module/moment":20,"../shared/Configurator":24,"../shared/Validator":25,"../util":46,"./Core":26,"./Range":28,"./component/CurrentTime":34,"./component/CustomTime":35,"./component/ItemSet":37,"./component/TimeAxis":38,"./optionsTimeline":45,"emitter-component":10}],32:[function(t,e){"use strict";
function i(t,e,i){n.call(this,t,e,i),this.width=0,this.height=0,this.top=0,this.left=0}var n=(t("../../util"),t("./Group"));i.prototype=Object.create(n.prototype),i.prototype.redraw=function(t,e){var i=!1;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,t),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var n=0,o=this.visibleItems.length;o>n;n++){var r=this.visibleItems[n];r.repositionY(e)}return i},i.prototype.show=function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)},e.exports=i},{"../../util":46,"./Group":36}],33:[function(t,e){"use strict";function i(){this.options=null,this.props=null}i.prototype.setOptions=function(t){t&&util.extend(this.options,t)},i.prototype.redraw=function(){return!1},i.prototype.destroy=function(){},i.prototype._isResized=function(){var t=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,t},e.exports=i},{}],34:[function(t,e){"use strict";function i(t,e){this.body=t,this.defaultOptions={showCurrentTime:!0,moment:r,locales:s,locale:"en"},this.options=n.extend({},this.defaultOptions),this.offset=0,this._create(),this.setOptions(e)}var n=t("../../util"),o=t("./Component"),r=t("../../module/moment"),s=t("../locales");i.prototype=new o,i.prototype._create=function(){var t=document.createElement("div");t.className="vis-current-time",t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t},i.prototype.destroy=function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null},i.prototype.setOptions=function(t){t&&n.selectiveExtend(["showCurrentTime","moment","locale","locales"],this.options,t)},i.prototype.redraw=function(){if(this.options.showCurrentTime){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar),this.start());var e=this.options.moment((new Date).valueOf()+this.offset),i=this.body.util.toScreen(e),n=this.options.locales[this.options.locale];n||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline.html#Localization"),this.warned=!0),n=this.options.locales.en);var o=n.current+" "+n.time+": "+e.format("dddd, MMMM Do YYYY, H:mm:ss");o=o.charAt(0).toUpperCase()+o.substring(1),this.bar.style.left=i+"px",this.bar.title=o}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1},i.prototype.start=function(){function t(){e.stop();var i=e.body.range.conversion(e.body.domProps.center.width).scale,n=1/i/10;30>n&&(n=30),n>1e3&&(n=1e3),e.redraw(),e.currentTimeTimer=setTimeout(t,n)}var e=this;t()},i.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},i.prototype.setCurrentTime=function(t){var e=n.convert(t,"Date").valueOf(),i=(new Date).valueOf();this.offset=e-i,this.redraw()},i.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)},e.exports=i},{"../../module/moment":20,"../../util":46,"../locales":44,"./Component":33}],35:[function(t,e){"use strict";function i(t,e){this.body=t,this.defaultOptions={moment:s,locales:a,locale:"en",id:void 0,title:void 0},this.options=o.extend({},this.defaultOptions),this.customTime=e&&e.time?e.time:new Date,this.eventParams={},this.setOptions(e),this._create()}var n=t("../../module/hammer"),o=t("../../util"),r=t("./Component"),s=t("../../module/moment"),a=t("../locales");i.prototype=new r,i.prototype.setOptions=function(t){t&&o.selectiveExtend(["moment","locale","locales","id"],this.options,t)},i.prototype._create=function(){var t=document.createElement("div");t["custom-time"]=this,t.className="vis-custom-time "+(this.options.id||""),t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t;var e=document.createElement("div");e.style.position="relative",e.style.top="0px",e.style.left="-10px",e.style.height="100%",e.style.width="20px",t.appendChild(e),this.hammer=new n(e),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:30})},i.prototype.destroy=function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null},i.prototype.redraw=function(){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar));var e=this.body.util.toScreen(this.customTime),i=this.options.locales[this.options.locale];i||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline.html#Localization"),this.warned=!0),i=this.options.locales.en);var n=this.options.title;return void 0===n&&(n=i.time+": "+this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss"),n=n.charAt(0).toUpperCase()+n.substring(1)),this.bar.style.left=e+"px",this.bar.title=n,!1},i.prototype.hide=function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)},i.prototype.setCustomTime=function(t){this.customTime=o.convert(t,"Date"),this.redraw()},i.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},i.prototype.setCustomTitle=function(t){this.options.title=t},i.prototype._onDragStart=function(t){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,t.stopPropagation()},i.prototype._onDrag=function(t){if(this.eventParams.dragging){var e=this.body.util.toScreen(this.eventParams.customTime)+t.deltaX,i=this.body.util.toTime(e);this.setCustomTime(i),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf())}),t.stopPropagation()}},i.prototype._onDragEnd=function(t){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf())}),t.stopPropagation())},i.customTimeFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("custom-time"))return e["custom-time"];e=e.parentNode}return null},e.exports=i},{"../../module/hammer":19,"../../module/moment":20,"../../util":46,"../locales":44,"./Component":33}],36:[function(t,e){"use strict";function i(t,e,i){this.groupId=t,this.subgroups={},this.subgroupIndex=0,this.subgroupOrderer=e&&e.subgroupOrder,this.itemSet=i,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var n=this;this.itemSet.body.emitter.on("checkRangedItems",function(){n.checkRangedItems=!0}),this._create(),this.setData(e)}{var n=t("../../util"),o=t("../Stack");t("./item/RangeItem")}i.prototype._create=function(){var t=document.createElement("div");t.className=this.itemSet.options.groupEditable.order?"vis-label draggable":"vis-label",this.dom.label=t;var e=document.createElement("div");e.className="vis-inner",t.appendChild(e),this.dom.inner=e;var i=document.createElement("div");i.className="vis-group",i["timeline-group"]=this,this.dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.innerHTML="?",this.dom.background.appendChild(this.dom.marker)},i.prototype.setData=function(t){var e;if(e=this.itemSet.options&&this.itemSet.options.groupTemplate?this.itemSet.options.groupTemplate(t):t&&t.content,e instanceof Element){for(this.dom.inner.appendChild(e);this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(e)}else this.dom.inner.innerHTML=void 0!==e&&null!==e?e:this.groupId||"";this.dom.label.title=t&&t.title||"",this.dom.inner.firstChild?n.removeClassName(this.dom.inner,"vis-hidden"):n.addClassName(this.dom.inner,"vis-hidden");var i=t&&t.className||null;i!=this.className&&(this.className&&(n.removeClassName(this.dom.label,this.className),n.removeClassName(this.dom.foreground,this.className),n.removeClassName(this.dom.background,this.className),n.removeClassName(this.dom.axis,this.className)),n.addClassName(this.dom.label,i),n.addClassName(this.dom.foreground,i),n.addClassName(this.dom.background,i),n.addClassName(this.dom.axis,i),this.className=i),this.style&&(n.removeCssText(this.dom.label,this.style),this.style=null),t&&t.style&&(n.addCssText(this.dom.label,t.style),this.style=t.style)},i.prototype.getLabelWidth=function(){return this.props.label.width},i.prototype.redraw=function(t,e,i){var r=!1,s=this.dom.marker.clientHeight;if(s!=this.lastMarkerHeight&&(this.lastMarkerHeight=s,n.forEach(this.items,function(t){t.dirty=!0,t.displayed&&t.redraw()}),i=!0),"function"==typeof this.itemSet.options.order){if(i){var a=this,h=!1;n.forEach(this.items,function(t){t.displayed||(t.redraw(),a.visibleItems.push(t)),t.repositionX(h)});var d=this.orderedItems.byStart.slice().sort(function(t,e){return a.itemSet.options.order(t.data,e.data)});o.stack(d,e,!0)}this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,t)}else this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,t),this.itemSet.options.stack?o.stack(this.visibleItems,e,i):o.nostack(this.visibleItems,e,this.subgroups);var u=this._calculateHeight(e),l=this.dom.foreground;this.top=l.offsetTop,this.left=l.offsetLeft,this.width=l.offsetWidth,r=n.updateProperty(this,"height",u)||r,r=n.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||r,r=n.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||r,this.dom.background.style.height=u+"px",this.dom.foreground.style.height=u+"px",this.dom.label.style.height=u+"px";for(var c=0,p=this.visibleItems.length;p>c;c++){var m=this.visibleItems[c];m.repositionY(e)}return r},i.prototype._calculateHeight=function(t){var e,i=this.visibleItems;this.resetSubgroups();var o=this;if(i.length>0){var r=i[0].top,s=i[0].top+i[0].height;if(n.forEach(i,function(t){r=Math.min(r,t.top),s=Math.max(s,t.top+t.height),void 0!==t.data.subgroup&&(o.subgroups[t.data.subgroup].height=Math.max(o.subgroups[t.data.subgroup].height,t.height),o.subgroups[t.data.subgroup].visible=!0)}),r>t.axis){var a=r-t.axis;s-=a,n.forEach(i,function(t){t.top-=a})}e=s+t.item.vertical/2}else e=0;return e=Math.max(e,this.props.label.height)},i.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)},i.prototype.hide=function(){var t=this.dom.label;t.parentNode&&t.parentNode.removeChild(t);var e=this.dom.foreground;e.parentNode&&e.parentNode.removeChild(e);var i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);var n=this.dom.axis;n.parentNode&&n.parentNode.removeChild(n)},i.prototype.add=function(t){if(this.items[t.id]=t,t.setParent(this),void 0!==t.data.subgroup&&(void 0===this.subgroups[t.data.subgroup]&&(this.subgroups[t.data.subgroup]={height:0,visible:!1,index:this.subgroupIndex,items:[]},this.subgroupIndex++),this.subgroups[t.data.subgroup].items.push(t)),this.orderSubgroups(),-1==this.visibleItems.indexOf(t)){var e=this.itemSet.body.range;this._checkIfVisible(t,this.visibleItems,e)}},i.prototype.orderSubgroups=function(){if(void 0!==this.subgroupOrderer){var t=[];if("string"==typeof this.subgroupOrderer){for(var e in this.subgroups)t.push({subgroup:e,sortField:this.subgroups[e].items[0].data[this.subgroupOrderer]});t.sort(function(t,e){return t.sortField-e.sortField})}else if("function"==typeof this.subgroupOrderer){for(var e in this.subgroups)t.push(this.subgroups[e].items[0].data);t.sort(this.subgroupOrderer)}if(t.length>0)for(var i=0;i<t.length;i++)this.subgroups[t[i].subgroup].index=i}},i.prototype.resetSubgroups=function(){for(var t in this.subgroups)this.subgroups.hasOwnProperty(t)&&(this.subgroups[t].visible=!1)},i.prototype.remove=function(t){delete this.items[t.id],t.setParent(null);var e=this.visibleItems.indexOf(t);if(-1!=e&&this.visibleItems.splice(e,1),void 0!==t.data.subgroup){var i=this.subgroups[t.data.subgroup];if(i){var n=i.items.indexOf(t);i.items.splice(n,1),i.items.length||(delete this.subgroups[t.data.subgroup],this.subgroupIndex--),this.orderSubgroups()}}},i.prototype.removeFromDataSet=function(t){this.itemSet.removeItem(t.id)},i.prototype.order=function(){for(var t=n.toArray(this.items),e=[],i=[],r=0;r<t.length;r++)void 0!==t[r].data.end&&i.push(t[r]),e.push(t[r]);this.orderedItems={byStart:e,byEnd:i},o.orderByStart(this.orderedItems.byStart),o.orderByEnd(this.orderedItems.byEnd)},i.prototype._updateVisibleItems=function(t,e,i){var o,r,s=[],a={},h=(i.end-i.start)/4,d=i.start-h,u=i.end+h,l=function(t){return d>t?-1:u>=t?0:1};if(e.length>0)for(r=0;r<e.length;r++)this._checkIfVisibleWithReference(e[r],s,a,i);var c=n.binarySearchCustom(t.byStart,l,"data","start");if(this._traceVisible(c,t.byStart,s,a,function(t){return t.data.start<d||t.data.start>u}),1==this.checkRangedItems)for(this.checkRangedItems=!1,r=0;r<t.byEnd.length;r++)this._checkIfVisibleWithReference(t.byEnd[r],s,a,i);else{var p=n.binarySearchCustom(t.byEnd,l,"data","end");this._traceVisible(p,t.byEnd,s,a,function(t){return t.data.end<d||t.data.end>u})}for(r=0;r<s.length;r++)o=s[r],o.displayed||o.show(),o.repositionX();return s},i.prototype._traceVisible=function(t,e,i,n,o){var r,s;if(-1!=t){for(s=t;s>=0&&(r=e[s],!o(r));s--)void 0===n[r.id]&&(n[r.id]=!0,i.push(r));for(s=t+1;s<e.length&&(r=e[s],!o(r));s++)void 0===n[r.id]&&(n[r.id]=!0,i.push(r))}},i.prototype._checkIfVisible=function(t,e,i){t.isVisible(i)?(t.displayed||t.show(),t.repositionX(),e.push(t)):t.displayed&&t.hide()},i.prototype._checkIfVisibleWithReference=function(t,e,i,n){t.isVisible(n)?void 0===i[t.id]&&(i[t.id]=!0,e.push(t)):t.displayed&&t.hide()},e.exports=i},{"../../util":46,"../Stack":29,"./item/RangeItem":43}],37:[function(t,e){"use strict";function i(t,e){this.body=t,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,groupOrderSwap:function(t,e){var i=e.order;e.order=t.order,t.order=i},groupOrder:"order",selectable:!0,multiselect:!1,editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:a.snap,onAdd:function(t,e){e(t)},onUpdate:function(t,e){e(t)},onMove:function(t,e){e(t)},onRemove:function(t,e){e(t)},onMoving:function(t,e){e(t)},onAddGroup:function(t,e){e(t)},onMoveGroup:function(t,e){e(t)},onRemoveGroup:function(t,e){e(t)},margin:{item:{horizontal:10,vertical:10},axis:20}},this.options=o.extend({},this.defaultOptions),this.itemOptions={type:{start:"Date",end:"Date"}},this.conversion={toScreen:t.util.toScreen,toTime:t.util.toTime},this.dom={},this.props={},this.hammer=null;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,e){i._onAdd(e.items)},update:function(t,e){i._onUpdate(e.items)},remove:function(t,e){i._onRemove(e.items)}},this.groupListeners={add:function(t,e){i._onAddGroups(e.items)},update:function(t,e){i._onUpdateGroups(e.items)},remove:function(t,e){i._onRemoveGroups(e.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.stackDirty=!0,this.touchParams={},this.groupTouchParams={},this._create(),this.setOptions(e)}var n=t("../../module/hammer"),o=t("../../util"),r=t("../../DataSet"),s=t("../../DataView"),a=t("../TimeStep"),h=t("./Component"),d=t("./Group"),u=t("./BackgroundGroup"),l=t("./item/BoxItem"),c=t("./item/PointItem"),p=t("./item/RangeItem"),m=t("./item/BackgroundItem"),f="__ungrouped__",g="__background__";i.prototype=new h,i.types={background:m,box:l,range:p,point:c},i.prototype._create=function(){var t=document.createElement("div");t.className="vis-itemset",t["timeline-itemset"]=this,this.dom.frame=t;var e=document.createElement("div");e.className="vis-background",t.appendChild(e),this.dom.background=e;var i=document.createElement("div");i.className="vis-foreground",t.appendChild(i),this.dom.foreground=i;var o=document.createElement("div");o.className="vis-axis",this.dom.axis=o;var r=document.createElement("div");r.className="vis-labelset",this.dom.labelSet=r,this._updateUngrouped();var s=new u(g,null,this);s.show(),this.groups[g]=s,this.hammer=new n(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(t){t.isFirst&&this._onTouch(t)}.bind(this)),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:30}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.groupHammer=new n(this.body.dom.leftContainer),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:30}),this.show()},i.prototype.setOptions=function(t){if(t){var e=["type","align","order","stack","selectable","multiselect","groupOrder","dataAttributes","template","groupTemplate","hide","snap","groupOrderSwap"];o.selectiveExtend(e,this.options,t),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation.item="top"===t.orientation?"top":"bottom":"object"==typeof t.orientation&&"item"in t.orientation&&(this.options.orientation.item=t.orientation.item)),"margin"in t&&("number"==typeof t.margin?(this.options.margin.axis=t.margin,this.options.margin.item.horizontal=t.margin,this.options.margin.item.vertical=t.margin):"object"==typeof t.margin&&(o.selectiveExtend(["axis"],this.options.margin,t.margin),"item"in t.margin&&("number"==typeof t.margin.item?(this.options.margin.item.horizontal=t.margin.item,this.options.margin.item.vertical=t.margin.item):"object"==typeof t.margin.item&&o.selectiveExtend(["horizontal","vertical"],this.options.margin.item,t.margin.item)))),"editable"in t&&("boolean"==typeof t.editable?(this.options.editable.updateTime=t.editable,this.options.editable.updateGroup=t.editable,this.options.editable.add=t.editable,this.options.editable.remove=t.editable):"object"==typeof t.editable&&o.selectiveExtend(["updateTime","updateGroup","add","remove"],this.options.editable,t.editable)),"groupEditable"in t&&("boolean"==typeof t.groupEditable?(this.options.groupEditable.order=t.groupEditable,this.options.groupEditable.add=t.groupEditable,this.options.groupEditable.remove=t.groupEditable):"object"==typeof t.groupEditable&&o.selectiveExtend(["order","add","remove"],this.options.groupEditable,t.groupEditable));var i=function(e){var i=t[e];if(i){if(!(i instanceof Function))throw new Error("option "+e+" must be a function "+e+"(item, callback)");this.options[e]=i}}.bind(this);["onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(i),this.markDirty()}},i.prototype.markDirty=function(t){this.groupIds=[],this.stackDirty=!0,t&&t.refreshItems&&o.forEach(this.items,function(t){t.dirty=!0,t.displayed&&t.redraw()})},i.prototype.destroy=function(){this.hide(),this.setItems(null),this.setGroups(null),this.hammer=null,this.body=null,this.conversion=null},i.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},i.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||this.body.dom.left.appendChild(this.dom.labelSet)},i.prototype.setSelection=function(t){var e,i,n,o;for(void 0==t&&(t=[]),Array.isArray(t)||(t=[t]),e=0,i=this.selection.length;i>e;e++)n=this.selection[e],o=this.items[n],o&&o.unselect();for(this.selection=[],e=0,i=t.length;i>e;e++)n=t[e],o=this.items[n],o&&(this.selection.push(n),o.select())},i.prototype.getSelection=function(){return this.selection.concat([])},i.prototype.getVisibleItems=function(){var t=this.body.range.getRange(),e=this.body.util.toScreen(t.start),i=this.body.util.toScreen(t.end),n=[];for(var o in this.groups)if(this.groups.hasOwnProperty(o))for(var r=this.groups[o],s=r.visibleItems,a=0;a<s.length;a++){var h=s[a];h.left<i&&h.left+h.width>e&&n.push(h.id)}return n},i.prototype._deselect=function(t){for(var e=this.selection,i=0,n=e.length;n>i;i++)if(e[i]==t){e.splice(i,1);break}},i.prototype.redraw=function(){var t=this.options.margin,e=this.body.range,i=o.option.asSize,n=this.options,r=n.orientation.item,s=!1,a=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,a.className="vis-itemset",s=this._orderGroups()||s;var h=e.end-e.start,d=h!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth;d&&(this.stackDirty=!0),this.lastVisibleInterval=h,this.props.lastWidth=this.props.width;var u=this.stackDirty,l=this._firstGroup(),c={item:t.item,axis:t.axis},p={item:t.item,axis:t.item.vertical/2},m=0,f=t.axis+t.item.vertical;return this.groups[g].redraw(e,p,u),o.forEach(this.groups,function(t){var i=t==l?c:p,n=t.redraw(e,i,u);s=n||s,m+=t.height}),m=Math.max(m,f),this.stackDirty=!1,a.style.height=i(m),this.props.width=a.offsetWidth,this.props.height=m,this.dom.axis.style.top=i("top"==r?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.dom.axis.style.left="0",s=this._isResized()||s},i.prototype._firstGroup=function(){var t="top"==this.options.orientation.item?0:this.groupIds.length-1,e=this.groupIds[t],i=this.groups[e]||this.groups[f];return i||null},i.prototype._updateUngrouped=function(){{var t,e,i=this.groups[f];this.groups[g]}if(this.groupsData){if(i){i.hide(),delete this.groups[f];for(e in this.items)if(this.items.hasOwnProperty(e)){t=this.items[e],t.parent&&t.parent.remove(t);var n=this._getGroupId(t.data),o=this.groups[n];o&&o.add(t)||t.hide()}}}else if(!i){var r=null,s=null;i=new d(r,s,this),this.groups[f]=i;for(e in this.items)this.items.hasOwnProperty(e)&&(t=this.items[e],i.add(t));i.show()}},i.prototype.getLabelSet=function(){return this.dom.labelSet},i.prototype.setItems=function(t){var e,i=this,n=this.itemsData;if(t){if(!(t instanceof r||t instanceof s))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=t}else this.itemsData=null;if(n&&(o.forEach(this.itemListeners,function(t,e){n.off(e,t)}),e=n.getIds(),this._onRemove(e)),this.itemsData){var a=this.id;o.forEach(this.itemListeners,function(t,e){i.itemsData.on(e,t,a)}),e=this.itemsData.getIds(),this._onAdd(e),this._updateUngrouped()}},i.prototype.getItems=function(){return this.itemsData},i.prototype.setGroups=function(t){var e,i=this;if(this.groupsData&&(o.forEach(this.groupListeners,function(t,e){i.groupsData.off(e,t)}),e=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(e)),t){if(!(t instanceof r||t instanceof s))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var n=this.id;o.forEach(this.groupListeners,function(t,e){i.groupsData.on(e,t,n)}),e=this.groupsData.getIds(),this._onAddGroups(e)}this._updateUngrouped(),this._order(),this.body.emitter.emit("change",{queue:!0})},i.prototype.getGroups=function(){return this.groupsData},i.prototype.removeItem=function(t){var e=this.itemsData.get(t),i=this.itemsData.getDataSet();e&&this.options.onRemove(e,function(e){e&&i.remove(t)})},i.prototype._getType=function(t){return t.type||this.options.type||(t.end?"range":"box")},i.prototype._getGroupId=function(t){var e=this._getType(t);return"background"==e&&void 0==t.group?g:this.groupsData?t.group:f},i.prototype._onUpdate=function(t){var e=this;t.forEach(function(t){var n,o=e.itemsData.get(t,e.itemOptions),r=e.items[t],s=e._getType(o),a=i.types[s];if(r&&(a&&r instanceof a?e._updateItem(r,o):(n=r.selected,e._removeItem(r),r=null)),!r){if(!a)throw new TypeError("rangeoverflow"==s?'Item type "rangeoverflow" is deprecated. Use css styling instead: .vis-item.vis-range .vis-item-content {overflow: visible;}':'Unknown item type "'+s+'"');r=new a(o,e.conversion,e.options),r.id=t,e._addItem(r),n&&(this.selection.push(t),r.select())}}.bind(this)),this._order(),this.stackDirty=!0,this.body.emitter.emit("change",{queue:!0})},i.prototype._onAdd=i.prototype._onUpdate,i.prototype._onRemove=function(t){var e=0,i=this;t.forEach(function(t){var n=i.items[t];n&&(e++,i._removeItem(n))}),e&&(this._order(),this.stackDirty=!0,this.body.emitter.emit("change",{queue:!0}))},i.prototype._order=function(){o.forEach(this.groups,function(t){t.order()})},i.prototype._onUpdateGroups=function(t){this._onAddGroups(t)},i.prototype._onAddGroups=function(t){var e=this;t.forEach(function(t){var i=e.groupsData.get(t),n=e.groups[t];if(n)n.setData(i);else{if(t==f||t==g)throw new Error("Illegal group id. "+t+" is a reserved id.");var r=Object.create(e.options);o.extend(r,{height:null}),n=new d(t,i,e),e.groups[t]=n;for(var s in e.items)if(e.items.hasOwnProperty(s)){var a=e.items[s];a.data.group==t&&n.add(a)}n.order(),n.show()}}),this.body.emitter.emit("change",{queue:!0})},i.prototype._onRemoveGroups=function(t){var e=this.groups;t.forEach(function(t){var i=e[t];i&&(i.hide(),delete e[t])}),this.markDirty(),this.body.emitter.emit("change",{queue:!0})},i.prototype._orderGroups=function(){if(this.groupsData){var t=this.groupsData.getIds({order:this.options.groupOrder}),e=!o.equalArray(t,this.groupIds);if(e){var i=this.groups;t.forEach(function(t){i[t].hide()}),t.forEach(function(t){i[t].show()}),this.groupIds=t}return e}return!1},i.prototype._addItem=function(t){this.items[t.id]=t;var e=this._getGroupId(t.data),i=this.groups[e];i&&i.add(t)},i.prototype._updateItem=function(t,e){var i=t.data.group,n=t.data.subgroup;if(t.setData(e),i!=t.data.group||n!=t.data.subgroup){var o=this.groups[i];o&&o.remove(t);var r=this._getGroupId(t.data),s=this.groups[r];s&&s.add(t)}},i.prototype._removeItem=function(t){t.hide(),delete this.items[t.id];var e=this.selection.indexOf(t.id);-1!=e&&this.selection.splice(e,1),t.parent&&t.parent.remove(t)},i.prototype._constructByEndArray=function(t){for(var e=[],i=0;i<t.length;i++)t[i]instanceof p&&e.push(t[i]);return e},i.prototype._onTouch=function(t){this.touchParams.item=this.itemFromTarget(t),this.touchParams.dragLeftItem=t.target.dragLeftItem||!1,this.touchParams.dragRightItem=t.target.dragRightItem||!1,this.touchParams.itemProps=null},i.prototype._getGroupIndex=function(t){for(var e=0;e<this.groupIds.length;e++)if(t==this.groupIds[e])return e},i.prototype._onDragStart=function(t){var e,i=this.touchParams.item||null,n=this;if(i&&i.selected){if(!this.options.editable.updateTime&&!this.options.editable.updateGroup&&!i.editable)return;if(i.editable===!1)return;var o=this.touchParams.dragLeftItem,r=this.touchParams.dragRightItem;if(o)e={item:o,initialX:t.center.x,dragLeft:!0,data:this._cloneItemData(i.data)},this.touchParams.itemProps=[e];else if(r)e={item:r,initialX:t.center.x,dragRight:!0,data:this._cloneItemData(i.data)},this.touchParams.itemProps=[e];else{this.touchParams.selectedItem=i;var s=this._getGroupIndex(i.data.group);this.touchParams.itemProps=this.getSelection().map(function(e){var i=n.items[e],o=n._getGroupIndex(i.data.group);return{item:i,initialX:t.center.x,groupOffset:s-o,data:this._cloneItemData(i.data)}}.bind(this))}t.stopPropagation()}else this.options.editable.add&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey)&&this._onDragStartAddItem(t)},i.prototype._onDragStartAddItem=function(t){var e=this.options.snap||null,i=o.getAbsoluteLeft(this.dom.frame),n=t.center.x-i-10,r=this.body.util.toTime(n),s=this.body.util.getScale(),a=this.body.util.getStep(),h=e?e(r,s,a):h,d=h,u={type:"range",start:h,end:d,content:"new item"},l=o.randomUUID();u[this.itemsData._fieldId]=l;var c=this.groupFromTarget(t);c&&(u.group=c.groupId);var m=new p(u,this.conversion,this.options);m.id=l,m.data=this._cloneItemData(u),this._addItem(m);var f={item:m,dragRight:!0,initialX:t.center.x,data:m.data};this.touchParams.itemProps=[f],t.stopPropagation()},i.prototype._onDrag=function(t){if(this.touchParams.itemProps){t.stopPropagation();var e=this,i=this.options.snap||null,n=this.body.dom.root.offsetLeft+this.body.domProps.left.width,r=this.body.util.getScale(),s=this.body.util.getStep(),a=this.touchParams.selectedItem,h=e.options.editable.updateGroup,d=null;if(h&&a&&void 0!=a.data.group){var u=e.groupFromTarget(t);u&&(d=this._getGroupIndex(u.groupId))}this.touchParams.itemProps.forEach(function(a){var h=e.body.util.toTime(t.center.x-n),u=e.body.util.toTime(a.initialX-n),l=h-u,c=this._cloneItemData(a.item.data);if(a.item.editable!==!1){var p=e.options.editable.updateTime||a.item.editable===!0;if(p)if(a.dragLeft){if(void 0!=c.start){var m=o.convert(a.data.start,"Date"),f=new Date(m.valueOf()+l);c.start=i?i(f,r,s):f}}else if(a.dragRight){if(void 0!=c.end){var g=o.convert(a.data.end,"Date"),v=new Date(g.valueOf()+l);c.end=i?i(v,r,s):v}}else if(void 0!=c.start){var m=o.convert(a.data.start,"Date").valueOf(),f=new Date(m+l);if(void 0!=c.end){var g=o.convert(a.data.end,"Date"),y=g.valueOf()-m.valueOf();c.start=i?i(f,r,s):f,c.end=new Date(c.start.valueOf()+y)}else c.start=i?i(f,r,s):f}var b=e.options.editable.updateGroup||a.item.editable===!0;if(b&&!a.dragLeft&&!a.dragRight&&null!=d&&void 0!=c.group){var _=d-a.groupOffset;_=Math.max(0,_),_=Math.min(e.groupIds.length-1,_),c.group=e.groupIds[_]}c=this._cloneItemData(c),e.options.onMoving(c,function(t){t&&a.item.setData(this._cloneItemData(t,"Date"))}.bind(this))}}.bind(this)),this.stackDirty=!0,this.body.emitter.emit("change")}},i.prototype._moveToGroup=function(t,e){var i=this.groups[e];if(i&&i.groupId!=t.data.group){var n=t.parent;n.remove(t),n.order(),i.add(t),i.order(),t.data.group=i.groupId}},i.prototype._onDragEnd=function(t){if(this.touchParams.itemProps){t.stopPropagation();var e=this,i=this.itemsData.getDataSet(),n=this.touchParams.itemProps;this.touchParams.itemProps=null,n.forEach(function(t){var n=t.item.id,o=null!=e.itemsData.get(n,e.itemOptions);if(o){var r=this._cloneItemData(t.item.data);e.options.onMove(r,function(o){o?(o[i._fieldId]=n,i.update(o)):(t.item.setData(t.data),e.stackDirty=!0,e.body.emitter.emit("change"))})}else e.options.onAdd(t.item.data,function(i){e._removeItem(t.item),i&&e.itemsData.getDataSet().add(i),e.stackDirty=!0,e.body.emitter.emit("change")})}.bind(this))}},i.prototype._onGroupDragStart=function(t){this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(t),this.groupTouchParams.group&&(t.stopPropagation(),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))},i.prototype._onGroupDrag=function(t){if(this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();var e=this.groupFromTarget(t);if(e&&e.height!=this.groupTouchParams.group.height){var i=e.top<this.groupTouchParams.group.top,n=t.center?t.center.y:t.clientY,r=o.getAbsoluteTop(e.dom.foreground),s=this.groupTouchParams.group.height;if(i){if(n>r+s)return}else{var a=e.height;if(r+a-s>n)return}}if(e&&e!=this.groupTouchParams.group){var h=this.groupsData,d=h.get(e.groupId),u=h.get(this.groupTouchParams.group.groupId);
u&&d&&(this.options.groupOrderSwap(u,d,this.groupsData),this.groupsData.update(u),this.groupsData.update(d));var l=this.groupsData.getIds({order:this.options.groupOrder});if(!o.equalArray(l,this.groupTouchParams.originalOrder))for(var h=this.groupsData,c=this.groupTouchParams.originalOrder,p=this.groupTouchParams.group.groupId,m=Math.min(c.length,l.length),f=0,g=0,v=0;m>f;){for(;m>f+g&&m>f+v&&l[f+g]==c[f+v];)f++;if(f+g>=m)break;if(l[f+g]!=p)if(c[f+v]!=p){var y=l.indexOf(c[f+v]),b=h.get(l[f+g]),_=h.get(c[f+v]);this.options.groupOrderSwap(b,_,h),h.update(b),h.update(_);var w=l[f+g];l[f+g]=c[f+v],l[y]=w,f++}else v=1;else g=1}}}},i.prototype._onGroupDragEnd=function(t){if(this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();var e=this,i=e.groupTouchParams.group.groupId,n=e.groupsData.getDataSet(),r=o.extend({},n.get(i));e.options.onMoveGroup(r,function(t){if(t)t[n._fieldId]=i,n.update(t);else{var r=n.getIds({order:e.options.groupOrder});if(!o.equalArray(r,e.groupTouchParams.originalOrder))for(var s=e.groupTouchParams.originalOrder,a=Math.min(s.length,r.length),h=0;a>h;){for(;a>h&&r[h]==s[h];)h++;if(h>=a)break;var d=r.indexOf(s[h]),u=n.get(r[h]),l=n.get(s[h]);e.options.groupOrderSwap(u,l,n),groupsData.update(u),groupsData.update(l);var c=r[h];r[h]=s[h],r[d]=c,h++}}}),e.body.emitter.emit("groupDragged",{groupId:i})}},i.prototype._onSelectItem=function(t){if(this.options.selectable){var e=t.srcEvent&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey),i=t.srcEvent&&t.srcEvent.shiftKey;if(e||i)return void this._onMultiSelectItem(t);var n=this.getSelection(),o=this.itemFromTarget(t),r=o?[o.id]:[];this.setSelection(r);var s=this.getSelection();(s.length>0||n.length>0)&&this.body.emitter.emit("select",{items:s,event:t})}},i.prototype._onAddItem=function(t){if(this.options.selectable&&this.options.editable.add){var e=this,i=this.options.snap||null,n=this.itemFromTarget(t);if(t.stopPropagation(),n){var r=e.itemsData.get(n.id);this.options.onUpdate(r,function(t){t&&e.itemsData.getDataSet().update(t)})}else{var s=o.getAbsoluteLeft(this.dom.frame),a=t.center.x-s,h=this.body.util.toTime(a),d=this.body.util.getScale(),u=this.body.util.getStep(),l={start:i?i(h,d,u):h,content:"new item"};if("range"===this.options.type){var c=this.body.util.toTime(a+this.props.width/5);l.end=i?i(c,d,u):c}l[this.itemsData._fieldId]=o.randomUUID();var p=this.groupFromTarget(t);p&&(l.group=p.groupId),l=this._cloneItemData(l),this.options.onAdd(l,function(t){t&&e.itemsData.getDataSet().add(t)})}}},i.prototype._onMultiSelectItem=function(t){if(this.options.selectable){var e=this.itemFromTarget(t);if(e){var n=this.options.multiselect?this.getSelection():[],o=t.srcEvent&&t.srcEvent.shiftKey||!1;if(o&&this.options.multiselect){n.push(e.id);var r=i._getItemRange(this.itemsData.get(n,this.itemOptions));n=[];for(var s in this.items)if(this.items.hasOwnProperty(s)){var a=this.items[s],h=a.data.start,d=void 0!==a.data.end?a.data.end:h;h>=r.min&&d<=r.max&&!(a instanceof m)&&n.push(a.id)}}else{var u=n.indexOf(e.id);-1==u?n.push(e.id):n.splice(u,1)}this.setSelection(n),this.body.emitter.emit("select",{items:this.getSelection(),event:t})}}},i._getItemRange=function(t){var e=null,i=null;return t.forEach(function(t){(null==i||t.start<i)&&(i=t.start),void 0!=t.end?(null==e||t.end>e)&&(e=t.end):(null==e||t.start>e)&&(e=t.start)}),{min:i,max:e}},i.prototype.itemFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-item"))return e["timeline-item"];e=e.parentNode}return null},i.prototype.groupFromTarget=function(t){for(var e=t.center?t.center.y:t.clientY,i=0;i<this.groupIds.length;i++){var n=this.groupIds[i],r=this.groups[n],s=r.dom.foreground,a=o.getAbsoluteTop(s);if(e>a&&e<a+s.offsetHeight)return r;if("top"===this.options.orientation.item){if(i===this.groupIds.length-1&&e>a)return r}else if(0===i&&e<a+s.offset)return r}return null},i.itemSetFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-itemset"))return e["timeline-itemset"];e=e.parentNode}return null},i.prototype._cloneItemData=function(t,e){var i=o.extend({},t);return e||(e=this.itemsData.getDataSet()._options.type),void 0!=i.start&&(i.start=o.convert(i.start,e&&e.start||"Date")),void 0!=i.end&&(i.end=o.convert(i.end,e&&e.end||"Date")),i},e.exports=i},{"../../DataSet":15,"../../DataView":16,"../../module/hammer":19,"../../util":46,"../TimeStep":30,"./BackgroundGroup":32,"./Component":33,"./Group":36,"./item/BackgroundItem":39,"./item/BoxItem":40,"./item/PointItem":42,"./item/RangeItem":43}],38:[function(t,e){"use strict";function i(t,e){this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,format:r.FORMAT,moment:a,timeAxis:null},this.options=n.extend({},this.defaultOptions),this.body=t,this._create(),this.setOptions(e)}var n=t("../../util"),o=t("./Component"),r=t("../TimeStep"),s=t("../DateUtil"),a=t("../../module/moment");i.prototype=new o,i.prototype.setOptions=function(t){t&&(n.selectiveExtend(["showMinorLabels","showMajorLabels","hiddenDates","timeAxis","moment"],this.options,t),n.selectiveDeepExtend(["format"],this.options,t),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation.axis=t.orientation:"object"==typeof t.orientation&&"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis)),"locale"in t&&("function"==typeof a.locale?a.locale(t.locale):a.lang(t.locale)))},i.prototype._create=function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"},i.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null},i.prototype.redraw=function(){var t=this.props,e=this.dom.foreground,i=this.dom.background,n="top"==this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,o=e.parentNode!==n;this._calculateCharSize();var r=this.options.showMinorLabels&&"none"!==this.options.orientation.axis,s=this.options.showMajorLabels&&"none"!==this.options.orientation.axis;t.minorLabelHeight=r?t.minorCharHeight:0,t.majorLabelHeight=s?t.majorCharHeight:0,t.height=t.minorLabelHeight+t.majorLabelHeight,t.width=e.offsetWidth,t.minorLineHeight=this.body.domProps.root.height-t.majorLabelHeight-("top"==this.options.orientation.axis?this.body.domProps.bottom.height:this.body.domProps.top.height),t.minorLineWidth=1,t.majorLineHeight=t.minorLineHeight+t.majorLabelHeight,t.majorLineWidth=1;var a=e.nextSibling,h=i.nextSibling;return e.parentNode&&e.parentNode.removeChild(e),i.parentNode&&i.parentNode.removeChild(i),e.style.height=this.props.height+"px",this._repaintLabels(),a?n.insertBefore(e,a):n.appendChild(e),h?this.body.dom.backgroundVertical.insertBefore(i,h):this.body.dom.backgroundVertical.appendChild(i),this._isResized()||o},i.prototype._repaintLabels=function(){var t=this.options.orientation.axis,e=n.convert(this.body.range.start,"Number"),i=n.convert(this.body.range.end,"Number"),o=this.body.util.toTime(7*(this.props.minorCharWidth||10)).valueOf(),a=o-s.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this.body.range,o);a-=this.body.util.toTime(0).valueOf();var h=new r(new Date(e),new Date(i),a,this.body.hiddenDates);h.setMoment(this.options.moment),this.options.format&&h.setFormat(this.options.format),this.options.timeAxis&&h.setScale(this.options.timeAxis),this.step=h;var d=this.dom;d.redundant.lines=d.lines,d.redundant.majorTexts=d.majorTexts,d.redundant.minorTexts=d.minorTexts,d.lines=[],d.majorTexts=[],d.minorTexts=[];var u,l,c,p,m,f,g,v,y,b=void 0,_=0;for(h.start(),l=h.getCurrent(),p=this.body.util.toScreen(l);h.hasNext()&&1e3>_;){_++,m=h.isMajor(),y=h.getClassName(),v=h.getLabelMinor(),u=l,c=p,h.next(),l=h.getCurrent(),p=this.body.util.toScreen(l),f=p-c;var w=(v.length+1)*this.props.minorCharWidth<f;this.options.showMinorLabels&&w&&this._repaintMinorText(c,v,t,y),m&&this.options.showMajorLabels?(c>0&&(void 0==b&&(b=c),this._repaintMajorText(c,h.getLabelMajor(),t,y)),g=this._repaintMajorLine(c,f,t,y)):w?g=this._repaintMinorLine(c,f,t,y):g&&(g.style.width=parseInt(g.style.width)+f+"px")}if(this.options.showMajorLabels){var D=this.body.util.toTime(0),k=h.getLabelMajor(D),x=k.length*(this.props.majorCharWidth||10)+10;(void 0==b||b>x)&&this._repaintMajorText(0,k,t,y)}n.forEach(this.dom.redundant,function(t){for(;t.length;){var e=t.pop();e&&e.parentNode&&e.parentNode.removeChild(e)}})},i.prototype._repaintMinorText=function(t,e,i,n){var o=this.dom.redundant.minorTexts.shift();if(!o){var r=document.createTextNode("");o=document.createElement("div"),o.appendChild(r),this.dom.foreground.appendChild(o)}return this.dom.minorTexts.push(o),o.childNodes[0].nodeValue=e,o.style.top="top"==i?this.props.majorLabelHeight+"px":"0",o.style.left=t+"px",o.className="vis-text vis-minor "+n,o},i.prototype._repaintMajorText=function(t,e,i,n){var o=this.dom.redundant.majorTexts.shift();if(!o){var r=document.createTextNode(e);o=document.createElement("div"),o.appendChild(r),this.dom.foreground.appendChild(o)}return this.dom.majorTexts.push(o),o.childNodes[0].nodeValue=e,o.className="vis-text vis-major "+n,o.style.top="top"==i?"0":this.props.minorLabelHeight+"px",o.style.left=t+"px",o},i.prototype._repaintMinorLine=function(t,e,i,n){var o=this.dom.redundant.lines.shift();o||(o=document.createElement("div"),this.dom.background.appendChild(o)),this.dom.lines.push(o);var r=this.props;return o.style.top="top"==i?r.majorLabelHeight+"px":this.body.domProps.top.height+"px",o.style.height=r.minorLineHeight+"px",o.style.left=t-r.minorLineWidth/2+"px",o.style.width=e+"px",o.className="vis-grid vis-vertical vis-minor "+n,o},i.prototype._repaintMajorLine=function(t,e,i,n){var o=this.dom.redundant.lines.shift();o||(o=document.createElement("div"),this.dom.background.appendChild(o)),this.dom.lines.push(o);var r=this.props;return o.style.top="top"==i?"0":this.body.domProps.top.height+"px",o.style.left=t-r.majorLineWidth/2+"px",o.style.height=r.majorLineHeight+"px",o.style.width=e+"px",o.className="vis-grid vis-vertical vis-major "+n,o},i.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth},e.exports=i},{"../../module/moment":20,"../../util":46,"../DateUtil":27,"../TimeStep":30,"./Component":33}],39:[function(t,e){"use strict";function i(t,e,i){if(this.props={content:{width:0}},this.overflow=!1,t){if(void 0==t.start)throw new Error('Property "start" missing in item '+t.id);if(void 0==t.end)throw new Error('Property "end" missing in item '+t.id)}n.call(this,t,e,i)}var n=(t("../../../module/hammer"),t("./Item")),o=t("../BackgroundGroup"),r=t("./RangeItem");i.prototype=new n(null,null,null),i.prototype.baseClassName="vis-item vis-background",i.prototype.stack=!1,i.prototype.isVisible=function(t){return this.data.start<t.end&&this.data.end>t.start},i.prototype.redraw=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.box=document.createElement("div"),t.frame=document.createElement("div"),t.frame.className="vis-item-overflow",t.box.appendChild(t.frame),t.content=document.createElement("div"),t.content.className="vis-item-content",t.frame.appendChild(t.content),this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!t.box.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(t.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var i=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");t.box.className=this.baseClassName+i,this.overflow="hidden"!==window.getComputedStyle(t.content).overflow,this.props.content.width=this.dom.content.offsetWidth,this.height=0,this.dirty=!1}},i.prototype.show=r.prototype.show,i.prototype.hide=r.prototype.hide,i.prototype.repositionX=r.prototype.repositionX,i.prototype.repositionY=function(t){var e="top"===this.options.orientation.item;this.dom.content.style.top=e?"":"0",this.dom.content.style.bottom=e?"0":"";var i;if(void 0!==this.data.subgroup){var n=this.data.subgroup,r=this.parent.subgroups,s=r[n].index;if(1==e){i=this.parent.subgroups[n].height+t.item.vertical,i+=0==s?t.axis-.5*t.item.vertical:0;var a=this.parent.top;for(var h in r)r.hasOwnProperty(h)&&1==r[h].visible&&r[h].index<s&&(a+=r[h].height+t.item.vertical);a+=0!=s?t.axis-.5*t.item.vertical:0,this.dom.box.style.top=a+"px",this.dom.box.style.bottom=""}else{var a=this.parent.top,d=0;for(var h in r)if(r.hasOwnProperty(h)&&1==r[h].visible){var u=r[h].height+t.item.vertical;d+=u,r[h].index>s&&(a+=u)}i=this.parent.subgroups[n].height+t.item.vertical,this.dom.box.style.top=this.parent.height-d+a+"px",this.dom.box.style.bottom=""}}else this.parent instanceof o?(i=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.top=e?"0":"",this.dom.box.style.bottom=e?"":"0"):(i=this.parent.height,this.dom.box.style.top=this.parent.top+"px",this.dom.box.style.bottom="");this.dom.box.style.height=i+"px"},e.exports=i},{"../../../module/hammer":19,"../BackgroundGroup":32,"./Item":41,"./RangeItem":43}],40:[function(t,e){"use strict";function i(t,e,i){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},t&&void 0==t.start)throw new Error('Property "start" missing in item '+t);n.call(this,t,e,i)}{var n=t("./Item");t("../../../util")}i.prototype=new n(null,null,null),i.prototype.isVisible=function(t){var e=(t.end-t.start)/4;return this.data.start>t.start-e&&this.data.start<t.end+e},i.prototype.redraw=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.box=document.createElement("DIV"),t.content=document.createElement("DIV"),t.content.className="vis-item-content",t.box.appendChild(t.content),t.line=document.createElement("DIV"),t.line.className="vis-line",t.dot=document.createElement("DIV"),t.dot.className="vis-dot",t.box["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!t.box.parentNode){var e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(t.box)}if(!t.line.parentNode){var i=this.parent.dom.background;if(!i)throw new Error("Cannot redraw item: parent has no background container element");i.appendChild(t.line)}if(!t.dot.parentNode){var n=this.parent.dom.axis;if(!i)throw new Error("Cannot redraw item: parent has no axis container element");n.appendChild(t.dot)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var o=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===!0)&&this.editable!==!1,r=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(o?" vis-editable":" vis-readonly");t.box.className="vis-item vis-box"+r,t.line.className="vis-item vis-line"+r,t.dot.className="vis-item vis-dot"+r,this.props.dot.height=t.dot.offsetHeight,this.props.dot.width=t.dot.offsetWidth,this.props.line.width=t.line.offsetWidth,this.width=t.box.offsetWidth,this.height=t.box.offsetHeight,this.dirty=!1}this._repaintDeleteButton(t.box)},i.prototype.show=function(){this.displayed||this.redraw()},i.prototype.hide=function(){if(this.displayed){var t=this.dom;t.box.parentNode&&t.box.parentNode.removeChild(t.box),t.line.parentNode&&t.line.parentNode.removeChild(t.line),t.dot.parentNode&&t.dot.parentNode.removeChild(t.dot),this.displayed=!1}},i.prototype.repositionX=function(){var t=this.conversion.toScreen(this.data.start),e=this.options.align;this.left="right"==e?t-this.width:"left"==e?t:t-this.width/2,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t-this.props.line.width/2+"px",this.dom.dot.style.left=t-this.props.dot.width/2+"px"},i.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.box,i=this.dom.line,n=this.dom.dot;if("top"==t)e.style.top=(this.top||0)+"px",i.style.top="0",i.style.height=this.parent.top+this.top+1+"px",i.style.bottom="";else{var o=this.parent.itemSet.props.height,r=o-this.parent.top-this.parent.height+this.top;e.style.top=(this.parent.height-this.top-this.height||0)+"px",i.style.top=o-r+"px",i.style.bottom="0"}n.style.top=-this.props.dot.height/2+"px"},i.prototype.getWidthLeft=function(){return this.width/2},i.prototype.getWidthRight=function(){return this.width/2},e.exports=i},{"../../../util":46,"./Item":41}],41:[function(t,e){"use strict";function i(t,e,i){this.id=null,this.parent=null,this.data=t,this.dom=null,this.conversion=e||{},this.options=i||{},this.selected=!1,this.displayed=!1,this.dirty=!0,this.top=null,this.left=null,this.width=null,this.height=null,this.editable=null,this.data&&this.data.hasOwnProperty("editable")&&"boolean"==typeof this.data.editable&&(this.editable=t.editable)}var n=t("../../../module/hammer"),o=t("../../../util");i.prototype.stack=!0,i.prototype.select=function(){this.selected=!0,this.dirty=!0,this.displayed&&this.redraw()},i.prototype.unselect=function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()},i.prototype.setData=function(t){var e=void 0!=t.group&&this.data.group!=t.group;e&&this.parent.itemSet._moveToGroup(this,t.group),t.hasOwnProperty("editable")&&"boolean"==typeof t.editable&&(this.editable=t.editable),this.data=t,this.dirty=!0,this.displayed&&this.redraw()},i.prototype.setParent=function(t){this.displayed?(this.hide(),this.parent=t,this.parent&&this.show()):this.parent=t},i.prototype.isVisible=function(){return!1},i.prototype.show=function(){return!1},i.prototype.hide=function(){return!1},i.prototype.redraw=function(){},i.prototype.repositionX=function(){},i.prototype.repositionY=function(){},i.prototype._repaintDeleteButton=function(t){var e=(this.options.editable.remove||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&e&&!this.dom.deleteButton){var i=this,o=document.createElement("div");o.className="vis-delete",o.title="Delete this item",new n(o).on("tap",function(t){t.stopPropagation(),i.parent.removeFromDataSet(i)}),t.appendChild(o),this.dom.deleteButton=o}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},i.prototype._updateContents=function(t){var e;if(this.options.template){var i=this.parent.itemSet.itemsData.get(this.id);e=this.options.template(i)}else e=this.data.content;var n=this._contentToString(this.content)!==this._contentToString(e);if(n){if(e instanceof Element)t.innerHTML="",t.appendChild(e);else if(void 0!=e)t.innerHTML=e;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.content=e}},i.prototype._updateTitle=function(t){null!=this.data.title?t.title=this.data.title||"":t.removeAttribute("vis-title")},i.prototype._updateDataAttributes=function(t){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var e=[];if(Array.isArray(this.options.dataAttributes))e=this.options.dataAttributes;else{if("all"!=this.options.dataAttributes)return;e=Object.keys(this.data)}for(var i=0;i<e.length;i++){var n=e[i],o=this.data[n];null!=o?t.setAttribute("data-"+n,o):t.removeAttribute("data-"+n)}}},i.prototype._updateStyle=function(t){this.style&&(o.removeCssText(t,this.style),this.style=null),this.data.style&&(o.addCssText(t,this.data.style),this.style=this.data.style)},i.prototype._contentToString=function(t){return"string"==typeof t?t:t&&"outerHTML"in t?t.outerHTML:t},i.prototype.getWidthLeft=function(){return 0},i.prototype.getWidthRight=function(){return 0},e.exports=i},{"../../../module/hammer":19,"../../../util":46}],42:[function(t,e){"use strict";function i(t,e,i){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0}},t&&void 0==t.start)throw new Error('Property "start" missing in item '+t);n.call(this,t,e,i)}var n=t("./Item");i.prototype=new n(null,null,null),i.prototype.isVisible=function(t){var e=(t.end-t.start)/4;return this.data.start>t.start-e&&this.data.start<t.end+e},i.prototype.redraw=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.point=document.createElement("div"),t.content=document.createElement("div"),t.content.className="vis-item-content",t.point.appendChild(t.content),t.dot=document.createElement("div"),t.point.appendChild(t.dot),t.point["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!t.point.parentNode){var e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(t.point)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.point),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var i=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===!0)&&this.editable!==!1,n=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(i?" vis-editable":" vis-readonly");t.point.className="vis-item vis-point"+n,t.dot.className="vis-item vis-dot"+n,this.props.dot.width=t.dot.offsetWidth,this.props.dot.height=t.dot.offsetHeight,this.props.content.height=t.content.offsetHeight,t.content.style.marginLeft=2*this.props.dot.width+"px",this.width=t.point.offsetWidth,this.height=t.point.offsetHeight,t.dot.style.top=(this.height-this.props.dot.height)/2+"px",t.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1}this._repaintDeleteButton(t.point)},i.prototype.show=function(){this.displayed||this.redraw()},i.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)},i.prototype.repositionX=function(){var t=this.conversion.toScreen(this.data.start);this.left=t-this.props.dot.width,this.dom.point.style.left=this.left+"px"},i.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.point;e.style.top="top"==t?this.top+"px":this.parent.height-this.top-this.height+"px"},i.prototype.getWidthLeft=function(){return this.props.dot.width},i.prototype.getWidthRight=function(){return this.width-this.props.dot.width},e.exports=i},{"./Item":41}],43:[function(t,e){"use strict";function i(t,e,i){if(this.props={content:{width:0}},this.overflow=!1,t){if(void 0==t.start)throw new Error('Property "start" missing in item '+t.id);if(void 0==t.end)throw new Error('Property "end" missing in item '+t.id)}n.call(this,t,e,i)}var n=(t("../../../module/hammer"),t("./Item"));i.prototype=new n(null,null,null),i.prototype.baseClassName="vis-item vis-range",i.prototype.isVisible=function(t){return this.data.start<t.end&&this.data.end>t.start},i.prototype.redraw=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.box=document.createElement("div"),t.frame=document.createElement("div"),t.frame.className="vis-item-overflow",t.box.appendChild(t.frame),t.content=document.createElement("div"),t.content.className="vis-item-content",t.frame.appendChild(t.content),t.box["timeline-item"]=this,this.dirty=!0),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!t.box.parentNode){var e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(t.box)}if(this.displayed=!0,this.dirty){this._updateContents(this.dom.content),this._updateTitle(this.dom.box),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var i=(this.options.editable.updateTime||this.options.editable.updateGroup||this.editable===!0)&&this.editable!==!1,n=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(i?" vis-editable":" vis-readonly");t.box.className=this.baseClassName+n,this.overflow="hidden"!==window.getComputedStyle(t.frame).overflow,this.dom.content.style.maxWidth="none",this.props.content.width=this.dom.content.offsetWidth,this.height=this.dom.box.offsetHeight,this.dom.content.style.maxWidth="",this.dirty=!1}this._repaintDeleteButton(t.box),this._repaintDragLeft(),this._repaintDragRight()},i.prototype.show=function(){this.displayed||this.redraw()},i.prototype.hide=function(){if(this.displayed){var t=this.dom.box;t.parentNode&&t.parentNode.removeChild(t),this.displayed=!1}},i.prototype.repositionX=function(t){var e,i,n=this.parent.width,o=this.conversion.toScreen(this.data.start),r=this.conversion.toScreen(this.data.end);(void 0===t||t===!0)&&(-n>o&&(o=-n),r>2*n&&(r=2*n));var s=Math.max(r-o,1);switch(this.overflow?(this.left=o,this.width=s+this.props.content.width,i=this.props.content.width):(this.left=o,this.width=s,i=Math.min(r-o,this.props.content.width)),this.dom.box.style.left=this.left+"px",this.dom.box.style.width=s+"px",this.options.align){case"left":this.dom.content.style.left="0";break;case"right":this.dom.content.style.left=Math.max(s-i,0)+"px";break;case"center":this.dom.content.style.left=Math.max((s-i)/2,0)+"px";break;default:e=this.overflow?r>0?Math.max(-o,0):-i:0>o?-o:0,this.dom.content.style.left=e+"px"}},i.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.box;e.style.top="top"==t?this.top+"px":this.parent.height-this.top-this.height+"px"},i.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var t=document.createElement("div");t.className="vis-drag-left",t.dragLeftItem=this,this.dom.box.appendChild(t),this.dom.dragLeft=t}else!this.selected&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},i.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var t=document.createElement("div");t.className="vis-drag-right",t.dragRightItem=this,this.dom.box.appendChild(t),this.dom.dragRight=t}else!this.selected&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},e.exports=i},{"../../../module/hammer":19,"./Item":41}],44:[function(t,e,i){"use strict";i.en={current:"current",time:"time"},i.en_EN=i.en,i.en_US=i.en,i.nl={current:"huidige",time:"tijd"},i.nl_NL=i.nl,i.nl_BE=i.nl},{}],45:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="string",o="boolean",r="number",s="array",a="date",h="object",d="dom",u="moment",l={configure:{enabled:{"boolean":o},filter:{"boolean":o,"function":"function"},container:{dom:d},__type__:{object:h,"boolean":o,"function":"function"}},align:{string:n},autoResize:{"boolean":o},throttleRedraw:{number:r},clickToUse:{"boolean":o},dataAttributes:{string:n,array:s},editable:{add:{"boolean":o,undefined:"undefined"},remove:{"boolean":o,undefined:"undefined"},updateGroup:{"boolean":o,undefined:"undefined"},updateTime:{"boolean":o,undefined:"undefined"},__type__:{"boolean":o,object:h}},end:{number:r,date:a,string:n,moment:u},format:{minorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:h}},majorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:h}},__type__:{object:h}},moment:{"function":"function"},groupOrder:{string:n,"function":"function"},groupEditable:{add:{"boolean":o,undefined:"undefined"},remove:{"boolean":o,undefined:"undefined"},order:{"boolean":o,undefined:"undefined"},__type__:{"boolean":o,object:h}},groupOrderSwap:{"function":"function"},height:{string:n,number:r},hiddenDates:{start:{date:a,number:r,string:n,moment:u},end:{date:a,number:r,string:n,moment:u},repeat:{string:n},__type__:{object:h,array:s}},locale:{string:n},locales:{__type__:{object:h}},margin:{axis:{number:r},item:{horizontal:{number:r,undefined:"undefined"},vertical:{number:r,undefined:"undefined"},__type__:{object:h,number:r}},__type__:{object:h,number:r}},max:{date:a,number:r,string:n,moment:u},maxHeight:{number:r,string:n},min:{date:a,number:r,string:n,moment:u},minHeight:{number:r,string:n},moveable:{"boolean":o},multiselect:{"boolean":o},onAdd:{"function":"function"},onUpdate:{"function":"function"},onMove:{"function":"function"},onMoving:{"function":"function"},onRemove:{"function":"function"},onAddGroup:{"function":"function"},onMoveGroup:{"function":"function"},onRemoveGroup:{"function":"function"},order:{"function":"function"},orientation:{axis:{string:n,undefined:"undefined"},item:{string:n,undefined:"undefined"},__type__:{string:n,object:h}},selectable:{"boolean":o},showCurrentTime:{"boolean":o},showMajorLabels:{"boolean":o},showMinorLabels:{"boolean":o},stack:{"boolean":o},snap:{"function":"function","null":"null"},start:{date:a,number:r,string:n,moment:u},template:{"function":"function"},groupTemplate:{"function":"function"},timeAxis:{scale:{string:n,undefined:"undefined"},step:{number:r,undefined:"undefined"},__type__:{object:h}},type:{string:n},width:{string:n,number:r},zoomable:{"boolean":o},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:r},zoomMin:{number:r},__type__:{object:h}},c={global:{align:["center","left","right"],autoResize:!0,throttleRedraw:[10,0,1e3,10],clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},groupsDraggable:!1,height:"",locale:"",margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",min:"",minHeight:"",moveable:!1,multiselect:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,start:"",type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1]}};
i.allOptions=l,i.configureOptions=c},{}],46:[function(t,e,i){"use strict";var n=t("./module/moment"),o=t("./module/uuid");i.isNumber=function(t){return t instanceof Number||"number"==typeof t},i.recursiveDOMDelete=function(t){if(t)for(;t.hasChildNodes()===!0;)i.recursiveDOMDelete(t.firstChild),t.removeChild(t.firstChild)},i.giveRange=function(t,e,i,n){if(e==t)return.5;var o=1/(e-t);return Math.max(0,(n-t)*o)},i.isString=function(t){return t instanceof String||"string"==typeof t},i.isDate=function(t){if(t instanceof Date)return!0;if(i.isString(t)){var e=r.exec(t);if(e)return!0;if(!isNaN(Date.parse(t)))return!0}return!1},i.randomUUID=function(){return o.v4()},i.assignAllKeys=function(t,e){for(var i in t)t.hasOwnProperty(i)&&"object"!=typeof t[i]&&(t[i]=e)},i.fillIfDefined=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];for(var o in t)void 0!==e[o]&&("object"!=typeof e[o]?void 0!==e[o]&&null!==e[o]||void 0===t[o]||n!==!0?t[o]=e[o]:delete t[o]:"object"==typeof t[o]&&i.fillIfDefined(t[o],e[o],n))},i.protoExtend=function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t},i.extend=function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}return t},i.selectiveExtend=function(t,e){if(!Array.isArray(t))throw new Error("Array with property names expected as first argument");for(var i=2;i<arguments.length;i++)for(var n=arguments[i],o=0;o<t.length;o++){var r=t[o];n.hasOwnProperty(r)&&(e[r]=n[r])}return e},i.selectiveDeepExtend=function(t,e,n){var o=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r=2;r<arguments.length;r++)for(var s=arguments[r],a=0;a<t.length;a++){var h=t[a];if(s.hasOwnProperty(h))if(n[h]&&n[h].constructor===Object)void 0===e[h]&&(e[h]={}),e[h].constructor===Object?i.deepExtend(e[h],n[h],!1,o):null===n[h]&&void 0!==e[h]&&o===!0?delete e[h]:e[h]=n[h];else{if(Array.isArray(n[h]))throw new TypeError("Arrays are not supported by deepExtend");null===n[h]&&void 0!==e[h]&&o===!0?delete e[h]:e[h]=n[h]}}return e},i.selectiveNotDeepExtend=function(t,e,n){var o=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r in n)if(n.hasOwnProperty(r)&&-1==t.indexOf(r))if(n[r]&&n[r].constructor===Object)void 0===e[r]&&(e[r]={}),e[r].constructor===Object?i.deepExtend(e[r],n[r]):null===n[r]&&void 0!==e[r]&&o===!0?delete e[r]:e[r]=n[r];else if(Array.isArray(n[r])){e[r]=[];for(var s=0;s<n[r].length;s++)e[r].push(n[r][s])}else null===n[r]&&void 0!==e[r]&&o===!0?delete e[r]:e[r]=n[r];return e},i.deepExtend=function(t,e,n,o){for(var r in e)if(e.hasOwnProperty(r)||n===!0)if(e[r]&&e[r].constructor===Object)void 0===t[r]&&(t[r]={}),t[r].constructor===Object?i.deepExtend(t[r],e[r],n):null===e[r]&&void 0!==t[r]&&o===!0?delete t[r]:t[r]=e[r];else if(Array.isArray(e[r])){t[r]=[];for(var s=0;s<e[r].length;s++)t[r].push(e[r][s])}else null===e[r]&&void 0!==t[r]&&o===!0?delete t[r]:t[r]=e[r];return t},i.equalArray=function(t,e){if(t.length!=e.length)return!1;for(var i=0,n=t.length;n>i;i++)if(t[i]!=e[i])return!1;return!0},i.convert=function(t,e){var o;if(void 0===t)return void 0;if(null===t)return null;if(!e)return t;if("string"!=typeof e&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return Boolean(t);case"number":case"Number":return Number(t.valueOf());case"string":case"String":return String(t);case"Date":if(i.isNumber(t))return new Date(t);if(t instanceof Date)return new Date(t.valueOf());if(n.isMoment(t))return new Date(t.valueOf());if(i.isString(t))return o=r.exec(t),o?new Date(Number(o[1])):n(t).toDate();throw new Error("Cannot convert object of type "+i.getType(t)+" to type Date");case"Moment":if(i.isNumber(t))return n(t);if(t instanceof Date)return n(t.valueOf());if(n.isMoment(t))return n(t);if(i.isString(t))return o=r.exec(t),n(o?Number(o[1]):t);throw new Error("Cannot convert object of type "+i.getType(t)+" to type Date");case"ISODate":if(i.isNumber(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(n.isMoment(t))return t.toDate().toISOString();if(i.isString(t))return o=r.exec(t),o?new Date(Number(o[1])).toISOString():new Date(t).toISOString();throw new Error("Cannot convert object of type "+i.getType(t)+" to type ISODate");case"ASPDate":if(i.isNumber(t))return"/Date("+t+")/";if(t instanceof Date)return"/Date("+t.valueOf()+")/";if(i.isString(t)){o=r.exec(t);var s;return s=o?new Date(Number(o[1])).valueOf():new Date(t).valueOf(),"/Date("+s+")/"}throw new Error("Cannot convert object of type "+i.getType(t)+" to type ASPDate");default:throw new Error('Unknown type "'+e+'"')}};var r=/^\/?Date\((\-?\d+)/i;i.getType=function(t){var e=typeof t;return"object"==e?null===t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":Array.isArray(t)?"Array":t instanceof Date?"Date":"Object":"number"==e?"Number":"boolean"==e?"Boolean":"string"==e?"String":void 0===e?"undefined":e},i.copyAndExtendArray=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(t[n]);return i.push(e),i},i.copyArray=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e},i.getAbsoluteLeft=function(t){return t.getBoundingClientRect().left},i.getAbsoluteTop=function(t){return t.getBoundingClientRect().top},i.addClassName=function(t,e){var i=t.className.split(" ");-1==i.indexOf(e)&&(i.push(e),t.className=i.join(" "))},i.removeClassName=function(t,e){var i=t.className.split(" "),n=i.indexOf(e);-1!=n&&(i.splice(n,1),t.className=i.join(" "))},i.forEach=function(t,e){var i,n;if(Array.isArray(t))for(i=0,n=t.length;n>i;i++)e(t[i],i,t);else for(i in t)t.hasOwnProperty(i)&&e(t[i],i,t)},i.toArray=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e},i.updateProperty=function(t,e,i){return t[e]!==i?(t[e]=i,!0):!1},i.throttle=function(t,e){var i=null,n=!1;return function o(){i?n=!0:(n=!1,t(),i=setTimeout(function(){i=null,n&&o()},e))}},i.addEventListener=function(t,e,i,n){t.addEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&navigator.userAgent.indexOf("Firefox")>=0&&(e="DOMMouseScroll"),t.addEventListener(e,i,n)):t.attachEvent("on"+e,i)},i.removeEventListener=function(t,e,i,n){t.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&navigator.userAgent.indexOf("Firefox")>=0&&(e="DOMMouseScroll"),t.removeEventListener(e,i,n)):t.detachEvent("on"+e,i)},i.preventDefault=function(t){t||(t=window.event),t.preventDefault?t.preventDefault():t.returnValue=!1},i.getTarget=function(t){t||(t=window.event);var e;return t.target?e=t.target:t.srcElement&&(e=t.srcElement),void 0!=e.nodeType&&3==e.nodeType&&(e=e.parentNode),e},i.hasParent=function(t,e){for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1},i.option={},i.option.asBoolean=function(t,e){return"function"==typeof t&&(t=t()),null!=t?0!=t:e||null},i.option.asNumber=function(t,e){return"function"==typeof t&&(t=t()),null!=t?Number(t)||e||null:e||null},i.option.asString=function(t,e){return"function"==typeof t&&(t=t()),null!=t?String(t):e||null},i.option.asSize=function(t,e){return"function"==typeof t&&(t=t()),i.isString(t)?t:i.isNumber(t)?t+"px":e||null},i.option.asElement=function(t,e){return"function"==typeof t&&(t=t()),t||e||null},i.hexToRGB=function(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,n){return e+e+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},i.overrideOpacity=function(t,e){if(-1!=t.indexOf("rgba"))return t;if(-1!=t.indexOf("rgb")){var n=t.substr(t.indexOf("(")+1).replace(")","").split(",");return"rgba("+n[0]+","+n[1]+","+n[2]+","+e+")"}var n=i.hexToRGB(t);return null==n?t:"rgba("+n.r+","+n.g+","+n.b+","+e+")"},i.RGBToHex=function(t,e,i){return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},i.parseColor=function(t){var e;if(i.isString(t)===!0){if(i.isValidRGB(t)===!0){var n=t.substr(4).substr(0,t.length-5).split(",").map(function(t){return parseInt(t)});t=i.RGBToHex(n[0],n[1],n[2])}if(i.isValidHex(t)===!0){var o=i.hexToHSV(t),r={h:o.h,s:.8*o.s,v:Math.min(1,1.02*o.v)},s={h:o.h,s:Math.min(1,1.25*o.s),v:.8*o.v},a=i.HSVToHex(s.h,s.s,s.v),h=i.HSVToHex(r.h,r.s,r.v);e={background:t,border:a,highlight:{background:h,border:a},hover:{background:h,border:a}}}else e={background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else e={},e.background=t.background||void 0,e.border=t.border||void 0,i.isString(t.highlight)?e.highlight={border:t.highlight,background:t.highlight}:(e.highlight={},e.highlight.background=t.highlight&&t.highlight.background||void 0,e.highlight.border=t.highlight&&t.highlight.border||void 0),i.isString(t.hover)?e.hover={border:t.hover,background:t.hover}:(e.hover={},e.hover.background=t.hover&&t.hover.background||void 0,e.hover.border=t.hover&&t.hover.border||void 0);return e},i.RGBToHSV=function(t,e,i){t/=255,e/=255,i/=255;var n=Math.min(t,Math.min(e,i)),o=Math.max(t,Math.max(e,i));if(n==o)return{h:0,s:0,v:n};var r=t==n?e-i:i==n?t-e:i-t,s=t==n?3:i==n?1:5,a=60*(s-r/(o-n))/360,h=(o-n)/o,d=o;return{h:a,s:h,v:d}};var s={split:function(t){var e={};return t.split(";").forEach(function(t){if(""!=t.trim()){var i=t.split(":"),n=i[0].trim(),o=i[1].trim();e[n]=o}}),e},join:function(t){return Object.keys(t).map(function(e){return e+": "+t[e]}).join("; ")}};i.addCssText=function(t,e){var n=s.split(t.style.cssText),o=s.split(e),r=i.extend(n,o);t.style.cssText=s.join(r)},i.removeCssText=function(t,e){var i=s.split(t.style.cssText),n=s.split(e);for(var o in n)n.hasOwnProperty(o)&&delete i[o];t.style.cssText=s.join(i)},i.HSVToRGB=function(t,e,i){var n,o,r,s=Math.floor(6*t),a=6*t-s,h=i*(1-e),d=i*(1-a*e),u=i*(1-(1-a)*e);switch(s%6){case 0:n=i,o=u,r=h;break;case 1:n=d,o=i,r=h;break;case 2:n=h,o=i,r=u;break;case 3:n=h,o=d,r=i;break;case 4:n=u,o=h,r=i;break;case 5:n=i,o=h,r=d}return{r:Math.floor(255*n),g:Math.floor(255*o),b:Math.floor(255*r)}},i.HSVToHex=function(t,e,n){var o=i.HSVToRGB(t,e,n);return i.RGBToHex(o.r,o.g,o.b)},i.hexToHSV=function(t){var e=i.hexToRGB(t);return i.RGBToHSV(e.r,e.g,e.b)},i.isValidHex=function(t){var e=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t);return e},i.isValidRGB=function(t){t=t.replace(" ","");var e=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(t);return e},i.isValidRGBA=function(t){t=t.replace(" ","");var e=/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(.{1,3})\)/i.test(t);return e},i.selectiveBridgeObject=function(t,e){if("object"==typeof e){for(var n=Object.create(e),o=0;o<t.length;o++)e.hasOwnProperty(t[o])&&"object"==typeof e[t[o]]&&(n[t[o]]=i.bridgeObject(e[t[o]]));return n}return null},i.bridgeObject=function(t){if("object"==typeof t){var e=Object.create(t);for(var n in t)t.hasOwnProperty(n)&&"object"==typeof t[n]&&(e[n]=i.bridgeObject(t[n]));return e}return null},i.mergeOptions=function(t,e,i){var n=(arguments.length<=3||void 0===arguments[3]?!1:arguments[3],arguments.length<=4||void 0===arguments[4]?{}:arguments[4]);if(null===e[i])t[i]=Object.create(n[i]);else if(void 0!==e[i])if("boolean"==typeof e[i])t[i].enabled=e[i];else{void 0===e[i].enabled&&(t[i].enabled=!0);for(var o in e[i])e[i].hasOwnProperty(o)&&(t[i][o]=e[i][o])}},i.binarySearchCustom=function(t,e,i,n){for(var o=1e4,r=0,s=0,a=t.length-1;a>=s&&o>r;){var h=Math.floor((s+a)/2),d=t[h],u=void 0===n?d[i]:d[i][n],l=e(u);if(0==l)return h;-1==l?s=h+1:a=h-1,r++}return-1},i.binarySearchValue=function(t,e,i,n){for(var o,r,s,a,h=1e4,d=0,u=0,l=t.length-1;l>=u&&h>d;){if(a=Math.floor(.5*(l+u)),o=t[Math.max(0,a-1)][i],r=t[a][i],s=t[Math.min(t.length-1,a+1)][i],r==e)return a;if(e>o&&r>e)return"before"==n?Math.max(0,a-1):a;if(e>r&&s>e)return"before"==n?a:Math.min(t.length-1,a+1);e>r?u=a+1:l=a-1,d++}return-1},i.easingFunctions={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return.5>t?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return.5>t?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},{"./module/moment":20,"./module/uuid":21}]},{},[1])(1)});